/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
Versão: 1.009
Data Criação: 06/08/2018
*/
export class DisclaimerUtil {
    /**
     * @param {?} poNotification
     * @param {?} poI18nPipe
     * @param {?} literals
     */
    constructor(poNotification, poI18nPipe, literals) {
        this.literals = {};
        this.poNotification = poNotification;
        this.poI18nPipe = poI18nPipe;
        this.literals = literals;
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @param {?=} tradValue
     * @param {?=} vldBlank
     * @return {?}
     */
    makeDisclaimer(property, value, hideClose = false, tradValue = false, vldBlank = false) {
        if (value === null || value === undefined) {
            return { label: '', property: '', value: '' };
        }
        if (vldBlank && value === '') {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${tradValue ? this.literals[value] : value}`,
            property: `${property}`,
            value: `${value}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @param {?=} vldBlank
     * @return {?}
     */
    makeDisclaimerFromNumber(property, value, hideClose = false, vldBlank = false) {
        if (value === null || value === undefined) {
            return { label: '', property: '', value: '' };
        }
        if (vldBlank && value === 0) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${value}`,
            property: `${property}`,
            value: `${value}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @return {?}
     */
    makeDisclaimerFromBoolean(property, value, hideClose = false) {
        if (value === null || value === undefined) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${value ? this.literals['yes'] : this.literals['no']}`,
            property: `${property}`,
            value: `${value}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @return {?}
     */
    makeDisclaimerFromDate(property, value, hideClose = false) {
        /** @type {?} */
        const dDate = this.ajustDate(value);
        if (!this.isValidDate(dDate)) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${dDate.toLocaleDateString()}`,
            property: `${property}`,
            value: `${this.dateToQueryParam(dDate)}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} length
     * @param {?=} hideClose
     * @param {?=} tradValue
     * @return {?}
     */
    makeDisclaimerFromMultiSelect(property, value, length = 0, hideClose = false, tradValue = false) {
        /** @type {?} */
        let lstLabels = '';
        /** @type {?} */
        let lstValues = '';
        if (!value) {
            return { label: '', property: '', value: '' };
        }
        if (value.length === 0 || (length > 0 && value.length === length)) {
            lstLabels = this.literals['all'];
            lstValues = 'all';
        }
        else {
            value.map((/**
             * @param {?} item
             * @return {?}
             */
            item => {
                if (lstLabels !== '') {
                    lstLabels = `${lstLabels}, `;
                }
                if (lstValues !== '') {
                    lstValues = `${lstValues},`;
                }
                lstLabels = `${lstLabels}${tradValue ? this.literals[item] : item}`;
                lstValues = `${lstValues}${item}`;
            }));
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${lstLabels}`,
            property: `${property}`,
            value: `${lstValues}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} length
     * @param {?=} hideClose
     * @return {?}
     */
    makeDisclaimerFromCheckboxGroup(property, value, length = 0, hideClose = false) {
        /** @type {?} */
        let lstLabels = '';
        /** @type {?} */
        let lstValues = '';
        if (!value) {
            return { label: '', property: '', value: '' };
        }
        if (value.length === 0) {
            lstLabels = this.literals['none'];
            lstValues = 'none';
        }
        else if (length > 0 && value.length === length) {
            lstLabels = this.literals['all'];
            lstValues = 'all';
        }
        else {
            value.map((/**
             * @param {?} checkParam
             * @return {?}
             */
            checkParam => {
                if (lstLabels !== '') {
                    lstLabels = `${lstLabels}, `;
                }
                if (lstValues !== '') {
                    lstValues = `${lstValues},`;
                }
                lstLabels = `${lstLabels}${this.literals[checkParam]}`;
                lstValues = `${lstValues}${checkParam}`;
            }));
        }
        return {
            hideClose,
            label: `${this.literals[property]}: ${lstLabels}`,
            property: `${property}`,
            value: `${lstValues}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @param {?=} validateEqual
     * @return {?}
     */
    makeDisclaimerFromRangeCharacter(property, value, hideClose = false, validateEqual = true) {
        if (value.valInitial === null || value.valInitial === undefined) {
            value.valInitial = value.iniInitial;
        }
        if (value.valFinal === null || value.valFinal === undefined) {
            value.valFinal = value.iniFinal;
        }
        if (validateEqual &&
            value.iniInitial === value.valInitial &&
            value.iniFinal === value.valFinal) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: this.poI18nPipe.transform(this.literals['filterRange'], [this.literals[property], `'${value.valInitial}'`, `'${value.valFinal}'`]),
            property: `${property}`,
            value: `${value.valInitial};${value.valFinal}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @param {?=} validateEqual
     * @return {?}
     */
    makeDisclaimerFromRangeNumber(property, value, hideClose = false, validateEqual = true) {
        if (value.valInitial === null || value.valInitial === undefined) {
            value.valInitial = value.iniInitial;
        }
        if (value.valFinal === null || value.valFinal === undefined) {
            value.valFinal = value.iniFinal;
        }
        if (validateEqual &&
            value.iniInitial === value.valInitial &&
            value.iniFinal === value.valFinal) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: this.poI18nPipe.transform(this.literals['filterRange'], [this.literals[property], value.valInitial, value.valFinal]),
            property: `${property}`,
            value: `${value.valInitial};${value.valFinal}`
        };
    }
    /**
     * @param {?} property
     * @param {?} value
     * @param {?=} hideClose
     * @param {?=} validateEqual
     * @return {?}
     */
    makeDisclaimerFromRangeDate(property, value, hideClose = false, validateEqual = true) {
        /** @type {?} */
        let valInitDate = this.ajustDate(value.valInitial);
        /** @type {?} */
        let valFinalDate = this.ajustDate(value.valFinal);
        if (!this.isValidDate(valInitDate)) {
            valInitDate = value.iniInitial;
            value.valInitial = value.iniInitial;
        }
        if (!this.isValidDate(valFinalDate)) {
            valFinalDate = value.iniFinal;
            value.valFinal = value.iniFinal;
        }
        if (validateEqual &&
            this.dateToQueryParam(value.iniInitial) === this.dateToQueryParam(valInitDate) &&
            this.dateToQueryParam(value.iniFinal) === this.dateToQueryParam(valFinalDate)) {
            return { label: '', property: '', value: '' };
        }
        return {
            hideClose,
            label: this.poI18nPipe.transform(this.literals['filterRange'], [this.literals[property], valInitDate.toLocaleDateString(), valFinalDate.toLocaleDateString()]),
            property: `${property}`,
            value: `${this.dateToQueryParam(valInitDate)};${this.dateToQueryParam(valFinalDate)}`
        };
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzCharFromDisclamer(disclaimers, property, defaultValue) {
        /** @type {?} */
        let returnValue = defaultValue;
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    returnValue = item.value;
                    return true;
                }
                return false;
            }));
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzNumberFromDisclamer(disclaimers, property, defaultValue) {
        /** @type {?} */
        let returnValue = defaultValue;
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    returnValue = item.value;
                    return true;
                }
                return false;
            }));
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzBooleanFromDisclamer(disclaimers, property, defaultValue) {
        /** @type {?} */
        const returnValue = defaultValue;
        if (disclaimers && disclaimers.length > 0) {
            /** @type {?} */
            const disclaimerFind = disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => item.property === property));
            if (disclaimerFind && disclaimerFind.value !== null && disclaimerFind.value !== undefined) {
                if (disclaimerFind.value === 'true') {
                    return true;
                }
                else {
                    return false;
                }
            }
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzDateFromDisclamer(disclaimers, property, defaultValue) {
        /** @type {?} */
        let returnValue = this.ajustDate(defaultValue);
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    returnValue = this.ajustDate(item.value);
                    return true;
                }
                return false;
            }));
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzMultiSelectCharFromDisclamer(disclaimers, property, defaultValue) {
        return this.atzMultiSelectFromDisclamer('char', disclaimers, property, defaultValue);
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzMultiSelectNumberFromDisclamer(disclaimers, property, defaultValue) {
        return this.atzMultiSelectFromDisclamer('number', disclaimers, property, defaultValue);
    }
    /**
     * @param {?} type
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} defaultValue
     * @return {?}
     */
    atzMultiSelectFromDisclamer(type, disclaimers, property, defaultValue) {
        /** @type {?} */
        let returnValue = [];
        defaultValue.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            returnValue.push(item.value);
        }));
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null || item.value === 'all' || item.value === 'none') {
                        return false;
                    }
                    returnValue = [];
                    item.value.split(',').forEach((/**
                     * @param {?} itemOpt
                     * @return {?}
                     */
                    itemOpt => {
                        if (type === 'char') {
                            returnValue.push(itemOpt);
                        }
                        if (type === 'number') {
                            returnValue.push(+itemOpt);
                        }
                    }));
                    return true;
                }
                return false;
            }));
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} options
     * @return {?}
     */
    atzCheckboxFromDisclamer(disclaimers, property, options) {
        /** @type {?} */
        let returnValue = [];
        options.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            returnValue.push(item.value);
        }));
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null || item.value === 'all' || item.value === 'none') {
                        return false;
                    }
                    returnValue = [];
                    item.value.split(',').forEach((/**
                     * @param {?} itemOpt
                     * @return {?}
                     */
                    itemOpt => {
                        returnValue.push(itemOpt);
                    }));
                    return true;
                }
                return false;
            }));
        }
        return returnValue;
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} rangeChar
     * @return {?}
     */
    atzRangeCharFromDisclamer(disclaimers, property, rangeChar) {
        /** @type {?} */
        let value = '';
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    value = item.value;
                    return true;
                }
                return false;
            }));
        }
        return this.atzRangeCharFromQueryParam(value, rangeChar);
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} rangeNum
     * @return {?}
     */
    atzRangeNumFromDisclamer(disclaimers, property, rangeNum) {
        /** @type {?} */
        let value = '';
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    value = item.value;
                    return true;
                }
                return false;
            }));
        }
        return this.atzRangeNumFromQueryParam(value, rangeNum);
    }
    /**
     * @param {?} disclaimers
     * @param {?} property
     * @param {?} rangeDate
     * @return {?}
     */
    atzRangeDateFromDisclamer(disclaimers, property, rangeDate) {
        /** @type {?} */
        let value = '';
        if (disclaimers && disclaimers.length > 0) {
            disclaimers.find((/**
             * @param {?} item
             * @return {?}
             */
            (item) => {
                if (item.property === property) {
                    if (item.value === null) {
                        return false;
                    }
                    value = item.value;
                    return true;
                }
                return false;
            }));
        }
        return this.atzRangeDateFromQueryParam(value, rangeDate);
    }
    /**
     * @param {?} value
     * @param {?} rangeChar
     * @return {?}
     */
    atzRangeCharFromQueryParam(value, rangeChar) {
        rangeChar.valInitial = rangeChar.iniInitial;
        rangeChar.valFinal = rangeChar.iniFinal;
        if (!value || value === '') {
            return rangeChar;
        }
        rangeChar.valInitial = value.split(';')[0];
        rangeChar.valFinal = value.split(';')[1];
        if (rangeChar.valFinal === null || rangeChar.valFinal === undefined) {
            rangeChar.valFinal = rangeChar.iniFinal;
        }
        return rangeChar;
    }
    /**
     * @param {?} value
     * @param {?} rangeNum
     * @return {?}
     */
    atzRangeNumFromQueryParam(value, rangeNum) {
        rangeNum.valInitial = rangeNum.iniInitial;
        rangeNum.valFinal = rangeNum.iniFinal;
        if (!value || value === '') {
            return rangeNum;
        }
        rangeNum.valInitial = +value.split(';')[0];
        rangeNum.valFinal = +value.split(';')[1];
        if (rangeNum.valFinal === null || rangeNum.valFinal === undefined) {
            rangeNum.valFinal = rangeNum.iniFinal;
        }
        return rangeNum;
    }
    /**
     * @param {?} value
     * @param {?} rangeDate
     * @return {?}
     */
    atzRangeDateFromQueryParam(value, rangeDate) {
        rangeDate.valInitial = rangeDate.iniInitial;
        rangeDate.valFinal = rangeDate.iniFinal;
        if (!value || value === '') {
            return rangeDate;
        }
        rangeDate.valInitial = this.queryParamToDate(value.split(';')[0]);
        rangeDate.valFinal = this.queryParamToDate(value.split(';')[1]);
        if (rangeDate.valFinal === null || rangeDate.valFinal === undefined) {
            rangeDate.valFinal = rangeDate.iniFinal;
        }
        return rangeDate;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    dateToQueryParam(date) {
        /** @type {?} */
        const iDay = date.getDate();
        /** @type {?} */
        const iMonth = date.getMonth() + 1;
        /** @type {?} */
        const iYear = date.getFullYear();
        return `${iYear}-${this.pad(iMonth)}-${this.pad(iDay)}`;
    }
    /**
     * @param {?} param
     * @return {?}
     */
    queryParamToDate(param) {
        /** @type {?} */
        const iDay = +param.split('-')[2];
        /** @type {?} */
        const iMonth = +param.split('-')[1];
        /** @type {?} */
        const iYear = +param.split('-')[0];
        return new Date(iYear, iMonth - 1, iDay);
    }
    /**
     * @param {?} date
     * @return {?}
     */
    isValidDate(date) {
        return date instanceof Date && !isNaN(date.getTime());
    }
    /**
     * @param {?} param
     * @return {?}
     */
    ajustDate(param) {
        if (param instanceof Date) {
            return param;
        }
        if (!param) {
            return param;
        }
        return this.queryParamToDate(param.split('T')[0]);
    }
    /**
     * @param {?} number
     * @return {?}
     */
    pad(number) {
        if (number < 10) {
            return '0' + number;
        }
        return number;
    }
}
if (false) {
    /** @type {?} */
    DisclaimerUtil.prototype.poNotification;
    /** @type {?} */
    DisclaimerUtil.prototype.poI18nPipe;
    /** @type {?} */
    DisclaimerUtil.prototype.literals;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY2xhaW1lci51dGlsLmpzIiwic291cmNlUm9vdCI6Im5nOi8vZHRzLWJhY2tvZmZpY2UtdXRpbC8iLCJzb3VyY2VzIjpbImxpYi91dGlscy9kaXNjbGFpbWVyLnV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQSxNQUFNLE9BQU8sY0FBYzs7Ozs7O0lBS3ZCLFlBQ0ksY0FBcUMsRUFDckMsVUFBc0IsRUFDdEIsUUFBZ0I7UUFMcEIsYUFBUSxHQUFRLEVBQUUsQ0FBQztRQU9mLElBQUksQ0FBQyxjQUFjLEdBQUcsY0FBYyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzdCLENBQUM7Ozs7Ozs7OztJQUVNLGNBQWMsQ0FBQyxRQUFnQixFQUFFLEtBQWEsRUFBRSxTQUFTLEdBQUcsS0FBSyxFQUFFLFNBQVMsR0FBRyxLQUFLLEVBQUUsUUFBUSxHQUFHLEtBQUs7UUFDekcsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDdkMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7U0FDakQ7UUFFRCxJQUFJLFFBQVEsSUFBSSxLQUFLLEtBQUssRUFBRSxFQUFFO1lBQzFCLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ2pEO1FBRUQsT0FBTztZQUNILFNBQVM7WUFDVCxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO1lBQ2hGLFFBQVEsRUFBRSxHQUFH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Q0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMxRCxDQUFDOzs7OztJQUVNLFNBQVMsQ0FBQyxLQUFVO1FBQ3ZCLElBQUksS0FBSyxZQUFZLElBQUksRUFBRTtZQUFFLE9BQU8sS0FBSyxDQUFDO1NBQUU7UUFDNUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUFFLE9BQU8sS0FBSyxDQUFDO1NBQUU7UUFFN0IsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7Ozs7O0lBRU0sR0FBRyxDQUFDLE1BQU07UUFDYixJQUFJLE1BQU0sR0FBRyxFQUFFLEVBQUU7WUFDYixPQUFPLEdBQUcsR0FBRyxNQUFNLENBQUM7U0FDdkI7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0NBQ0o7OztJQTdjRyx3Q0FBc0M7O0lBQ3RDLG9DQUF1Qjs7SUFDdkIsa0NBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuVmVyc8OjbzogMS4wMDlcclxuRGF0YSBDcmlhw6fDo286IDA2LzA4LzIwMThcclxuKi9cclxuXHJcbmltcG9ydCB7IFBvRGlzY2xhaW1lciwgUG9JMThuUGlwZSwgUG9DaGVja2JveEdyb3VwT3B0aW9uLCBQb011bHRpc2VsZWN0T3B0aW9uIH0gZnJvbSAnQHBvLXVpL25nLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBJRmlsdGVyUmFuZ2VDaGFyYWN0ZXIsIElGaWx0ZXJSYW5nZU51bWJlciwgSUZpbHRlclJhbmdlRGF0ZSB9IGZyb20gJy4uLy4uL2xpYi9pbnRlcmZhY2VzL2ZpbHRlci1yYW5nZS5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb05vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRGlzY2xhaW1lclV0aWwge1xyXG4gICAgcG9Ob3RpZmljYXRpb246IFBvTm90aWZpY2F0aW9uU2VydmljZTtcclxuICAgIHBvSTE4blBpcGU6IFBvSTE4blBpcGU7XHJcbiAgICBsaXRlcmFsczogYW55ID0ge307XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcG9Ob3RpZmljYXRpb246IFBvTm90aWZpY2F0aW9uU2VydmljZSxcclxuICAgICAgICBwb0kxOG5QaXBlOiBQb0kxOG5QaXBlLFxyXG4gICAgICAgIGxpdGVyYWxzOiBPYmplY3RcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMucG9Ob3RpZmljYXRpb24gPSBwb05vdGlmaWNhdGlvbjtcclxuICAgICAgICB0aGlzLnBvSTE4blBpcGUgPSBwb0kxOG5QaXBlO1xyXG4gICAgICAgIHRoaXMubGl0ZXJhbHMgPSBsaXRlcmFscztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWFrZURpc2NsYWltZXIocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgaGlkZUNsb3NlID0gZmFsc2UsIHRyYWRWYWx1ZSA9IGZhbHNlLCB2bGRCbGFuayA9IGZhbHNlKTogUG9EaXNjbGFpbWVyIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbDogJycsIHByb3BlcnR5OiAnJywgdmFsdWU6ICcnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmxkQmxhbmsgJiYgdmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsOiAnJywgcHJvcGVydHk6ICcnLCB2YWx1ZTogJycgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhpZGVDbG9zZSxcclxuICAgICAgICAgICAgbGFiZWw6IGAke3RoaXMubGl0ZXJhbHNbcHJvcGVydHldfTogJHt0cmFkVmFsdWUgPyB0aGlzLmxpdGVyYWxzW3ZhbHVlXSA6IHZhbHVlfWAsXHJcbiAgICAgICAgICAgIHByb3BlcnR5OiBgJHtwcm9wZXJ0eX1gLFxyXG4gICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWV9YFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1ha2VEaXNjbGFpbWVyRnJvbU51bWJlcihwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLCBoaWRlQ2xvc2UgPSBmYWxzZSwgdmxkQmxhbmsgPSBmYWxzZSk6IFBvRGlzY2xhaW1lciB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGFiZWw6ICcnLCBwcm9wZXJ0eTogJycsIHZhbHVlOiAnJyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZsZEJsYW5rICYmIHZhbHVlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsOiAnJywgcHJvcGVydHk6ICcnLCB2YWx1ZTogJycgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhpZGVDbG9zZSxcclxuICAgICAgICAgICAgbGFiZWw6IGAke3RoaXMubGl0ZXJhbHNbcHJvcGVydHldfTogJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eTogYCR7cHJvcGVydHl9YCxcclxuICAgICAgICAgICAgdmFsdWU6IGAke3ZhbHVlfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYWtlRGlzY2xhaW1lckZyb21Cb29sZWFuKHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiBib29sZWFuLCBoaWRlQ2xvc2UgPSBmYWxzZSk6IFBvRGlzY2xhaW1lciB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGFiZWw6ICcnLCBwcm9wZXJ0eTogJycsIHZhbHVlOiAnJyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGlkZUNsb3NlLFxyXG4gICAgICAgICAgICBsYWJlbDogYCR7dGhpcy5saXRlcmFsc1twcm9wZXJ0eV19OiAke3ZhbHVlID8gdGhpcy5saXRlcmFsc1sneWVzJ10gOiB0aGlzLmxpdGVyYWxzWydubyddfWAsXHJcbiAgICAgICAgICAgIHByb3BlcnR5OiBgJHtwcm9wZXJ0eX1gLFxyXG4gICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWV9YFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1ha2VEaXNjbGFpbWVyRnJvbURhdGUocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IERhdGUsIGhpZGVDbG9zZSA9IGZhbHNlKTogUG9EaXNjbGFpbWVyIHtcclxuICAgICAgICBjb25zdCBkRGF0ZTogRGF0ZSA9IHRoaXMuYWp1c3REYXRlKHZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWREYXRlKGREYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbDogJycsIHByb3BlcnR5OiAnJywgdmFsdWU6ICcnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoaWRlQ2xvc2UsXHJcbiAgICAgICAgICAgIGxhYmVsOiBgJHt0aGlzLmxpdGVyYWxzW3Byb3BlcnR5XX06ICR7ZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCl9YCxcclxuICAgICAgICAgICAgcHJvcGVydHk6IGAke3Byb3BlcnR5fWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBgJHt0aGlzLmRhdGVUb1F1ZXJ5UGFyYW0oZERhdGUpfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYWtlRGlzY2xhaW1lckZyb21NdWx0aVNlbGVjdChwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogQXJyYXk8YW55PiwgbGVuZ3RoID0gMCxcclxuICAgICAgICBoaWRlQ2xvc2UgPSBmYWxzZSwgdHJhZFZhbHVlID0gZmFsc2UpOiBQb0Rpc2NsYWltZXIge1xyXG4gICAgICAgIGxldCBsc3RMYWJlbHMgPSAnJztcclxuICAgICAgICBsZXQgbHN0VmFsdWVzID0gJyc7XHJcblxyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGFiZWw6ICcnLCBwcm9wZXJ0eTogJycsIHZhbHVlOiAnJyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCAobGVuZ3RoID4gMCAmJiB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aCkpIHtcclxuICAgICAgICAgICAgbHN0TGFiZWxzID0gdGhpcy5saXRlcmFsc1snYWxsJ107XHJcbiAgICAgICAgICAgIGxzdFZhbHVlcyA9ICdhbGwnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbHVlLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChsc3RMYWJlbHMgIT09ICcnKSB7IGxzdExhYmVscyA9IGAke2xzdExhYmVsc30sIGA7IH1cclxuICAgICAgICAgICAgICAgIGlmIChsc3RWYWx1ZXMgIT09ICcnKSB7IGxzdFZhbHVlcyA9IGAke2xzdFZhbHVlc30sYDsgfVxyXG4gICAgICAgICAgICAgICAgbHN0TGFiZWxzID0gYCR7bHN0TGFiZWxzfSR7dHJhZFZhbHVlID8gdGhpcy5saXRlcmFsc1tpdGVtXSA6IGl0ZW19YDtcclxuICAgICAgICAgICAgICAgIGxzdFZhbHVlcyA9IGAke2xzdFZhbHVlc30ke2l0ZW19YDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoaWRlQ2xvc2UsXHJcbiAgICAgICAgICAgIGxhYmVsOiBgJHt0aGlzLmxpdGVyYWxzW3Byb3BlcnR5XX06ICR7bHN0TGFiZWxzfWAsXHJcbiAgICAgICAgICAgIHByb3BlcnR5OiBgJHtwcm9wZXJ0eX1gLFxyXG4gICAgICAgICAgICB2YWx1ZTogYCR7bHN0VmFsdWVzfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYWtlRGlzY2xhaW1lckZyb21DaGVja2JveEdyb3VwKHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiBBcnJheTxzdHJpbmc+LCBsZW5ndGggPSAwLCBoaWRlQ2xvc2UgPSBmYWxzZSk6IFBvRGlzY2xhaW1lciB7XHJcbiAgICAgICAgbGV0IGxzdExhYmVscyA9ICcnO1xyXG4gICAgICAgIGxldCBsc3RWYWx1ZXMgPSAnJztcclxuXHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbDogJycsIHByb3BlcnR5OiAnJywgdmFsdWU6ICcnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxzdExhYmVscyA9IHRoaXMubGl0ZXJhbHNbJ25vbmUnXTtcclxuICAgICAgICAgICAgbHN0VmFsdWVzID0gJ25vbmUnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMCAmJiB2YWx1ZS5sZW5ndGggPT09IGxlbmd0aCkge1xyXG4gICAgICAgICAgICBsc3RMYWJlbHMgPSB0aGlzLmxpdGVyYWxzWydhbGwnXTtcclxuICAgICAgICAgICAgbHN0VmFsdWVzID0gJ2FsbCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWUubWFwKGNoZWNrUGFyYW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxzdExhYmVscyAhPT0gJycpIHsgbHN0TGFiZWxzID0gYCR7bHN0TGFiZWxzfSwgYDsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxzdFZhbHVlcyAhPT0gJycpIHsgbHN0VmFsdWVzID0gYCR7bHN0VmFsdWVzfSxgOyB9XHJcbiAgICAgICAgICAgICAgICBsc3RMYWJlbHMgPSBgJHtsc3RMYWJlbHN9JHt0aGlzLmxpdGVyYWxzW2NoZWNrUGFyYW1dfWA7XHJcbiAgICAgICAgICAgICAgICBsc3RWYWx1ZXMgPSBgJHtsc3RWYWx1ZXN9JHtjaGVja1BhcmFtfWA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGlkZUNsb3NlLFxyXG4gICAgICAgICAgICBsYWJlbDogYCR7dGhpcy5saXRlcmFsc1twcm9wZXJ0eV19OiAke2xzdExhYmVsc31gLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eTogYCR7cHJvcGVydHl9YCxcclxuICAgICAgICAgICAgdmFsdWU6IGAke2xzdFZhbHVlc31gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbWFrZURpc2NsYWltZXJGcm9tUmFuZ2VDaGFyYWN0ZXIocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IElGaWx0ZXJSYW5nZUNoYXJhY3RlciwgaGlkZUNsb3NlID0gZmFsc2UsXHJcbiAgICAgICAgdmFsaWRhdGVFcXVhbCA9IHRydWUpOiBQb0Rpc2NsYWltZXIge1xyXG4gICAgICAgIGlmICh2YWx1ZS52YWxJbml0aWFsID09PSBudWxsIHx8IHZhbHVlLnZhbEluaXRpYWwgPT09IHVuZGVmaW5lZCkgeyB2YWx1ZS52YWxJbml0aWFsID0gdmFsdWUuaW5pSW5pdGlhbDsgfVxyXG4gICAgICAgIGlmICh2YWx1ZS52YWxGaW5hbCA9PT0gbnVsbCB8fCB2YWx1ZS52YWxGaW5hbCA9PT0gdW5kZWZpbmVkKSB7IHZhbHVlLnZhbEZpbmFsID0gdmFsdWUuaW5pRmluYWw7IH1cclxuXHJcbiAgICAgICAgaWYgKHZhbGlkYXRlRXF1YWwgJiZcclxuICAgICAgICAgICAgdmFsdWUuaW5pSW5pdGlhbCA9PT0gdmFsdWUudmFsSW5pdGlhbCAmJlxyXG4gICAgICAgICAgICB2YWx1ZS5pbmlGaW5hbCA9PT0gdmFsdWUudmFsRmluYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgbGFiZWw6ICcnLCBwcm9wZXJ0eTogJycsIHZhbHVlOiAnJyB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaGlkZUNsb3NlLFxyXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5wb0kxOG5QaXBlLnRyYW5zZm9ybShcclxuICAgICAgICAgICAgICAgIHRoaXMubGl0ZXJhbHNbJ2ZpbHRlclJhbmdlJ10sXHJcbiAgICAgICAgICAgICAgICBbdGhpcy5saXRlcmFsc1twcm9wZXJ0eV0sIGAnJHt2YWx1ZS52YWxJbml0aWFsfSdgLCBgJyR7dmFsdWUudmFsRmluYWx9J2BdKSxcclxuICAgICAgICAgICAgcHJvcGVydHk6IGAke3Byb3BlcnR5fWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZS52YWxJbml0aWFsfTske3ZhbHVlLnZhbEZpbmFsfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYWtlRGlzY2xhaW1lckZyb21SYW5nZU51bWJlcihwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogSUZpbHRlclJhbmdlTnVtYmVyLCBoaWRlQ2xvc2UgPSBmYWxzZSxcclxuICAgICAgICB2YWxpZGF0ZUVxdWFsID0gdHJ1ZSk6IFBvRGlzY2xhaW1lciB7XHJcbiAgICAgICAgaWYgKHZhbHVlLnZhbEluaXRpYWwgPT09IG51bGwgfHwgdmFsdWUudmFsSW5pdGlhbCA9PT0gdW5kZWZpbmVkKSB7IHZhbHVlLnZhbEluaXRpYWwgPSB2YWx1ZS5pbmlJbml0aWFsOyB9XHJcbiAgICAgICAgaWYgKHZhbHVlLnZhbEZpbmFsID09PSBudWxsIHx8IHZhbHVlLnZhbEZpbmFsID09PSB1bmRlZmluZWQpIHsgdmFsdWUudmFsRmluYWwgPSB2YWx1ZS5pbmlGaW5hbDsgfVxyXG5cclxuICAgICAgICBpZiAodmFsaWRhdGVFcXVhbCAmJlxyXG4gICAgICAgICAgICB2YWx1ZS5pbmlJbml0aWFsID09PSB2YWx1ZS52YWxJbml0aWFsICYmXHJcbiAgICAgICAgICAgIHZhbHVlLmluaUZpbmFsID09PSB2YWx1ZS52YWxGaW5hbCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbDogJycsIHByb3BlcnR5OiAnJywgdmFsdWU6ICcnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoaWRlQ2xvc2UsXHJcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnBvSTE4blBpcGUudHJhbnNmb3JtKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saXRlcmFsc1snZmlsdGVyUmFuZ2UnXSxcclxuICAgICAgICAgICAgICAgIFt0aGlzLmxpdGVyYWxzW3Byb3BlcnR5XSwgdmFsdWUudmFsSW5pdGlhbCwgdmFsdWUudmFsRmluYWxdKSxcclxuICAgICAgICAgICAgcHJvcGVydHk6IGAke3Byb3BlcnR5fWAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZS52YWxJbml0aWFsfTske3ZhbHVlLnZhbEZpbmFsfWBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtYWtlRGlzY2xhaW1lckZyb21SYW5nZURhdGUocHJvcGVydHk6IHN0cmluZywgdmFsdWU6IElGaWx0ZXJSYW5nZURhdGUsIGhpZGVDbG9zZSA9IGZhbHNlLCB2YWxpZGF0ZUVxdWFsID0gdHJ1ZSk6IFBvRGlzY2xhaW1lciB7XHJcbiAgICAgICAgbGV0IHZhbEluaXREYXRlOiBEYXRlID0gdGhpcy5hanVzdERhdGUodmFsdWUudmFsSW5pdGlhbCk7XHJcbiAgICAgICAgbGV0IHZhbEZpbmFsRGF0ZTogRGF0ZSA9IHRoaXMuYWp1c3REYXRlKHZhbHVlLnZhbEZpbmFsKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWREYXRlKHZhbEluaXREYXRlKSkge1xyXG4gICAgICAgICAgICB2YWxJbml0RGF0ZSA9IHZhbHVlLmluaUluaXRpYWw7XHJcbiAgICAgICAgICAgIHZhbHVlLnZhbEluaXRpYWwgPSB2YWx1ZS5pbmlJbml0aWFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZERhdGUodmFsRmluYWxEYXRlKSkge1xyXG4gICAgICAgICAgICB2YWxGaW5hbERhdGUgPSB2YWx1ZS5pbmlGaW5hbDtcclxuICAgICAgICAgICAgdmFsdWUudmFsRmluYWwgPSB2YWx1ZS5pbmlGaW5hbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh2YWxpZGF0ZUVxdWFsICYmXHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZVRvUXVlcnlQYXJhbSh2YWx1ZS5pbmlJbml0aWFsKSA9PT0gdGhpcy5kYXRlVG9RdWVyeVBhcmFtKHZhbEluaXREYXRlKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmRhdGVUb1F1ZXJ5UGFyYW0odmFsdWUuaW5pRmluYWwpID09PSB0aGlzLmRhdGVUb1F1ZXJ5UGFyYW0odmFsRmluYWxEYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBsYWJlbDogJycsIHByb3BlcnR5OiAnJywgdmFsdWU6ICcnIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBoaWRlQ2xvc2UsXHJcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnBvSTE4blBpcGUudHJhbnNmb3JtKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saXRlcmFsc1snZmlsdGVyUmFuZ2UnXSxcclxuICAgICAgICAgICAgICAgIFt0aGlzLmxpdGVyYWxzW3Byb3BlcnR5XSwgdmFsSW5pdERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCksIHZhbEZpbmFsRGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKV0pLFxyXG4gICAgICAgICAgICBwcm9wZXJ0eTogYCR7cHJvcGVydHl9YCxcclxuICAgICAgICAgICAgdmFsdWU6IGAke3RoaXMuZGF0ZVRvUXVlcnlQYXJhbSh2YWxJbml0RGF0ZSl9OyR7dGhpcy5kYXRlVG9RdWVyeVBhcmFtKHZhbEZpbmFsRGF0ZSl9YFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0ekNoYXJGcm9tRGlzY2xhbWVyKGRpc2NsYWltZXJzOiBBcnJheTxQb0Rpc2NsYWltZXI+LCBwcm9wZXJ0eTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJldHVyblZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoZGlzY2xhaW1lcnMgJiYgZGlzY2xhaW1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkaXNjbGFpbWVycy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBpdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHpOdW1iZXJGcm9tRGlzY2xhbWVyKGRpc2NsYWltZXJzOiBBcnJheTxQb0Rpc2NsYWltZXI+LCBwcm9wZXJ0eTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJldHVyblZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG5cclxuICAgICAgICBpZiAoZGlzY2xhaW1lcnMgJiYgZGlzY2xhaW1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkaXNjbGFpbWVycy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBpdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHpCb29sZWFuRnJvbURpc2NsYW1lcihkaXNjbGFpbWVyczogQXJyYXk8UG9EaXNjbGFpbWVyPiwgcHJvcGVydHk6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBib29sZWFuKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChkaXNjbGFpbWVycyAmJiBkaXNjbGFpbWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc2NsYWltZXJGaW5kID0gZGlzY2xhaW1lcnMuZmluZCgoaXRlbSkgPT4gaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpO1xyXG4gICAgICAgICAgICBpZiAoZGlzY2xhaW1lckZpbmQgJiYgZGlzY2xhaW1lckZpbmQudmFsdWUgIT09IG51bGwgJiYgZGlzY2xhaW1lckZpbmQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc2NsYWltZXJGaW5kLnZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0ekRhdGVGcm9tRGlzY2xhbWVyKGRpc2NsYWltZXJzOiBBcnJheTxQb0Rpc2NsYWltZXI+LCBwcm9wZXJ0eTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IERhdGUpOiBEYXRlIHtcclxuICAgICAgICBsZXQgcmV0dXJuVmFsdWU6IERhdGUgPSB0aGlzLmFqdXN0RGF0ZShkZWZhdWx0VmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAoZGlzY2xhaW1lcnMgJiYgZGlzY2xhaW1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkaXNjbGFpbWVycy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0aGlzLmFqdXN0RGF0ZShpdGVtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXR6TXVsdGlTZWxlY3RDaGFyRnJvbURpc2NsYW1lcihkaXNjbGFpbWVyczogQXJyYXk8UG9EaXNjbGFpbWVyPiwgcHJvcGVydHk6IHN0cmluZyxcclxuICAgICAgICBkZWZhdWx0VmFsdWU6IEFycmF5PFBvTXVsdGlzZWxlY3RPcHRpb24+KTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR6TXVsdGlTZWxlY3RGcm9tRGlzY2xhbWVyKCdjaGFyJywgZGlzY2xhaW1lcnMsIHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHpNdWx0aVNlbGVjdE51bWJlckZyb21EaXNjbGFtZXIoZGlzY2xhaW1lcnM6IEFycmF5PFBvRGlzY2xhaW1lcj4sIHByb3BlcnR5OiBzdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBBcnJheTxQb011bHRpc2VsZWN0T3B0aW9uPik6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0ek11bHRpU2VsZWN0RnJvbURpc2NsYW1lcignbnVtYmVyJywgZGlzY2xhaW1lcnMsIHByb3BlcnR5LCBkZWZhdWx0VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHpNdWx0aVNlbGVjdEZyb21EaXNjbGFtZXIodHlwZTogc3RyaW5nLCBkaXNjbGFpbWVyczogQXJyYXk8UG9EaXNjbGFpbWVyPiwgcHJvcGVydHk6IHN0cmluZyxcclxuICAgICAgICBkZWZhdWx0VmFsdWU6IEFycmF5PFBvTXVsdGlzZWxlY3RPcHRpb24+KTogQXJyYXk8YW55PiB7XHJcblxyXG4gICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IFtdO1xyXG4gICAgICAgIGRlZmF1bHRWYWx1ZS5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnB1c2goaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChkaXNjbGFpbWVycyAmJiBkaXNjbGFpbWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRpc2NsYWltZXJzLmZpbmQoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnByb3BlcnR5ID09PSBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlID09PSBudWxsIHx8IGl0ZW0udmFsdWUgPT09ICdhbGwnIHx8IGl0ZW0udmFsdWUgPT09ICdub25lJykgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtT3B0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdjaGFyJykgeyByZXR1cm5WYWx1ZS5wdXNoKGl0ZW1PcHQpOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykgeyByZXR1cm5WYWx1ZS5wdXNoKCtpdGVtT3B0KTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXR6Q2hlY2tib3hGcm9tRGlzY2xhbWVyKGRpc2NsYWltZXJzOiBBcnJheTxQb0Rpc2NsYWltZXI+LCBwcm9wZXJ0eTogc3RyaW5nLFxyXG4gICAgICAgIG9wdGlvbnM6IEFycmF5PFBvQ2hlY2tib3hHcm91cE9wdGlvbj4pOiBBcnJheTxzdHJpbmc+IHtcclxuXHJcbiAgICAgICAgbGV0IHJldHVyblZhbHVlID0gW107XHJcbiAgICAgICAgb3B0aW9ucy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnB1c2goaXRlbS52YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChkaXNjbGFpbWVycyAmJiBkaXNjbGFpbWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRpc2NsYWltZXJzLmZpbmQoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnByb3BlcnR5ID09PSBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlID09PSBudWxsIHx8IGl0ZW0udmFsdWUgPT09ICdhbGwnIHx8IGl0ZW0udmFsdWUgPT09ICdub25lJykgeyByZXR1cm4gZmFsc2U7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnZhbHVlLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtT3B0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUucHVzaChpdGVtT3B0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0elJhbmdlQ2hhckZyb21EaXNjbGFtZXIoZGlzY2xhaW1lcnM6IEFycmF5PFBvRGlzY2xhaW1lcj4sIHByb3BlcnR5OiBzdHJpbmcsXHJcbiAgICAgICAgcmFuZ2VDaGFyOiBJRmlsdGVyUmFuZ2VDaGFyYWN0ZXIpOiBJRmlsdGVyUmFuZ2VDaGFyYWN0ZXIge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICBpZiAoZGlzY2xhaW1lcnMgJiYgZGlzY2xhaW1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkaXNjbGFpbWVycy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hdHpSYW5nZUNoYXJGcm9tUXVlcnlQYXJhbSh2YWx1ZSwgcmFuZ2VDaGFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXR6UmFuZ2VOdW1Gcm9tRGlzY2xhbWVyKGRpc2NsYWltZXJzOiBBcnJheTxQb0Rpc2NsYWltZXI+LCBwcm9wZXJ0eTogc3RyaW5nLFxyXG4gICAgICAgIHJhbmdlTnVtOiBJRmlsdGVyUmFuZ2VOdW1iZXIpOiBJRmlsdGVyUmFuZ2VOdW1iZXIge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICBpZiAoZGlzY2xhaW1lcnMgJiYgZGlzY2xhaW1lcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkaXNjbGFpbWVycy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wcm9wZXJ0eSA9PT0gcHJvcGVydHkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hdHpSYW5nZU51bUZyb21RdWVyeVBhcmFtKHZhbHVlLCByYW5nZU51bSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0elJhbmdlRGF0ZUZyb21EaXNjbGFtZXIoZGlzY2xhaW1lcnM6IEFycmF5PFBvRGlzY2xhaW1lcj4sIHByb3BlcnR5OiBzdHJpbmcsXHJcbiAgICAgICAgcmFuZ2VEYXRlOiBJRmlsdGVyUmFuZ2VEYXRlKTogSUZpbHRlclJhbmdlRGF0ZSB7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XHJcblxyXG4gICAgICAgIGlmIChkaXNjbGFpbWVycyAmJiBkaXNjbGFpbWVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRpc2NsYWltZXJzLmZpbmQoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnByb3BlcnR5ID09PSBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnZhbHVlID09PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gaXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmF0elJhbmdlRGF0ZUZyb21RdWVyeVBhcmFtKHZhbHVlLCByYW5nZURhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHpSYW5nZUNoYXJGcm9tUXVlcnlQYXJhbSh2YWx1ZTogc3RyaW5nLCByYW5nZUNoYXI6IElGaWx0ZXJSYW5nZUNoYXJhY3Rlcik6IElGaWx0ZXJSYW5nZUNoYXJhY3RlciB7XHJcbiAgICAgICAgcmFuZ2VDaGFyLnZhbEluaXRpYWwgPSByYW5nZUNoYXIuaW5pSW5pdGlhbDtcclxuICAgICAgICByYW5nZUNoYXIudmFsRmluYWwgPSByYW5nZUNoYXIuaW5pRmluYWw7XHJcblxyXG4gICAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICcnKSB7IHJldHVybiByYW5nZUNoYXI7IH1cclxuXHJcbiAgICAgICAgcmFuZ2VDaGFyLnZhbEluaXRpYWwgPSB2YWx1ZS5zcGxpdCgnOycpWzBdO1xyXG4gICAgICAgIHJhbmdlQ2hhci52YWxGaW5hbCA9IHZhbHVlLnNwbGl0KCc7JylbMV07XHJcbiAgICAgICAgaWYgKHJhbmdlQ2hhci52YWxGaW5hbCA9PT0gbnVsbCB8fCByYW5nZUNoYXIudmFsRmluYWwgPT09IHVuZGVmaW5lZCkgeyByYW5nZUNoYXIudmFsRmluYWwgPSByYW5nZUNoYXIuaW5pRmluYWw7IH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJhbmdlQ2hhcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXR6UmFuZ2VOdW1Gcm9tUXVlcnlQYXJhbSh2YWx1ZTogc3RyaW5nLCByYW5nZU51bTogSUZpbHRlclJhbmdlTnVtYmVyKTogSUZpbHRlclJhbmdlTnVtYmVyIHtcclxuICAgICAgICByYW5nZU51bS52YWxJbml0aWFsID0gcmFuZ2VOdW0uaW5pSW5pdGlhbDtcclxuICAgICAgICByYW5nZU51bS52YWxGaW5hbCA9IHJhbmdlTnVtLmluaUZpbmFsO1xyXG5cclxuICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgeyByZXR1cm4gcmFuZ2VOdW07IH1cclxuXHJcbiAgICAgICAgcmFuZ2VOdW0udmFsSW5pdGlhbCA9ICt2YWx1ZS5zcGxpdCgnOycpWzBdO1xyXG4gICAgICAgIHJhbmdlTnVtLnZhbEZpbmFsID0gK3ZhbHVlLnNwbGl0KCc7JylbMV07XHJcbiAgICAgICAgaWYgKHJhbmdlTnVtLnZhbEZpbmFsID09PSBudWxsIHx8IHJhbmdlTnVtLnZhbEZpbmFsID09PSB1bmRlZmluZWQpIHsgcmFuZ2VOdW0udmFsRmluYWwgPSByYW5nZU51bS5pbmlGaW5hbDsgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmFuZ2VOdW07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0elJhbmdlRGF0ZUZyb21RdWVyeVBhcmFtKHZhbHVlOiBzdHJpbmcsIHJhbmdlRGF0ZTogSUZpbHRlclJhbmdlRGF0ZSk6IElGaWx0ZXJSYW5nZURhdGUge1xyXG4gICAgICAgIHJhbmdlRGF0ZS52YWxJbml0aWFsID0gcmFuZ2VEYXRlLmluaUluaXRpYWw7XHJcbiAgICAgICAgcmFuZ2VEYXRlLnZhbEZpbmFsID0gcmFuZ2VEYXRlLmluaUZpbmFsO1xyXG5cclxuICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgeyByZXR1cm4gcmFuZ2VEYXRlOyB9XHJcblxyXG4gICAgICAgIHJhbmdlRGF0ZS52YWxJbml0aWFsID0gdGhpcy5xdWVyeVBhcmFtVG9EYXRlKHZhbHVlLnNwbGl0KCc7JylbMF0pO1xyXG4gICAgICAgIHJhbmdlRGF0ZS52YWxGaW5hbCA9IHRoaXMucXVlcnlQYXJhbVRvRGF0ZSh2YWx1ZS5zcGxpdCgnOycpWzFdKTtcclxuICAgICAgICBpZiAocmFuZ2VEYXRlLnZhbEZpbmFsID09PSBudWxsIHx8IHJhbmdlRGF0ZS52YWxGaW5hbCA9PT0gdW5kZWZpbmVkKSB7IHJhbmdlRGF0ZS52YWxGaW5hbCA9IHJhbmdlRGF0ZS5pbmlGaW5hbDsgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmFuZ2VEYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkYXRlVG9RdWVyeVBhcmFtKGRhdGU6IERhdGUpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IGlEYXkgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICBjb25zdCBpTW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIGNvbnN0IGlZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gYCR7aVllYXJ9LSR7dGhpcy5wYWQoaU1vbnRoKX0tJHt0aGlzLnBhZChpRGF5KX1gO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBxdWVyeVBhcmFtVG9EYXRlKHBhcmFtOiBzdHJpbmcpOiBEYXRlIHtcclxuICAgICAgICBjb25zdCBpRGF5ID0gK3BhcmFtLnNwbGl0KCctJylbMl07XHJcbiAgICAgICAgY29uc3QgaU1vbnRoID0gK3BhcmFtLnNwbGl0KCctJylbMV07XHJcbiAgICAgICAgY29uc3QgaVllYXIgPSArcGFyYW0uc3BsaXQoJy0nKVswXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGlZZWFyLCBpTW9udGggLSAxLCBpRGF5KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNWYWxpZERhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhanVzdERhdGUocGFyYW06IGFueSk6IERhdGUge1xyXG4gICAgICAgIGlmIChwYXJhbSBpbnN0YW5jZW9mIERhdGUpIHsgcmV0dXJuIHBhcmFtOyB9XHJcbiAgICAgICAgaWYgKCFwYXJhbSkgeyByZXR1cm4gcGFyYW07IH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlQYXJhbVRvRGF0ZShwYXJhbS5zcGxpdCgnVCcpWzBdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGFkKG51bWJlcikge1xyXG4gICAgICAgIGlmIChudW1iZXIgPCAxMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzAnICsgbnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==