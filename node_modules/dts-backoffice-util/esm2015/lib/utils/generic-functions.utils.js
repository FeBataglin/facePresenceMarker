/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
Versão: 1.003
Data Criação: 18/04/2019
*/
/**
 * @record
 */
export function ChartSeries() { }
if (false) {
    /** @type {?|undefined} */
    ChartSeries.prototype.name;
    /** @type {?|undefined} */
    ChartSeries.prototype.data;
}
/**
 * @record
 */
export function ChartValues() { }
if (false) {
    /** @type {?} */
    ChartValues.prototype.minValue;
    /** @type {?} */
    ChartValues.prototype.maxValue;
}
export class GenericFunctionsUtils {
    /**
     * @param {?} literals
     */
    constructor(literals) {
        this.literals = {};
        this.literals = literals;
    }
    /* Transforma uma Lista separada por "," em um Array */
    /**
     * @param {?} list
     * @return {?}
     */
    static listToArrayCharacter(list) {
        /** @type {?} */
        let returnArray = new Array();
        if (list && list !== '') {
            returnArray = list.split(',');
        }
        return returnArray;
    }
    /* Transforma um Array em uma Lista separada por ","  */
    /**
     * @param {?} array
     * @return {?}
     */
    static ArrayToListCharacter(array) {
        /** @type {?} */
        let list = '';
        if (array && array.length > 0) {
            list = array.join(',');
        }
        return list;
    }
    /**
     * @param {?} object
     * @return {?}
     */
    static isEmpty(object) {
        /** @type {?} */
        let isEmpty = true;
        for (const content in object) {
            if (object.hasOwnProperty(content)) {
                isEmpty = false;
            }
        }
        return isEmpty;
    }
    /**
     * @param {?} chartData
     * @return {?}
     */
    static getChartValues(chartData) {
        /** @type {?} */
        let chartValues;
        /** @type {?} */
        let maxValue;
        /** @type {?} */
        let minValue;
        maxValue = undefined;
        minValue = undefined;
        chartData.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (maxValue === undefined && minValue === undefined) {
                maxValue = item.data[0];
                minValue = item.data[0];
            }
            else {
                if (item.data < minValue) {
                    minValue = item.data[0];
                }
                if (item.data > maxValue) {
                    maxValue = item.data[0];
                }
            }
        }));
        if (maxValue > 0 && minValue > 0) {
            chartValues = { maxValue: maxValue, minValue: 0 };
        }
        if (maxValue > 0 && minValue < 0) {
            chartValues = { maxValue: maxValue, minValue: minValue };
        }
        if (maxValue < 0 && minValue < 0) {
            /** @type {?} */
            const max = (minValue / 3) * (-1);
            chartValues = { maxValue: max, minValue: minValue };
        }
        if (maxValue > 0 && minValue === 0) {
            chartValues = { maxValue: maxValue, minValue: 0 };
        }
        if (maxValue === 0 && minValue < 0) {
            /** @type {?} */
            const max = (minValue / 3) * (-1);
            chartValues = { maxValue: max, minValue: minValue };
        }
        if (maxValue === 0 && minValue === 0) {
            chartValues = { maxValue: undefined, minValue: undefined };
        }
        chartValues.maxValue = Math.round(chartValues.maxValue);
        chartValues.minValue = Math.round(chartValues.minValue);
        return chartValues;
    }
    /*Deixa no list apenas o itens que existem no options*/
    /**
     * @param {?} options
     * @param {?} list
     * @return {?}
     */
    static atzMultiSelectListByOptions(options, list) {
        /** @type {?} */
        let idx;
        /** @type {?} */
        let newList;
        if (!list) {
            return list;
        }
        newList = new Array();
        list.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (item) {
                idx = options.findIndex((/**
                 * @param {?} itemOptions
                 * @return {?}
                 */
                itemOptions => itemOptions.value === item));
                if (idx >= 0) {
                    newList.push(item);
                }
            }
        }));
        return newList;
    }
    /*Carrega o Options com os valores defaults passados como parâmetro (list)*/
    /**
     * @param {?} options
     * @param {?} list
     * @return {?}
     */
    loadOptionsMultiSelect(options, list) {
        /** @type {?} */
        let idx;
        if (!list) {
            return;
        }
        list.map((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            if (item) {
                idx = options.findIndex((/**
                 * @param {?} itemOptions
                 * @return {?}
                 */
                itemOptions => itemOptions.value === item));
                if (idx === -1) {
                    options.push({ label: item === 'all' ? this.literals['all'] : item, value: item });
                }
            }
        }));
    }
    /*Carrega o Options com os valores defaults passados como parâmetro (list)*/
    /**
     * @param {?} options
     * @param {?} selectValue
     * @param {?=} tradValue
     * @return {?}
     */
    loadOptionsSelect(options, selectValue, tradValue = false) {
        /** @type {?} */
        let idx;
        if (!selectValue) {
            return;
        }
        if (selectValue) {
            idx = options.findIndex((/**
             * @param {?} itemOptions
             * @return {?}
             */
            itemOptions => itemOptions.value === selectValue));
            if (idx === -1) {
                options.push({ label: tradValue ? this.literals[selectValue] : selectValue, value: selectValue });
            }
        }
    }
    /*Método que compara 2 objetos e retorna se são iguais ou diferentes*/
    /**
     * @param {?} firstObject
     * @param {?} secondObject
     * @return {?}
     */
    compareObjects(firstObject, secondObject) {
        if (!firstObject || !secondObject) {
            return false;
        }
        /*Pega a lista de nomes dos campos do objetos e compara*/
        if (Object.getOwnPropertyNames(firstObject).length !== Object.getOwnPropertyNames(secondObject).length) {
            return false;
        }
        for (const content in firstObject) {
            if (content.substr(0, 1) === '$' || content.substr(0, 1) === '_') {
                continue;
            }
            if (firstObject[content] !== secondObject[content]) {
                return false;
            }
        }
        return true;
    }
    /**
     * @param {?} charInd
     * @param {?} dateRef
     * @return {?}
     */
    referenceGeneration(charInd, dateRef) {
        /** @type {?} */
        let reference;
        /** @type {?} */
        let random;
        /** @type {?} */
        const iDay = dateRef.getDate();
        /** @type {?} */
        const iMonth = dateRef.getMonth() + 1;
        /** @type {?} */
        const iYear = dateRef.getFullYear();
        reference = `${this.pad(iYear)}${this.pad(iMonth)}${this.pad(iDay)}${charInd}`;
        random = btoa(`${(new Date()).getTime()}`);
        random = random.replace(/[=]/g, '');
        random = random.slice(random.length - 3, random.length);
        return `${reference}${random}`;
    }
    /**
     * @param {?} number
     * @return {?}
     */
    pad(number) {
        if (number < 10) {
            return '0' + number;
        }
        if (number > 99) {
            return (number + '').slice(2, 4);
        }
        return number;
    }
}
if (false) {
    /** @type {?} */
    GenericFunctionsUtils.prototype.literals;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJpYy1mdW5jdGlvbnMudXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9kdHMtYmFja29mZmljZS11dGlsLyIsInNvdXJjZXMiOlsibGliL3V0aWxzL2dlbmVyaWMtZnVuY3Rpb25zLnV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBT0EsaUNBR0M7OztJQUZLLDJCQUFjOztJQUNkLDJCQUFxQjs7Ozs7QUFFM0IsaUNBR0M7OztJQUZHLCtCQUFpQjs7SUFDakIsK0JBQWlCOztBQUdyQixNQUFNLE9BQU8scUJBQXFCOzs7O0lBSTlCLFlBQ0ksUUFBZ0I7UUFIcEIsYUFBUSxHQUFRLEVBQUUsQ0FBQztRQUtmLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzdCLENBQUM7Ozs7OztJQUdELE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFZOztZQUNoQyxXQUFXLEdBQUcsSUFBSSxLQUFLLEVBQVU7UUFFckMsSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUUsRUFBRTtZQUNyQixXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNqQztRQUVELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7Ozs7OztJQUdELE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxLQUFvQjs7WUFDeEMsSUFBSSxHQUFHLEVBQUU7UUFFYixJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUMzQixJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUMxQjtRQUVELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBRUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFjOztZQUNyQixPQUFPLEdBQUcsSUFBSTtRQUVsQixLQUFLLE1BQU0sT0FBTyxJQUFJLE1BQU0sRUFBRTtZQUMxQixJQUFJLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFD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YXRhIENyaWHDp8OjbzogMTgvMDQvMjAxOVxyXG4qL1xyXG5cclxuaW1wb3J0IHsgUG9NdWx0aXNlbGVjdE9wdGlvbiwgUG9TZWxlY3RPcHRpb24gfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXJ0U2VyaWVzIHtcclxuICAgICAgbmFtZT86IHN0cmluZztcclxuICAgICAgZGF0YT86IEFycmF5PG51bWJlcj47XHJcbn1cclxuZXhwb3J0IGludGVyZmFjZSBDaGFydFZhbHVlcyB7XHJcbiAgICBtaW5WYWx1ZTogbnVtYmVyO1xyXG4gICAgbWF4VmFsdWU6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdlbmVyaWNGdW5jdGlvbnNVdGlscyB7XHJcblxyXG4gICAgbGl0ZXJhbHM6IGFueSA9IHt9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGxpdGVyYWxzOiBPYmplY3RcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubGl0ZXJhbHMgPSBsaXRlcmFscztcclxuICAgIH1cclxuXHJcbiAgICAvKiBUcmFuc2Zvcm1hIHVtYSBMaXN0YSBzZXBhcmFkYSBwb3IgXCIsXCIgZW0gdW0gQXJyYXkgKi9cclxuICAgIHN0YXRpYyBsaXN0VG9BcnJheUNoYXJhY3RlcihsaXN0OiBzdHJpbmcpOiBBcnJheTxzdHJpbmc+IHtcclxuICAgICAgICBsZXQgcmV0dXJuQXJyYXkgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICBpZiAobGlzdCAmJiBsaXN0ICE9PSAnJykge1xyXG4gICAgICAgICAgICByZXR1cm5BcnJheSA9IGxpc3Quc3BsaXQoJywnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXR1cm5BcnJheTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBUcmFuc2Zvcm1hIHVtIEFycmF5IGVtIHVtYSBMaXN0YSBzZXBhcmFkYSBwb3IgXCIsXCIgICovXHJcbiAgICBzdGF0aWMgQXJyYXlUb0xpc3RDaGFyYWN0ZXIoYXJyYXk6IEFycmF5PHN0cmluZz4pOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBsaXN0ID0gJyc7XHJcblxyXG4gICAgICAgIGlmIChhcnJheSAmJiBhcnJheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxpc3QgPSBhcnJheS5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaXNFbXB0eShvYmplY3Q6IG9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBpc0VtcHR5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjb250ZW50IGluIG9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGNvbnRlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpc0VtcHR5O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRDaGFydFZhbHVlcyhjaGFydERhdGE6IEFycmF5PENoYXJ0U2VyaWVzPik6IENoYXJ0VmFsdWVzIHtcclxuXHJcbiAgICAgICAgbGV0IGNoYXJ0VmFsdWVzOiBDaGFydFZhbHVlcztcclxuXHJcbiAgICAgICAgbGV0IG1heFZhbHVlLFxyXG4gICAgICAgICAgICBtaW5WYWx1ZTtcclxuXHJcbiAgICAgICAgbWF4VmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbWluVmFsdWUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGNoYXJ0RGF0YS5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtYXhWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIG1pblZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG1heFZhbHVlID0gaXRlbS5kYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgbWluVmFsdWUgPSBpdGVtLmRhdGFbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5kYXRhIDwgbWluVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IGl0ZW0uZGF0YVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmRhdGEgPiBtYXhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heFZhbHVlID0gaXRlbS5kYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChtYXhWYWx1ZSA+IDAgJiYgbWluVmFsdWUgPiAwKSB7XHJcbiAgICAgICAgICAgIGNoYXJ0VmFsdWVzID0geyBtYXhWYWx1ZTogbWF4VmFsdWUsIG1pblZhbHVlOiAwIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWF4VmFsdWUgPiAwICYmIG1pblZhbHVlIDwgMCkge1xyXG4gICAgICAgICAgICBjaGFydFZhbHVlcyA9IHsgbWF4VmFsdWU6IG1heFZhbHVlLCBtaW5WYWx1ZTogbWluVmFsdWUgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtYXhWYWx1ZSA8IDAgJiYgbWluVmFsdWUgPCAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IChtaW5WYWx1ZSAvIDMpICogKC0gMSk7XHJcbiAgICAgICAgICAgIGNoYXJ0VmFsdWVzID0geyBtYXhWYWx1ZTogbWF4LCBtaW5WYWx1ZTogbWluVmFsdWUgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtYXhWYWx1ZSA+IDAgJiYgbWluVmFsdWUgPT09IDApIHtcclxuICAgICAgICAgICAgY2hhcnRWYWx1ZXMgPSB7IG1heFZhbHVlOiBtYXhWYWx1ZSwgbWluVmFsdWU6IDAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtYXhWYWx1ZSA9PT0gMCAmJiBtaW5WYWx1ZSA8IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbWF4ID0gKG1pblZhbHVlIC8gMykgKiAoLSAxKTtcclxuICAgICAgICAgICAgY2hhcnRWYWx1ZXMgPSB7IG1heFZhbHVlOiBtYXgsIG1pblZhbHVlOiBtaW5WYWx1ZSB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1heFZhbHVlID09PSAwICYmIG1pblZhbHVlID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNoYXJ0VmFsdWVzID0geyBtYXhWYWx1ZTogdW5kZWZpbmVkLCBtaW5WYWx1ZTogdW5kZWZpbmVkIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGFydFZhbHVlcy5tYXhWYWx1ZSA9IE1hdGgucm91bmQoY2hhcnRWYWx1ZXMubWF4VmFsdWUpO1xyXG4gICAgICAgIGNoYXJ0VmFsdWVzLm1pblZhbHVlID0gTWF0aC5yb3VuZChjaGFydFZhbHVlcy5taW5WYWx1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjaGFydFZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICAvKkRlaXhhIG5vIGxpc3QgYXBlbmFzIG8gaXRlbnMgcXVlIGV4aXN0ZW0gbm8gb3B0aW9ucyovXHJcbiAgICBzdGF0aWMgYXR6TXVsdGlTZWxlY3RMaXN0QnlPcHRpb25zKG9wdGlvbnM6IEFycmF5PFBvTXVsdGlzZWxlY3RPcHRpb24+LCBsaXN0OiBBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IGlkeDogbnVtYmVyO1xyXG4gICAgICAgIGxldCBuZXdMaXN0OiBBcnJheTxzdHJpbmc+O1xyXG5cclxuICAgICAgICBpZiAoIWxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXdMaXN0ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgbGlzdC5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZHggPSBvcHRpb25zLmZpbmRJbmRleChpdGVtT3B0aW9ucyA9PiBpdGVtT3B0aW9ucy52YWx1ZSA9PT0gaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld0xpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLypDYXJyZWdhIG8gT3B0aW9ucyBjb20gb3MgdmFsb3JlcyBkZWZhdWx0cyBwYXNzYWRvcyBjb21vIHBhcsOibWV0cm8gKGxpc3QpKi9cclxuICAgIHB1YmxpYyBsb2FkT3B0aW9uc011bHRpU2VsZWN0KG9wdGlvbnM6IEFycmF5PFBvTXVsdGlzZWxlY3RPcHRpb24+LCBsaXN0OiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGlkeDogbnVtYmVyO1xyXG5cclxuICAgICAgICBpZiAoIWxpc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGlzdC5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZHggPSBvcHRpb25zLmZpbmRJbmRleChpdGVtT3B0aW9ucyA9PiBpdGVtT3B0aW9ucy52YWx1ZSA9PT0gaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWR4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaCh7IGxhYmVsOiBpdGVtID09PSAnYWxsJyA/IHRoaXMubGl0ZXJhbHNbJ2FsbCddIDogaXRlbSwgdmFsdWU6IGl0ZW0gfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKkNhcnJlZ2EgbyBPcHRpb25zIGNvbSBvcyB2YWxvcmVzIGRlZmF1bHRzIHBhc3NhZG9zIGNvbW8gcGFyw6JtZXRybyAobGlzdCkqL1xyXG4gICAgcHVibGljIGxvYWRPcHRpb25zU2VsZWN0KG9wdGlvbnM6IEFycmF5PFBvU2VsZWN0T3B0aW9uPiwgc2VsZWN0VmFsdWU6IHN0cmluZywgdHJhZFZhbHVlID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICBsZXQgaWR4OiBudW1iZXI7XHJcblxyXG4gICAgICAgIGlmICghc2VsZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlkeCA9IG9wdGlvbnMuZmluZEluZGV4KGl0ZW1PcHRpb25zID0+IGl0ZW1PcHRpb25zLnZhbHVlID09PSBzZWxlY3RWYWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpZHggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goeyBsYWJlbDogdHJhZFZhbHVlID8gdGhpcy5saXRlcmFsc1tzZWxlY3RWYWx1ZV0gOiBzZWxlY3RWYWx1ZSwgdmFsdWU6IHNlbGVjdFZhbHVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qTcOpdG9kbyBxdWUgY29tcGFyYSAyIG9iamV0b3MgZSByZXRvcm5hIHNlIHPDo28gaWd1YWlzIG91IGRpZmVyZW50ZXMqL1xyXG4gICAgcHVibGljIGNvbXBhcmVPYmplY3RzKGZpcnN0T2JqZWN0OiBPYmplY3QsIHNlY29uZE9iamVjdDogT2JqZWN0KTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgIGlmICghZmlyc3RPYmplY3QgfHwgIXNlY29uZE9iamVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlBlZ2EgYSBsaXN0YSBkZSBub21lcyBkb3MgY2FtcG9zIGRvIG9iamV0b3MgZSBjb21wYXJhKi9cclxuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZmlyc3RPYmplY3QpLmxlbmd0aCAhPT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc2Vjb25kT2JqZWN0KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBjb250ZW50IGluIGZpcnN0T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN1YnN0cigwLCAxKSA9PT0gJyQnIHx8IGNvbnRlbnQuc3Vic3RyKDAsIDEpID09PSAnXycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlyc3RPYmplY3RbY29udGVudF0gIT09IHNlY29uZE9iamVjdFtjb250ZW50XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlZmVyZW5jZUdlbmVyYXRpb24oY2hhckluZDogc3RyaW5nLCBkYXRlUmVmOiBEYXRlKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcmVmZXJlbmNlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IHJhbmRvbTogc3RyaW5nO1xyXG5cclxuICAgICAgICBjb25zdCBpRGF5ID0gZGF0ZVJlZi5nZXREYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaU1vbnRoID0gZGF0ZVJlZi5nZXRNb250aCgpICsgMTtcclxuICAgICAgICBjb25zdCBpWWVhciA9IGRhdGVSZWYuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgICAgICAgcmVmZXJlbmNlID0gYCR7dGhpcy5wYWQoaVllYXIpfSR7dGhpcy5wYWQoaU1vbnRoKX0ke3RoaXMucGFkKGlEYXkpfSR7Y2hhckluZH1gO1xyXG5cclxuICAgICAgICByYW5kb20gPSBidG9hKGAkeyhuZXcgRGF0ZSgpKS5nZXRUaW1lKCl9YCk7XHJcbiAgICAgICAgcmFuZG9tID0gcmFuZG9tLnJlcGxhY2UoL1s9XS9nLCAnJyk7XHJcbiAgICAgICAgcmFuZG9tID0gcmFuZG9tLnNsaWNlKHJhbmRvbS5sZW5ndGggLSAzLCByYW5kb20ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGAke3JlZmVyZW5jZX0ke3JhbmRvbX1gO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwYWQobnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobnVtYmVyIDwgMTApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcwJyArIG51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51bWJlciA+IDk5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAobnVtYmVyICsgJycpLnNsaWNlKDIsIDQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==