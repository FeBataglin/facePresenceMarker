import { __decorate, __metadata } from "tslib";
import { Input, Directive } from '@angular/core';
import { PoPageJobSchedulerInternal } from './po-page-job-scheduler-internal';
import { PoPageJobSchedulerService } from './po-page-job-scheduler.service';
import { Subscription } from 'rxjs';
/**
 * @description
 *
 * O `po-page-job-scheduler` é uma página para criação e atualização de agendamentos da execução de processos (Job Scheduler),
 * como por exemplo: a geração da folha de pagamento dos funcionários.
 *
 * Para utilizar esta página, basta informar o serviço (endpoint) para consumo,
 * sem a necessidade de criar componentes e tratamentos dos dados.
 *
 * Veja mais sobre os padrões utilizados nas requisições no [Guia de implementação de APIs](guides/api).
 */
let PoPageJobSchedulerBaseComponent = class PoPageJobSchedulerBaseComponent {
    constructor(poPageJobSchedulerService) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        this._subscription = new Subscription();
        /** Objeto com as propriedades do breadcrumb. */
        this.breadcrumb = { items: [] };
        this.model = new PoPageJobSchedulerInternal();
    }
    ngOnDestroy() {
        this._subscription.unsubscribe();
    }
    loadData(id) {
        if (!id) {
            this.model = new PoPageJobSchedulerInternal();
            return;
        }
        this._subscription.add(this.poPageJobSchedulerService.getResource(id).subscribe((response) => {
            this.model = response;
        }, () => {
            this.model = new PoPageJobSchedulerInternal();
        }));
    }
    markAsDirtyInvalidControls(controls) {
        for (const key in controls) {
            if (controls.hasOwnProperty(key)) {
                const control = controls[key];
                if (control.invalid) {
                    control.markAsDirty();
                }
            }
        }
    }
};
PoPageJobSchedulerBaseComponent.ctorParameters = () => [
    { type: PoPageJobSchedulerService }
];
__decorate([
    Input('p-breadcrumb'),
    __metadata("design:type", Object)
], PoPageJobSchedulerBaseComponent.prototype, "breadcrumb", void 0);
__decorate([
    Input('p-service-api'),
    __metadata("design:type", String)
], PoPageJobSchedulerBaseComponent.prototype, "serviceApi", void 0);
__decorate([
    Input('p-title'),
    __metadata("design:type", String)
], PoPageJobSchedulerBaseComponent.prototype, "title", void 0);
PoPageJobSchedulerBaseComponent = __decorate([
    Directive(),
    __metadata("design:paramtypes", [PoPageJobSchedulerService])
], PoPageJobSchedulerBaseComponent);
export { PoPageJobSchedulerBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvLXVpL25nLXRlbXBsYXRlcy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLXBhZ2Utam9iLXNjaGVkdWxlci9wby1wYWdlLWpvYi1zY2hlZHVsZXItYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBSzVELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFcEM7Ozs7Ozs7Ozs7R0FVRztBQUVILElBQWEsK0JBQStCLEdBQTVDLE1BQWEsK0JBQStCO0lBNkkxQyxZQUFzQix5QkFBb0Q7UUFBcEQsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUEyQjtRQTVJbEUsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTNDLGdEQUFnRDtRQUN6QixlQUFVLEdBQWtCLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBdUlqRSxVQUFLLEdBQTJCLElBQUksMEJBQTBCLEVBQUUsQ0FBQztJQUVZLENBQUM7SUFFOUUsV0FBVztRQUNULElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVTLFFBQVEsQ0FBQyxFQUFtQjtRQUNwQyxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ1AsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLDBCQUEwQixFQUFFLENBQUM7WUFDOUMsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQ3BCLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUN0RCxDQUFDLFFBQWdDLEVBQUUsRUFBRTtZQUNuQyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztRQUN4QixDQUFDLEVBQ0QsR0FBRyxFQUFFO1lBQ0gsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLDBCQUEwQixFQUFFLENBQUM7UUFDaEQsQ0FBQyxDQUNGLENBQ0YsQ0FBQztJQUNKLENBQUM7SUFFUywwQkFBMEIsQ0FBQyxRQUE0QztRQUMvRSxLQUFLLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUMxQixJQUFJLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2hDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFOUIsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFO29CQUNuQixPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7aUJBQ3ZCO2FBQ0Y7U0FDRjtJQUNILENBQUM7Q0FDRixDQUFBOztZQW5Da0QseUJBQXlCOztBQXpJbkQ7SUFBdEIsS0FBSyxDQUFDLGNBQWMsQ0FBQzs7bUVBQTJDO0FBa0l6QztJQUF2QixLQUFLLENBQUMsZUFBZSxDQUFDOzttRUFBb0I7QUFHekI7SUFBakIsS0FBSyxDQUFDLFNBQVMsQ0FBQzs7OERBQWU7QUF6SXJCLCtCQUErQjtJQUQzQyxTQUFTLEVBQUU7cUNBOEl1Qyx5QkFBeUI7R0E3SS9ELCtCQUErQixDQWdMM0M7U0FoTFksK0JBQStCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSW5wdXQsIERpcmVjdGl2ZSwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvQnJlYWRjcnVtYiB9IGZyb20gJ0Bwby11aS9uZy1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1qb2Itc2NoZWR1bGVyLWludGVybmFsLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BhZ2VKb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4vcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWludGVybmFsJztcbmltcG9ydCB7IFBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UgfSBmcm9tICcuL3BvLXBhZ2Utam9iLXNjaGVkdWxlci5zZXJ2aWNlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gYHBvLXBhZ2Utam9iLXNjaGVkdWxlcmAgw6kgdW1hIHDDoWdpbmEgcGFyYSBjcmlhw6fDo28gZSBhdHVhbGl6YcOnw6NvIGRlIGFnZW5kYW1lbnRvcyBkYSBleGVjdcOnw6NvIGRlIHByb2Nlc3NvcyAoSm9iIFNjaGVkdWxlciksXG4gKiBjb21vIHBvciBleGVtcGxvOiBhIGdlcmHDp8OjbyBkYSBmb2xoYSBkZSBwYWdhbWVudG8gZG9zIGZ1bmNpb27DoXJpb3MuXG4gKlxuICogUGFyYSB1dGlsaXphciBlc3RhIHDDoWdpbmEsIGJhc3RhIGluZm9ybWFyIG8gc2VydmnDp28gKGVuZHBvaW50KSBwYXJhIGNvbnN1bW8sXG4gKiBzZW0gYSBuZWNlc3NpZGFkZSBkZSBjcmlhciBjb21wb25lbnRlcyBlIHRyYXRhbWVudG9zIGRvcyBkYWRvcy5cbiAqXG4gKiBWZWphIG1haXMgc29icmUgb3MgcGFkcsO1ZXMgdXRpbGl6YWRvcyBuYXMgcmVxdWlzacOnw7VlcyBubyBbR3VpYSBkZSBpbXBsZW1lbnRhw6fDo28gZGUgQVBJc10oZ3VpZGVzL2FwaSkuXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGNsYXNzIFBvUGFnZUpvYlNjaGVkdWxlckJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBwcml2YXRlIF9zdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG5cbiAgLyoqIE9iamV0byBjb20gYXMgcHJvcHJpZWRhZGVzIGRvIGJyZWFkY3J1bWIuICovXG4gIEBJbnB1dCgncC1icmVhZGNydW1iJykgYnJlYWRjcnVtYj86IFBvQnJlYWRjcnVtYiA9IHsgaXRlbXM6IFtdIH07XG5cbiAgLyoqXG4gICAqIEVuZHBvaW50IHVzYWRvIHBlbG8gY29tcG9uZW50ZSBwYXJhIGJ1c2NhIGRvcyBwcm9jZXNzb3MgZSBwYXLDom1ldHJvcyBxdWUgc2Vyw6NvIHV0aWxpemFkb3MgcGFyYSBjcmlhw6fDo28gZSBlZGnDp8OjbyBkb3MgYWdlbmRhbWVudG9zLlxuICAgKlxuICAgKiAjIyMjIFByb2Nlc3Nvc1xuICAgKlxuICAgKiBPcyBwcm9jZXNzb3Mgc8OjbyBhcyB0YXJlZmFzIHF1ZSBlc3RhcsOjbyBkaXNwb27DrXZlaXMgcGFyYSBvIHVzdcOhcmlvIHBvZGVyIGZhemVyIG9zIGFnZW5kYW1lbnRvcy5cbiAgICogQW8gaW5pY2lhbGl6YXIgbyBjb21wb25lbnRlLCBzZXLDoSBmZWl0byB1bWEgcmVxdWlzacOnw6NvIGBHRVRgIHBhcmEgbyBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgLCBwYXJhIGJ1c2NhclxuICAgKiBlc3NhIGxpc3RhIGRlIHByb2Nlc3Nvcy5cbiAgICpcbiAgICogRXN0ZSBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgIGRldmUgcmV0b3JuYXIgdW1hIGxpc3RhIGRlIG9iamV0b3MgcXVlIHNlZ3VlbSBhIGRlZmluacOnw6NvIGRlIGRhZG9zIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc1xuICAgKiBgYGBcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBpdGVtczogW1xuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImFjNGZcIiwgXCJkZXNjcmlwdGlvblwiOiBcIkdlcmFyIGZvbGhhIGRlIHBhZ2FtZW50b1wiIH0sXG4gICAqICAgICB7IFwicHJvY2Vzc0lEXCI6IFwiZGY2bFwiLCBcImRlc2NyaXB0aW9uXCI6IFwiUmVsYXTDs3JpbyBkZSBpbXBvc3RvIGEgcmVjb2xoZXJcIiB9LFxuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImRrM3BcIiwgXCJkZXNjcmlwdGlvblwiOiBcIlTDrXR1bG9zIGVtIGFiZXJ0b1wiIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBEZXN0YSBmb3JtYSBzZXLDoSByZW5kZXJpemFkbyB1bSBjb21wb25lbnRlIHBhcmEgc2VsZWNpb25hciBvIHByb2Nlc3NvIGUvb3UgZmlsdHLDoS1sb3MuXG4gICAqXG4gICAqIFBhcmEgcmVhbGl6YXIgbyBmaWx0cm8gZGUgYnVzY2EgZG8gcHJvY2Vzc28sIHNlcsOhIGZlaXRhIHVtYSByZXF1aXNpw6fDo28gZW52aWFuZG8gbyBjb250ZcO6ZG8gZGlnaXRhZG8gbmEgYnVzY2EgYXRyYXbDqXMgZG9cbiAgICogcGFyw6JtZXRybyBgc2VhcmNoYC4gRGEgc2VndWludGUgZm9ybWE6XG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXM/c2VhcmNoPXJlbGF0b3Jpb1xuICAgKiBgYGBcbiAgICpcbiAgICogPiBWZWphIG1haXMgc29icmUgcGFnaW5hw6fDo28gZSBmaWx0cm9zIG5vIFtHdWlhIGRlIGltcGxlbWVudGHDp8OjbyBkZSBBUElzXShndWlkZXMvYXBpKS5cbiAgICpcbiAgICogVGFtYsOpbSDDqSBwb3Nzw612ZWwgZmF6ZXIgdW0gYWdlbmRhbWVudG8gZGUgdW0gcHJvY2Vzc28gZXNwZWPDrWZpY28sIHNlbSBxdWUgc2VqYSBuZWNlc3PDoXJpbyB1bSBlbmRwb2ludCBwYXJhIGJ1c2NhIGRlc3Nlc1xuICAgKiBwcm9jZXNzb3MuIEVudMOjbywgY2FzbyBvIGVuZHBvaW50IGB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc2AgbsOjbyBzZWphIHbDoWxpZG8sIHNlcsOhIGFwcmVzZW50YWRvIHVtIGNhbXBvIGRlIGVudHJhZGEgZGVcbiAgICogdGV4dG8gcGFyYSBvIHVzdcOhcmlvIGluZm9ybWFyIGRpcmV0YW1lbnRlXG4gICAqIG8gKippZGVudGlmaWNhZG9yIGRvIHByb2Nlc3NvIC0gYHByb2Nlc3NJRGAqKiBlIGFvIHNhbHZhciBzZXLDoSBlbnZpYWRvIHVtIGBQT1NUYCBwYXJhIG8gZW5kcG9pbnQgZGlmaW5pZG8gYHNlcnZpY2VBcGlgIGNvbmZvcm1lIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIFBPU1Qge3NlcnZpY2UtYXBpfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJkYWlseVwiOiB7IFwiaG91clwiOiAxMCwgXCJtaW51dGVcIjogMTIgfSxcbiAgICogICBcImZpcnN0RXhlY3V0aW9uXCI6IFwiMjAxOC0xMi0wN1QwMDowMDowMS0wMDowMFwiLFxuICAgKiAgIFwicmVjdXJyZW50XCI6IHRydWUsXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIlxuICAgKiAgIC4uLlxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBDYXNvIHNlamEgbmVjZXNzw6FyaW8gaW5mb3JtYXIgcGFyw6JtZXRyb3MgZSBhZGljaW9uYXIgY29uZmlndXJhw6fDtWVzIG5vIHByb2Nlc3NvIHNlbGVjaW9uYWRvLCBzZXLDoSByZWFsaXphZG8gdW0gYEdFVGBcbiAgICogY29tbyBleGVtcGxpZmljYWRvIGFiYWl4by4gT3MgcGFyw6JtZXRyb3MgZGV2ZW0gcmV0b3JuYXIgdW1hIGxpc3RhIGRlIG9iamV0b3MgcXVlIHNlZ3VlbSBhIGludGVyZmFjZVxuICAgKiBbUG9EeW5hbWljRm9ybUZpZWxkXSgvZG9jdW1lbnRhdGlvbi9wby1keW5hbWljLWZvcm0pLlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzLzppZC9wYXJhbWV0ZXJzXG4gICAqIC4uLlxuICAgKiB7XG4gICAqICAgaXRlbXM6IFtcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcInZlbmNpbWVudG9cIiwgdHlwZTogXCJkYXRlXCIgfSxcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcImltcG9zdG8tcmV0aWRvXCIsIFwibGFiZWxcIjogXCJJbXBvc3RvIFJldGlkb1wiLCB0eXBlOiBcImJvb2xlYW5cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIFNhbHZhciBlIEF0dWFsaXphclxuICAgKlxuICAgKiBQYXJhIHNhbHZhciBvIGFnZW5kYW1lbnRvLCBzZXLDoSBmZWl0YSB1bWEgcmVxdWlzacOnw6NvIGRlIGNyaWHDp8OjbywgcGFzc2FuZG8gb3MgdmFsb3JlcyBwcmVlbmNoaWRvcyBwZWxvIHVzdcOhcmlvIHZpYSAqcGF5bG9hZCouXG4gICAqIEFiYWl4byB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBkaXNwYXJhZGEsIG9uZGUgYXMgcHJvcHJpZWRhZGVzIGRvICpKb2IgU2NoZWR1bGVyKiBmb3JhbSBwcmVlbmNoaWRhczpcbiAgICpcbiAgICogYGBgXG4gICAqICBQT1NUIHtzZXJ2aWNlLWFwaX1cbiAgICogYGBgXG4gICAqXG4gICAqICpSZXF1ZXN0IHBheWxvYWQqIC0gZXN0cnV0dXJhIGRlIGRhZG9zIGVudmlhZGEgbm8gY29ycG8gZGEgcmVxdWlzacOnw6NvIGNvbmZvcm1lIGludGVyZmFjZSBgUG9Kb2JTY2hlZHVsZXJgOlxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAxMiB9LFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQ2FzbyBxdWVpcmEgcXVlIG8gY29tcG9uZW50ZSBjYXJyZWd1ZSB1bSBhZ2VuZGFtZW50byBqw6EgZXhpc3RlbnRlLCBkZXZlIHNlciBpbmNsdcOtZG8gdW0gcGFyw6JtZXRybyBuYSByb3RhIGNoYW1hZG8gYGlkYC5cbiAgICpcbiAgICogRXhlbXBsbyBkZSBjb25maWd1cmHDp8OjbyBkZSByb3RhOlxuICAgKlxuICAgKiBgYGBcbiAgICogIFJvdXRlck1vZHVsZS5mb3JSb290KFtcbiAgICogICAgLi4uXG4gICAqICAgIHsgcGF0aDogJ2VkaXQvOmlkJywgY29tcG9uZW50OiBFeGFtcGxlSm9iU2NoZWR1bGVyQ29tcG9uZW50IH0sXG4gICAqICAgIC4uLlxuICAgKiAgXSxcbiAgICogYGBgXG4gICAqXG4gICAqIEJhc2VhZG8gbmlzc28sIG5hIGluaWNpYWxpemHDp8OjbyBkbyB0ZW1wbGF0ZSBzZXLDoSBkaXNwYXJhZG8gdW1hIHJlcXVpc2nDp8OjbyBwYXJhIGJ1c2NhciBvIHJlY3Vyc28gcXVlIHNlcsOhIGVkaXRhZG8uXG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS97aWR9XG4gICAqIGBgYFxuICAgKlxuICAgKiBBbyBhdHVhbGl6YXIgbyBhZ2VuZGFtZW50bywgc2Vyw6EgZGlzcGFyYWRvIHVtIGBQVVRgIGNvbSBvcyBkYWRvcyBwcmVlbmNoaWRvcy5cbiAgICogVmVqYSBhYmFpeG8gdW1hIHJlcXVpc2nDp8OjbyBgUFVUYCBkaXNwYXJhZGEsIG9uZGUgYSBwcm9wcmllZGFkZSAqcmVjdXJyZW50KiBlICpkYWlseSogZm9yYW0gYXR1YWxpemFkYXM6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgUFVUIHtzZXJ2aWNlLWFwaX0ve2lkfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJmaXJzdEV4ZWN1dGlvblwiOiBcIjIwMTgtMTItMDdUMDA6MDA6MDEtMDA6MDBcIixcbiAgICogICBcInJlY3VycmVudFwiOiBmYWxzZSxcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDExLCBcIm1pbnV0ZVwiOiAzMCB9LFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIEBJbnB1dCgncC1zZXJ2aWNlLWFwaScpIHNlcnZpY2VBcGk6IHN0cmluZztcblxuICAvKiogVMOtdHVsbyBkYSBww6FnaW5hLiAqL1xuICBASW5wdXQoJ3AtdGl0bGUnKSB0aXRsZTogc3RyaW5nO1xuXG4gIG1vZGVsOiBQb0pvYlNjaGVkdWxlckludGVybmFsID0gbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2U6IFBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UpIHt9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbG9hZERhdGEoaWQ6IHN0cmluZyB8IG51bWJlcikge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRoaXMubW9kZWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zdWJzY3JpcHRpb24uYWRkKFxuICAgICAgdGhpcy5wb1BhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlLmdldFJlc291cmNlKGlkKS5zdWJzY3JpYmUoXG4gICAgICAgIChyZXNwb25zZTogUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCkgPT4ge1xuICAgICAgICAgIHRoaXMubW9kZWwgPSByZXNwb25zZTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIHRoaXMubW9kZWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWFya0FzRGlydHlJbnZhbGlkQ29udHJvbHMoY29udHJvbHM6IHsgW2tleTogc3RyaW5nXTogQWJzdHJhY3RDb250cm9sIH0pIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb250cm9scykge1xuICAgICAgaWYgKGNvbnRyb2xzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgY29uc3QgY29udHJvbCA9IGNvbnRyb2xzW2tleV07XG5cbiAgICAgICAgaWYgKGNvbnRyb2wuaW52YWxpZCkge1xuICAgICAgICAgIGNvbnRyb2wubWFya0FzRGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19