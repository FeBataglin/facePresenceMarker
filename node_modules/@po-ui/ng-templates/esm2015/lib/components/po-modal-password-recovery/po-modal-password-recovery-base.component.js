import { __decorate, __metadata } from "tslib";
import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { browserLanguage, poLocaleDefault } from '../../utils/util';
import { poModalPasswordRecoveryLiterals } from './literals/i18n/po-modal-password-recovery-literals';
import { PoModalPasswordRecoveryType } from './enums/po-modal-password-recovery-type.enum';
const PoModalPasswordRecoveryDefaultMaxLength = 15;
const PoModalPasswordRecoveryDefaultMinLength = 15;
const PoModalPasswordRecoveryDefaultPhone = '(99) 99999-9999';
const PoModalPasswordRecoveryTypeDefault = PoModalPasswordRecoveryType.Email;
/**
 * @description
 *
 * O componente `po-modal-password-recovery` é utilizado como template para solicitação de troca de senha.
 *
 * É composto por uma modal que possui três telas, cada uma com as seguintes características:
 *
 * - A primeira possui campos para preenchimento de email ou número de telefone;
 * - Tela com campo para preenchimento de código SMS enviado para o número de telefone enviado;
 * - A terceira se trata de uma confirmação de envio de link para a caixa de email do usuário.
 *
 *
 * A propriedade `p-url-recovery` automatiza a rotina do componente e simplifica o processo
 * para recuperação de senha, bastando definir uma url para requisição dos recursos.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 *
 * Para a modal de digitação de código SMS, é possível definir uma mensagem de erro
 * customizada com a propriedade `p-code-error` e há um link para
 * reenvio de código por SMS. Ao reenviar, o evento `p-code-submit` envia um objeto com o telefone do usuário e a quantidade
 * de vezes em que o usuário fez a solicitação de reenvio.
 *
 * > É indicada a utilização da tela de digitação para envio de código SMS apenas
 * se a opção por envio SMS for disponibilizada para o usuário.
 *
 *
 * A modal de confirmação contém uma ação de reenvio e o evento `p-submit`
 * é quem passa o objeto contendo o email em conjunto com a quantidade de tentativas de reenvio.
 *
 * > A tela de confirmação é indicada para quando o usuário solicitar a troca através do email.
 *
 * > Os textos das modals são pré-definidos, imutáveis e são traduzidos de acordo com o idioma do *browser* (pt, en e es)
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/@po-ui/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 */
let PoModalPasswordRecoveryBaseComponent = class PoModalPasswordRecoveryBaseComponent {
    constructor() {
        this._phoneMask = PoModalPasswordRecoveryDefaultPhone;
        this._type = PoModalPasswordRecoveryTypeDefault;
        this.maxLength = PoModalPasswordRecoveryDefaultMaxLength;
        this.minLength = PoModalPasswordRecoveryDefaultMinLength;
        this.literals = Object.assign(Object.assign({}, poModalPasswordRecoveryLiterals[poLocaleDefault]), poModalPasswordRecoveryLiterals[browserLanguage()]);
        /**
         * @optional
         *
         * @description
         *
         * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.codeSubmit = new EventEmitter();
        /**
         * @optional
         *
         * @description
         *
         * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição do e-mail que é exibido na mensagem para contato de suporte.
     */
    set contactEmail(value) {
        this._contactEmail = value;
        this.smsCodeErrorMessage = this.concatenateSMSErrorMessage(value);
    }
    get contactEmail() {
        return this._contactEmail;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição da mascara do campo de telefone.
     *
     * @default `(99) 99999-9999`
     */
    set phoneMask(value) {
        this._phoneMask = value || PoModalPasswordRecoveryDefaultPhone;
        this.minLength = this.maxLength = this._phoneMask.length;
    }
    get phoneMask() {
        return this._phoneMask;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o tipo de recuperação de senha que será exibido.
     *
     * @default `PoModalPasswordRecoveryType.Email`
     *
     */
    set type(value) {
        this._type = Object.values(PoModalPasswordRecoveryType).includes(value)
            ? value
            : PoModalPasswordRecoveryTypeDefault;
    }
    get type() {
        return this._type;
    }
    concatenateSMSErrorMessage(value) {
        const literalCodeErrorMessage = this.literals.smsCodeErrorMessagePhrase;
        return value && value !== ''
            ? `${literalCodeErrorMessage} ${this.literals.prepositionIn} ${value}.`
            : literalCodeErrorMessage;
    }
};
__decorate([
    Input('p-contact-email'),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], PoModalPasswordRecoveryBaseComponent.prototype, "contactEmail", null);
__decorate([
    Input('p-code-error'),
    __metadata("design:type", String)
], PoModalPasswordRecoveryBaseComponent.prototype, "codeError", void 0);
__decorate([
    Input('p-phone-mask'),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], PoModalPasswordRecoveryBaseComponent.prototype, "phoneMask", null);
__decorate([
    Input('p-type'),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], PoModalPasswordRecoveryBaseComponent.prototype, "type", null);
__decorate([
    Input('p-url-recovery'),
    __metadata("design:type", String)
], PoModalPasswordRecoveryBaseComponent.prototype, "urlRecovery", void 0);
__decorate([
    Output('p-code-submit'),
    __metadata("design:type", Object)
], PoModalPasswordRecoveryBaseComponent.prototype, "codeSubmit", void 0);
__decorate([
    Output('p-submit'),
    __metadata("design:type", Object)
], PoModalPasswordRecoveryBaseComponent.prototype, "submit", void 0);
PoModalPasswordRecoveryBaseComponent = __decorate([
    Directive()
], PoModalPasswordRecoveryBaseComponent);
export { PoModalPasswordRecoveryBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG8tdWkvbmctdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUVwRSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztBQUN0RyxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUUzRixNQUFNLHVDQUF1QyxHQUFHLEVBQUUsQ0FBQztBQUNuRCxNQUFNLHVDQUF1QyxHQUFHLEVBQUUsQ0FBQztBQUNuRCxNQUFNLG1DQUFtQyxHQUFHLGlCQUFpQixDQUFDO0FBQzlELE1BQU0sa0NBQWtDLEdBQWdDLDJCQUEyQixDQUFDLEtBQUssQ0FBQztBQUUxRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0ErQ0c7QUFFSCxJQUFzQixvQ0FBb0MsR0FBMUQsTUFBc0Isb0NBQW9DO0lBQTFEO1FBRVUsZUFBVSxHQUFHLG1DQUFtQyxDQUFDO1FBQ2pELFVBQUssR0FBZ0Msa0NBQWtDLENBQUM7UUFHaEYsY0FBUyxHQUFHLHVDQUF1QyxDQUFDO1FBQ3BELGNBQVMsR0FBRyx1Q0FBdUMsQ0FBQztRQU1wRCxhQUFRLG1DQTZCSCwrQkFBK0IsQ0FBQyxlQUFlLENBQUMsR0FDaEQsK0JBQStCLENBQUMsZUFBZSxFQUFFLENBQUMsRUFDckQ7UUE4S0Y7Ozs7Ozs7O1dBUUc7UUFDc0IsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFOUQ7Ozs7Ozs7O1dBUUc7UUFDaUIsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7SUFnQ3ZELENBQUM7SUFoT0M7Ozs7OztPQU1HO0lBQ3VCLElBQUksWUFBWSxDQUFDLEtBQWE7UUFDdEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFFM0IsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFXRDs7Ozs7Ozs7T0FRRztJQUNvQixJQUFJLFNBQVMsQ0FBQyxLQUFhO1FBQ2hELElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxJQUFJLG1DQUFtQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztJQUMzRCxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDYyxJQUFJLElBQUksQ0FBQyxLQUFrQztRQUMxRCxJQUFJLENBQUMsS0FBSyxHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQzVFLENBQUMsQ0FBQyxLQUFLO1lBQ1AsQ0FBQyxDQUFDLGtDQUFrQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQTJKTywwQkFBMEIsQ0FBQyxLQUFhO1FBQzlDLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQztRQUV4RSxPQUFPLEtBQUssSUFBSSxLQUFLLEtBQUssRUFBRTtZQUMxQixDQUFDLENBQUMsR0FBRyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsSUFBSSxLQUFLLEdBQUc7WUFDdkUsQ0FBQyxDQUFDLHVCQUF1QixDQUFDO0lBQzlCLENBQUM7Q0FDRixDQUFBO0FBek4yQjtJQUF6QixLQUFLLENBQUMsaUJBQWlCLENBQUM7Ozt3RUFJeEI7QUFhc0I7SUFBdEIsS0FBSyxDQUFDLGNBQWMsQ0FBQzs7dUVBQW1CO0FBV2xCO0lBQXRCLEtBQUssQ0FBQyxjQUFjLENBQUM7OztxRUFHckI7QUFnQmdCO0lBQWhCLEtBQUssQ0FBQyxRQUFRLENBQUM7OztnRUFJZjtBQWdId0I7SUFBeEIsS0FBSyxDQUFDLGdCQUFnQixDQUFDOzt5RUFBc0I7QUFXckI7SUFBeEIsTUFBTSxDQUFDLGVBQWUsQ0FBQzs7d0VBQXNDO0FBVzFDO0lBQW5CLE1BQU0sQ0FBQyxVQUFVLENBQUM7O29FQUFrQztBQTlPakMsb0NBQW9DO0lBRHpELFNBQVMsRUFBRTtHQUNVLG9DQUFvQyxDQThRekQ7U0E5UXFCLG9DQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IGJyb3dzZXJMYW5ndWFnZSwgcG9Mb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IHBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TGl0ZXJhbHMgfSBmcm9tICcuL2xpdGVyYWxzL2kxOG4vcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktbGl0ZXJhbHMnO1xuaW1wb3J0IHsgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS10eXBlLmVudW0nO1xuXG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRNYXhMZW5ndGggPSAxNTtcbmNvbnN0IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1pbkxlbmd0aCA9IDE1O1xuY29uc3QgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0UGhvbmUgPSAnKDk5KSA5OTk5OS05OTk5JztcbmNvbnN0IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZURlZmF1bHQ6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbDtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBPIGNvbXBvbmVudGUgYHBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5YCDDqSB1dGlsaXphZG8gY29tbyB0ZW1wbGF0ZSBwYXJhIHNvbGljaXRhw6fDo28gZGUgdHJvY2EgZGUgc2VuaGEuXG4gKlxuICogw4kgY29tcG9zdG8gcG9yIHVtYSBtb2RhbCBxdWUgcG9zc3VpIHRyw6pzIHRlbGFzLCBjYWRhIHVtYSBjb20gYXMgc2VndWludGVzIGNhcmFjdGVyw61zdGljYXM6XG4gKlxuICogLSBBIHByaW1laXJhIHBvc3N1aSBjYW1wb3MgcGFyYSBwcmVlbmNoaW1lbnRvIGRlIGVtYWlsIG91IG7Dum1lcm8gZGUgdGVsZWZvbmU7XG4gKiAtIFRlbGEgY29tIGNhbXBvIHBhcmEgcHJlZW5jaGltZW50byBkZSBjw7NkaWdvIFNNUyBlbnZpYWRvIHBhcmEgbyBuw7ptZXJvIGRlIHRlbGVmb25lIGVudmlhZG87XG4gKiAtIEEgdGVyY2VpcmEgc2UgdHJhdGEgZGUgdW1hIGNvbmZpcm1hw6fDo28gZGUgZW52aW8gZGUgbGluayBwYXJhIGEgY2FpeGEgZGUgZW1haWwgZG8gdXN1w6FyaW8uXG4gKlxuICpcbiAqIEEgcHJvcHJpZWRhZGUgYHAtdXJsLXJlY292ZXJ5YCBhdXRvbWF0aXphIGEgcm90aW5hIGRvIGNvbXBvbmVudGUgZSBzaW1wbGlmaWNhIG8gcHJvY2Vzc29cbiAqIHBhcmEgcmVjdXBlcmHDp8OjbyBkZSBzZW5oYSwgYmFzdGFuZG8gZGVmaW5pciB1bWEgdXJsIHBhcmEgcmVxdWlzacOnw6NvIGRvcyByZWN1cnNvcy5cbiAqIFNldSBkZXRhbGhhbWVudG8gcGFyYSB1c28gcG9kZSBzZXIgdmlzdG8gbG9nbyBhYmFpeG8gZW0gKnByb3ByaWVkYWRlcyouXG4gKiBDYXNvIGp1bGd1ZSBuZWNlc3PDoXJpbywgcG9kZS1zZSB0YW1iw6ltIGRlZmluaXIgbWFudWFsbWVudGUgYSByb3RpbmEgZG8gY29tcG9uZW50ZS5cbiAqXG4gKlxuICogUGFyYSBhIG1vZGFsIGRlIGRpZ2l0YcOnw6NvIGRlIGPDs2RpZ28gU01TLCDDqSBwb3Nzw612ZWwgZGVmaW5pciB1bWEgbWVuc2FnZW0gZGUgZXJyb1xuICogY3VzdG9taXphZGEgY29tIGEgcHJvcHJpZWRhZGUgYHAtY29kZS1lcnJvcmAgZSBow6EgdW0gbGluayBwYXJhXG4gKiByZWVudmlvIGRlIGPDs2RpZ28gcG9yIFNNUy4gQW8gcmVlbnZpYXIsIG8gZXZlbnRvIGBwLWNvZGUtc3VibWl0YCBlbnZpYSB1bSBvYmpldG8gY29tIG8gdGVsZWZvbmUgZG8gdXN1w6FyaW8gZSBhIHF1YW50aWRhZGVcbiAqIGRlIHZlemVzIGVtIHF1ZSBvIHVzdcOhcmlvIGZleiBhIHNvbGljaXRhw6fDo28gZGUgcmVlbnZpby5cbiAqXG4gKiA+IMOJIGluZGljYWRhIGEgdXRpbGl6YcOnw6NvIGRhIHRlbGEgZGUgZGlnaXRhw6fDo28gcGFyYSBlbnZpbyBkZSBjw7NkaWdvIFNNUyBhcGVuYXNcbiAqIHNlIGEgb3DDp8OjbyBwb3IgZW52aW8gU01TIGZvciBkaXNwb25pYmlsaXphZGEgcGFyYSBvIHVzdcOhcmlvLlxuICpcbiAqXG4gKiBBIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gY29udMOpbSB1bWEgYcOnw6NvIGRlIHJlZW52aW8gZSBvIGV2ZW50byBgcC1zdWJtaXRgXG4gKiDDqSBxdWVtIHBhc3NhIG8gb2JqZXRvIGNvbnRlbmRvIG8gZW1haWwgZW0gY29uanVudG8gY29tIGEgcXVhbnRpZGFkZSBkZSB0ZW50YXRpdmFzIGRlIHJlZW52aW8uXG4gKlxuICogPiBBIHRlbGEgZGUgY29uZmlybWHDp8OjbyDDqSBpbmRpY2FkYSBwYXJhIHF1YW5kbyBvIHVzdcOhcmlvIHNvbGljaXRhciBhIHRyb2NhIGF0cmF2w6lzIGRvIGVtYWlsLlxuICpcbiAqID4gT3MgdGV4dG9zIGRhcyBtb2RhbHMgc8OjbyBwcsOpLWRlZmluaWRvcywgaW11dMOhdmVpcyBlIHPDo28gdHJhZHV6aWRvcyBkZSBhY29yZG8gY29tIG8gaWRpb21hIGRvICpicm93c2VyKiAocHQsIGVuIGUgZXMpXG4gKlxuICogUGFyYSBxdWUgYXMgaW1hZ2VucyBzZWphbSBleGliaWRhcyBjb3JyZXRhbWVudGUsIMOpIG5lY2Vzc8OhcmlvIGluY2x1aXIgbyBjYW1pbmhvIGRlbGFzIGFvIHByb2pldG8uIFBhcmEgaXNzbywgZWRpdGVcbiAqIG8gKmFzc2V0cyogbm8gYXJxdWl2byAqKmFuZ3VsYXIuanNvbioqIGRhIGFwbGljYcOnw6NvIG5hIHNlZ3VpbnRlIG9yZGVtOlxuICogYGBgXG4gKiAgIFwiYXNzZXRzXCI6IFtcbiAqICAgICBcInNyYy9hc3NldHNcIixcbiAqICAgICBcInNyYy9mYXZpY29uLmljb1wiLFxuICogICAgIHtcbiAqICAgICAgIFwiZ2xvYlwiOiBcIioqXFwvKlwiLFxuICogICAgICAgXCJpbnB1dFwiOiBcIm5vZGVfbW9kdWxlcy9AcG8tdWkvc3R5bGUvaW1hZ2VzXCIsXG4gKiAgICAgICBcIm91dHB1dFwiOiBcImFzc2V0cy9pbWFnZXNcIlxuICogICAgIH1cbiAqICAgXVxuICogYGBgXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5QmFzZUNvbXBvbmVudCB7XG4gIHByaXZhdGUgX2NvbnRhY3RFbWFpbDogc3RyaW5nO1xuICBwcml2YXRlIF9waG9uZU1hc2sgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRQaG9uZTtcbiAgcHJpdmF0ZSBfdHlwZTogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlRGVmYXVsdDtcblxuICBlbWFpbDogc3RyaW5nO1xuICBtYXhMZW5ndGggPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRNYXhMZW5ndGg7XG4gIG1pbkxlbmd0aCA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1pbkxlbmd0aDtcbiAgbW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZUFsbDogYm9vbGVhbjtcbiAgcGhvbmU6IHN0cmluZztcbiAgc21zQ29kZTogc3RyaW5nO1xuICBzbXNDb2RlRXJyb3JNZXNzYWdlOiBzdHJpbmc7XG5cbiAgbGl0ZXJhbHM6IHtcbiAgICBjYW5jZWxCdXR0b246IHN0cmluZztcbiAgICBjbG9zZUJ1dHRvbjogc3RyaW5nO1xuICAgIGNvbnRpbnVlQnV0dG9uOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBlbWFpbEVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nO1xuICAgIGVtYWlsU2VudENvbmZpcm1hdGlvblBocmFzZTogc3RyaW5nO1xuICAgIGVtYWlsU2VudFRpdGxlOiBzdHJpbmc7XG4gICAgZm9yZ290UGFzc3dvcmRUaXRsZTogc3RyaW5nO1xuICAgIGluc2VydENvZGU6IHN0cmluZztcbiAgICBpbnNlcnRFbWFpbDogc3RyaW5nO1xuICAgIGluc2VydFBob25lOiBzdHJpbmc7XG4gICAgcGhvbmVFcnJvck1lc3NhZ2VQaHJhc2U6IHN0cmluZztcbiAgICBwcmVwb3NpdGlvbkluOiBzdHJpbmc7XG4gICAgcHJlcG9zaXRpb25Pcjogc3RyaW5nO1xuICAgIHJlY292ZXJ5UGFzc3dvcmRQaHJhc2U6IHN0cmluZztcbiAgICByZXNlbmRFbWFpbEJ1dHRvbjogc3RyaW5nO1xuICAgIHJlc2VuZFNtc0NvZGVQaHJhc2U6IHN0cmluZztcbiAgICBzZW5kQWdhaW46IHN0cmluZztcbiAgICBzZW5kQWdhaW5QaHJhc2U6IHN0cmluZztcbiAgICBzZW5kQnV0dG9uOiBzdHJpbmc7XG4gICAgc21zOiBzdHJpbmc7XG4gICAgc21zQ29kZTogc3RyaW5nO1xuICAgIHNtc0NvZGVFcnJvck1lc3NhZ2VQaHJhc2U6IHN0cmluZztcbiAgICBzZW50U21zQ29kZVBocmFzZTogc3RyaW5nO1xuICAgIHN1cHBvcnRDb250YWN0OiBzdHJpbmc7XG4gICAgdGVsZXBob25lOiBzdHJpbmc7XG4gICAgdHlwZUNvZGVUaXRsZTogc3RyaW5nO1xuICB9ID0ge1xuICAgIC4uLnBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TGl0ZXJhbHNbcG9Mb2NhbGVEZWZhdWx0XSxcbiAgICAuLi5wb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzW2Jyb3dzZXJMYW5ndWFnZSgpXVxuICB9O1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRvIGUtbWFpbCBxdWUgw6kgZXhpYmlkbyBuYSBtZW5zYWdlbSBwYXJhIGNvbnRhdG8gZGUgc3Vwb3J0ZS5cbiAgICovXG4gIEBJbnB1dCgncC1jb250YWN0LWVtYWlsJykgc2V0IGNvbnRhY3RFbWFpbCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fY29udGFjdEVtYWlsID0gdmFsdWU7XG5cbiAgICB0aGlzLnNtc0NvZGVFcnJvck1lc3NhZ2UgPSB0aGlzLmNvbmNhdGVuYXRlU01TRXJyb3JNZXNzYWdlKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBjb250YWN0RW1haWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhY3RFbWFpbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRlIG1lbnNhZ2VtIGRlIGVycm8gY3VzdG9taXphZGEgcGFyYSBxdWFuZG8gbyB1c3XDoXJpbyBwYXNzYXIgdW0gY8OzZGlnbyBTTVMgaW52w6FsaWRvIG91IGVycmFkby5cbiAgICovXG4gIEBJbnB1dCgncC1jb2RlLWVycm9yJykgY29kZUVycm9yOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5pw6fDo28gZGEgbWFzY2FyYSBkbyBjYW1wbyBkZSB0ZWxlZm9uZS5cbiAgICpcbiAgICogQGRlZmF1bHQgYCg5OSkgOTk5OTktOTk5OWBcbiAgICovXG4gIEBJbnB1dCgncC1waG9uZS1tYXNrJykgc2V0IHBob25lTWFzayh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fcGhvbmVNYXNrID0gdmFsdWUgfHwgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0UGhvbmU7XG4gICAgdGhpcy5taW5MZW5ndGggPSB0aGlzLm1heExlbmd0aCA9IHRoaXMuX3Bob25lTWFzay5sZW5ndGg7XG4gIH1cblxuICBnZXQgcGhvbmVNYXNrKCkge1xuICAgIHJldHVybiB0aGlzLl9waG9uZU1hc2s7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgbyB0aXBvIGRlIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEgcXVlIHNlcsOhIGV4aWJpZG8uXG4gICAqXG4gICAqIEBkZWZhdWx0IGBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWxgXG4gICAqXG4gICAqL1xuICBASW5wdXQoJ3AtdHlwZScpIHNldCB0eXBlKHZhbHVlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUpIHtcbiAgICB0aGlzLl90eXBlID0gKDxhbnk+T2JqZWN0KS52YWx1ZXMoUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKS5pbmNsdWRlcyh2YWx1ZSlcbiAgICAgID8gdmFsdWVcbiAgICAgIDogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlRGVmYXVsdDtcbiAgfVxuXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzLl90eXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRW5kcG9pbnQgdXNhZG8gcGVsbyB0ZW1wbGF0ZSBwYXJhIHJlcXVpc2nDp8OjbyBkbyByZWN1cnNvLiBRdWFuZG8gcHJlZW5jaGlkbyxcbiAgICogbyBtw6l0b2RvcyBgcC1zdWJtaXRgIGUgYHAtc3VibWl0LWNvZGVgIHNlcsOjbyBpZ25vcmFkb3MgZSBvIGNvbXBvbmVudGUgYWRxdWlyaXLDoSBhdXRvbWF0aXphw6fDo29cbiAgICogcGFyYSBvIHByb2Nlc3NvIGRlIHNvbGljaXRhw6fDo28gZGUgdHJvY2EgZGUgc2VuaGEuXG4gICAqXG4gICAqICMjIyBQcm9jZXNzb3NcbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vIGNhbXBvIGRlIGVtYWlsL3RlbGVmb25lIGUgcHJlc3Npb25hciAqKmVudmlhcioqLFxuICAgKiBvIGNvbXBvbmVudGUgZmFyw6EgdW1hIHJlcXVpc2nDp8OjbyBgUE9TVGAgbmEgdXJsIGVzcGVjaWZpY2FkYSBuZXN0YSBwcm9wcmllZGFkZSBwYXNzYW5kbyBvIG9iamV0byBjb250ZW5kbyBvIHZhbG9yIGRlZmluaWRvIHBlbG8gdXN1w6FyaW8uXG4gICAqXG4gICAqIGBgYFxuICAgKiBib2R5IHtcbiAgICogIGVtYWlsOiBlbWFpbCxcbiAgICogIHJldHJ5PzogcmV0cnlcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogIyMjIyBSZWN1cGVyYcOnw6NvIHBvciBlbWFpbFxuICAgKiBQYXJhIGEgcmVjdXBlcmHDp8OjbyBkZSBzZW5oYSBwb3IgKiplbWFpbCoqLCBvIGPDs2RpZ28gZGUgcmVzcG9zdGEgSFRUUCBkZSBzdGF0dXMgZXNwZXJhZG8gw6kgYDIwNGAuXG4gICAqXG4gICAqIEVtIGNhc28gZGUgKipzdWNlc3NvKiosIHNlcsOhIGV4aWJpZGEgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGRlIGUtbWFpbCBwYXJhIG8gdXN1w6FyaW8uXG4gICAqXG4gICAqXG4gICAqID4gQSBhw6fDo28gKipSZWVudmlhcioqIG5hIHRlbGEgZGUgY29uZmlybWHDp8OjbyBlZmV0dWEgdW1hIG5vdmEgcmVxdWlzacOnw6NvXG4gICAqIHBhc3NhbmRvLXNlIG8gb2JqZXRvIGNvbSBpbmNyZW1lbnRvIHBhcmEgbyB2YWxvciBkYSBwcm9wcmllZGFkZSAqKnJldHJ5KiouXG4gICAqXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcbiAgICpcbiAgICpcbiAgICogIyMjIyBSZWN1cGVyYcOnw6NvIHBvciBTTVNcbiAgICogU2UgYSBvcMOnw6NvIGRlIHJlY3VwZXJhw6fDo28gZm9yIHBvciAqKlNNUyoqLCBvIGPDs2RpZ28gZGUgc3RhdHVzIGRlIHN1Y2Vzc28gZGV2ZSBzZXIgYDIwMGAuXG4gICAqIEVtIGNhc28gZGUgKipzdWNlc3NvKiosIGFicmUtc2UgYSBtb2RhbCBkZSBkaWdpdGHDp8OjbyBkZSBjw7NkaWdvIFNNUyBlIGEgcmVzcG9zdGFcbiAgICogZGVzdGEgcmVxdWlzacOnw6NvIGRldmUgcmV0b3JuYXIgdW1hIGRlZmluacOnw6NvIGRlIGRhZG9zIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIDIwMDpcbiAgICogIHtcbiAgICogICAgaGFzaDogaGFzaCxcbiAgICogICAgdXJsVmFsaWRhdGlvbkNvZGU/OiB1cmxcbiAgICogIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIC0gTyAqKmhhc2gqKiBzZXLDoSBvIGPDs2RpZ28gZGUgdmFsaWRhw6fDo28gZGEgc29saWNpdGHDp8OjbyBkbyBTTVMgcGFyYSBzZXIgZW52aWFkbyBqdW50YW1lbnRlIGNvbSBvIGPDs2RpZ28gZGUgdmVyaWZpY2HDp8OjbyBkbyBTTVM7XG4gICAqIC0gKip1cmxWYWxpZGF0aW9uQ29kZSoqIMOpIGEgdXJsIHVzYWRhIHBhcmEgdmFsaWRhw6fDo28gZG8gY8OzZGlnbyBlbnZpYWRvIHBvciBTTVMuXG4gICAqXG4gICAqXG4gICAqID4gQ2FzbyBuw6NvIHNlamEgcGFzc2FkbyB1cmxWYWxpZGF0aW9uQ29kZSwgbyBlbmRwb2ludCB1c2FkbyBwYXJhIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gc2Vyw6EgYDxwLXVybC1yZWNvdmVyeT4vdmFsaWRhdGlvbmAuXG4gICAqXG4gICAqXG4gICAqICMjIyMgVmFsaWRhw6fDo28gZG8gY8OzZGlnbyBTTVNcbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vIGNhbXBvIGRlIGPDs2RpZ28gU01TIGUgcHJlc3Npb25hciAqKmNvbnRpbnVhcioqLCBvIGNvbXBvbmVudGUgZmFyw6EgdW1hIHJlcXVpc2nDp8OjbyBgUE9TVGAgY29udGVuZG86XG4gICAqXG4gICAqIGBgYFxuICAgKiBQT1NUIC88cC11cmwtcmVjb3Zlcnk+L3ZhbGlkYXRpb24gT1UgLzx1cmxWYWxpZGF0aW9uQ29kZT5cbiAgICogQm9keSB7XG4gICAqICBoYXNoOiBoYXNoLFxuICAgKiAgY29kZTogY29kZVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBPIGPDs2RpZ28gZGUgcmVzcG9zdGEgSFRUUCBkZSBzdGF0dXMgZXNwZXJhZG8gw6kgYDIwMGAuXG4gICAqXG4gICAqIEVtIGNhc28gZGUgKiplcnJvKiogbmEgdmFsaWRhw6fDo28gZG8gY8OzZGlnbyBTTVMsIGEgbW9kYWwgc2UgbWFudMOpbSBjb20gbyBjYW1wbyBwYXJhIGRpZ2l0YcOnw6NvXG4gICAqIGRlIGPDs2RpZ28gU01TXG4gICAqXG4gICAqXG4gICAqID4gUG9kZS1zZSBhdHJpYnVpciBhIG1lbnNhZ2VtIGRlIGVycm8gKG1lc3NhZ2UpIHBhcmEgbyBhdHJpYnV0byBgcC1jb2RlLWVycm9yYCBjb25mb3JtZSByZXRvcm5vIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIDQwMFxuICAgKiAge1xuICAgKiAgICBlcnJvciB7XG4gICAqICAgICAgbWVzc2FnZTogJ0Vycm9yIE1lc3NhZ2UnXG4gICAqICAgIH1cbiAgICogIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIEVtIGNhc28gZGUgKipzdWNlc3NvKiosIGVzcGVyYS1zZSBhIHJlc3Bvc3RhIGRlc3RhIHJlcXVpc2nDp8OjbyByZXRvcm5hbmRvIGEgc2VndWludGUgZGVmaW5pw6fDo286XG4gICAqXG4gICAqIGBgYFxuICAgKiAyMDA6XG4gICAqICB7XG4gICAqICAgIHRva2VuOiB0b2tlbixcbiAgICogICAgdXJsQ2hhbmdlUGFzc3dvcmQ/OiB1cmxcbiAgICogIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIC0gKip0b2tlbioqOiBUb2tlbiBkZSBhbHRlcmHDp8OjbyBkZSBzZW5oYTtcbiAgICogLSAqKnVybENoYW5nZVBhc3N3b3JkKio6IHVybCBwYXJhIG8gZm9ybXVsw6FyaW8gZGUgYWx0ZXJhw6fDo28gZGUgc2VuaGEuXG4gICAqXG4gICAqXG4gICAqIE8gY29tcG9uZW50ZSBlc3TDoSBjb25maWd1cmFkbyBwYXJhIHJlZGlyZWNpb25hciBwYXJhIGEgdXJsIGVzdGFiZWxlY2lkYSBlbSBgdXJsQ2hhbmdlUGFzc3dvcmRgLlxuICAgKlxuICAgKiA+IENhc28gbsOjbyBzZWphIHBhc3NhZG8gdmFsb3IgcGFyYSB1cmxDaGFuZ2VQYXNzd29yZCxcbiAgICogYSB1cmwgdXNhZGEgcGFyYSB2YWxpZGHDp8OjbyBzZXLDoSBhIGA8cC11cmwtcmVjb3Zlcnk+L2NoYW5nZVBhc3N3b3JkP3Rva2VuPTx0b2tlbj5gLlxuICAgKlxuICAgKiAqUHJvY2Vzc28gZmluYWxpemFkby4qXG4gICAqL1xuICBASW5wdXQoJ3AtdXJsLXJlY292ZXJ5JykgdXJsUmVjb3Zlcnk/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQcOnw6NvIGNvbnRlbmRvIGNvbW8gcGFyw6JtZXRybyBvIGPDs2RpZ28gZW52aWFkbyBwb3IgU01TIGUgZGlnaXRhZG8gcGVsbyB1c3XDoXJpby5cbiAgICpcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLXJlY292ZXJ5YC5cbiAgICovXG4gIEBPdXRwdXQoJ3AtY29kZS1zdWJtaXQnKSBjb2RlU3VibWl0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQcOnw6NvIGNvbnRlbmRvIG8gZW1haWwgY29tbyBwYXLDom1ldHJvIGUgcXVlIMOpIGV4ZWN1dGFkYSBxdWFuZG8gbyB1c3XDoXJpbyBjbGljYSBzb2JyZXMgb3MgYm90w7VlcyBkZSAnZW52aWFyJyBlICdyZWVudmlhcicgZS1tYWlsLlxuICAgKlxuICAgKiA+IEVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgc2UgZm9yIGRlZmluaWRvIHZhbG9yIHBhcmEgYSBwcm9wcmllZGFkZSBgcC11cmwtcmVjb3ZlcnlgLlxuICAgKi9cbiAgQE91dHB1dCgncC1zdWJtaXQnKSBzdWJtaXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogQWPDo28gcGFyYSBjb25jbHVzw6NvIGRlIHByb2Nlc3NvIGUgZmVjaGFtZW50byBkYSBtb2RhbC4gSW5kaWNhLXNlIHN1YSB1dGlsaXphw6fDo29cbiAgICogcGFyYSBhcMOzcyBvIGVudmlvIGUgdmFsaWRhw6fDo28gZG8gY8OzZGlnbyBTTVMgZW52aWFkbyBwZWxvIHVzdcOhcmlvLlxuICAgKlxuICAgKiA+IE5hcyBtb2RhbHMgZW0gcXVlIGjDoSBhIGHDp8OjbyBkZSAnY2FuY2VsYXInIGRpc3BlbnNhLXNlIG8gdXNvIGRlc3RhIGHDp8OjbyBwb2lzIG8gY29tcG9uZW50ZSBqw6EgdHJhdGEgbyBmZWNoYW1lbnRvIGRhIG1vZGFsLlxuICAgKi9cbiAgYWJzdHJhY3QgY29tcGxldGVkKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFicmUgYSBtb2RhbCBkZSBwcmVlbmNoaW1lbnRvIGRlIGVtYWlsIG91IG7Dum1lcm8gZGUgdGVsZWZvbmUgcGFyYSBzb2xpY2l0YcOnw6NvIGRlIHRyb2NhIGRlIHNlbmhhLlxuICAgKi9cbiAgYWJzdHJhY3Qgb3BlbigpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBYnJlIGEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBkZSBlbnZpbyBkZSBlbWFpbC5cbiAgICovXG4gIGFic3RyYWN0IG9wZW5Db25maXJtYXRpb24oKTogdm9pZDtcblxuICAvKipcbiAgICogQWJyZSBhIG1vZGFsIGRlIHByZWVuY2hpbWVudG8gZG8gY8OzZGlnbyBTTVMgZW52aWFkbyBhbyB1c3XDoXJpby5cbiAgICovXG4gIGFic3RyYWN0IG9wZW5TbXNDb2RlKCk6IHZvaWQ7XG5cbiAgcHJpdmF0ZSBjb25jYXRlbmF0ZVNNU0Vycm9yTWVzc2FnZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgY29uc3QgbGl0ZXJhbENvZGVFcnJvck1lc3NhZ2UgPSB0aGlzLmxpdGVyYWxzLnNtc0NvZGVFcnJvck1lc3NhZ2VQaHJhc2U7XG5cbiAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUgIT09ICcnXG4gICAgICA/IGAke2xpdGVyYWxDb2RlRXJyb3JNZXNzYWdlfSAke3RoaXMubGl0ZXJhbHMucHJlcG9zaXRpb25Jbn0gJHt2YWx1ZX0uYFxuICAgICAgOiBsaXRlcmFsQ29kZUVycm9yTWVzc2FnZTtcbiAgfVxufVxuIl19