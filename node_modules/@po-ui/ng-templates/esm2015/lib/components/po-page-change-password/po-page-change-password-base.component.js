import { __decorate, __metadata } from "tslib";
import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToBoolean, isExternalLink, isTypeof } from '../../utils/util';
/**
 * @description
 *
 * O componente `po-page-change-password` é utilizado como template para tela de cadastro ou alteração de senha.
 *
 * Apresenta dicas e regras para senhas mais seguras e também possibilidade de personalizar o redirecionamento para as telas
 * 'esqueceu a senha', 'voltar' e 'entrar no sistema'. Os textos das telas são pré-definidos e imutáveis.
 *
 * A propriedade `p-url-new-password` automatiza a rotina do template e simplifica o processo de cadastro/alteração de senha, bastando
 * definir uma url para POST das informações digitadas pelo usuário.  A flexibilidade e praticidade podem chegar a um nível em que o
 * desenvolvimento da aplicação no *client side* é desprovida de qualquer código-fonte relacionado à rotina de cadastro/alteração de senha.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/@po-ui/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 */
let PoPageChangePasswordBaseComponent = class PoPageChangePasswordBaseComponent {
    constructor() {
        this._hideCurrentPassword = false;
        this._requirements = [];
        this._urlHome = '/';
        /**
         * @optional
         *
         * @description
         *
         * URL para a ação de retorno da página.
         *
         * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `p-hide-current-password` for
         * falsa.
         *
         * @default `/`
         */
        this.urlBack = '/';
        /**
         * @optional
         *
         * @description
         *
         * Função executada ao submeter o form pelo botão salvar.
         *
         * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
         * método `openConfirmation`. Exemplo:
         *
         * ```
         * @ViewChild(PoPageChangePasswordComponent) changePassword: PoPageChangePasswordComponent;
         *
         * onSubmit() {
         *  this.changePassword.openConfirmation();
         * }
         *
         * ```
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-new-password`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * @optional
     *
     * @description
     *
     * Esconde o campo `Senha atual` para que o template seja para criação de senha.
     *
     * @default `false`
     */
    set hideCurrentPassword(value) {
        this._hideCurrentPassword = convertToBoolean(value);
    }
    get hideCurrentPassword() {
        return this._hideCurrentPassword;
    }
    /**
     * @optional
     *
     * @description
     *
     * URL para a ação do link `Esqueceu a senha`.
     *
     * A propriedade aceita os seguintes tipos:
     *
     * - **String**: informe uma url externa ou uma rota válida;
     * - **Function**: pode-se customizar a ação. Para esta possilidade basta atribuir:
     * ```
     * <po-page-change-password>
     *      [recovery]="this.myFunc.bind(this)";
     * </po-page-change-password>
     * ```
     *
     * - **PoPageChangePasswordRecovery**: cria-se vínculo automático com o template **po-modal-password-recovery**.
     *   O objeto deve conter a **url** para requisição dos recursos e pode-se definir o **tipo** de modal para recuperação de senha,
     *   **email** para contato e **máscara** do campo de telefone.
     *
     * > Caso não tenha valor o link `Esqueceu a senha` desaparece.
     */
    set recovery(value) {
        this._recovery = value;
        if (isTypeof(value, 'string')) {
            this.recoveryUrlType = isExternalLink(value) ? 'externalLink' : 'internalLink';
        }
    }
    get recovery() {
        return this._recovery;
    }
    /**
     * @optional
     *
     * @description
     *
     * Lista de regras para criação e alteração de senha.
     */
    set requirements(value) {
        this._requirements = value || [];
        this.showRequirements = this._requirements.length > 0;
    }
    get requirements() {
        return this._requirements;
    }
    /**
     * @optional
     *
     * @description
     *
     * URL para a ação do botão `Entrar no sistema` da modal de confirmação que aparece após salvar a senha ou se chamada pelo método
     * `openConfirmation`.
     *
     * @default `/`
     */
    set urlHome(value) {
        this._urlHome = value;
        this.modalAction.action = this.navigateTo.bind(this, this.urlHome);
    }
    get urlHome() {
        return this._urlHome;
    }
};
__decorate([
    Input('p-hide-current-password'),
    __metadata("design:type", Boolean),
    __metadata("design:paramtypes", [Boolean])
], PoPageChangePasswordBaseComponent.prototype, "hideCurrentPassword", null);
__decorate([
    Input('p-logo'),
    __metadata("design:type", String)
], PoPageChangePasswordBaseComponent.prototype, "logo", void 0);
__decorate([
    Input('p-recovery'),
    __metadata("design:type", Object),
    __metadata("design:paramtypes", [Object])
], PoPageChangePasswordBaseComponent.prototype, "recovery", null);
__decorate([
    Input('p-requirements'),
    __metadata("design:type", Array),
    __metadata("design:paramtypes", [Array])
], PoPageChangePasswordBaseComponent.prototype, "requirements", null);
__decorate([
    Input('p-secondary-logo'),
    __metadata("design:type", String)
], PoPageChangePasswordBaseComponent.prototype, "secondaryLogo", void 0);
__decorate([
    Input('p-token'),
    __metadata("design:type", String)
], PoPageChangePasswordBaseComponent.prototype, "token", void 0);
__decorate([
    Input('p-url-back'),
    __metadata("design:type", String)
], PoPageChangePasswordBaseComponent.prototype, "urlBack", void 0);
__decorate([
    Input('p-url-new-password'),
    __metadata("design:type", String)
], PoPageChangePasswordBaseComponent.prototype, "urlNewPassword", void 0);
__decorate([
    Input('p-url-home'),
    __metadata("design:type", String),
    __metadata("design:paramtypes", [String])
], PoPageChangePasswordBaseComponent.prototype, "urlHome", null);
__decorate([
    Output('p-submit'),
    __metadata("design:type", EventEmitter)
], PoPageChangePasswordBaseComponent.prototype, "submit", void 0);
PoPageChangePasswordBaseComponent = __decorate([
    Directive()
], PoPageChangePasswordBaseComponent);
export { PoPageChangePasswordBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG8tdWkvbmctdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQvcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdkUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUs5RTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBMkJHO0FBRUgsSUFBc0IsaUNBQWlDLEdBQXZELE1BQXNCLGlDQUFpQztJQUF2RDtRQUNVLHlCQUFvQixHQUFZLEtBQUssQ0FBQztRQUV0QyxrQkFBYSxHQUEyQyxFQUFFLENBQUM7UUFDM0QsYUFBUSxHQUFXLEdBQUcsQ0FBQztRQXdHL0I7Ozs7Ozs7Ozs7O1dBV0c7UUFDa0IsWUFBTyxHQUFXLEdBQUcsQ0FBQztRQTBGM0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0FtQkc7UUFDaUIsV0FBTSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO0lBR3JFLENBQUM7SUEzTkM7Ozs7Ozs7O09BUUc7SUFDK0IsSUFBSSxtQkFBbUIsQ0FBQyxLQUFjO1FBQ3RFLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsSUFBSSxtQkFBbUI7UUFDckIsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDbkMsQ0FBQztJQWFEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09Bc0JHO0lBQ2tCLElBQUksUUFBUSxDQUFDLEtBQXVEO1FBQ3ZGLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBRXZCLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsRUFBRTtZQUM3QixJQUFJLENBQUMsZUFBZSxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUM7U0FDaEY7SUFDSCxDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hCLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDc0IsSUFBSSxZQUFZLENBQUMsS0FBNkM7UUFDckYsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLElBQUksRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUNELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBc0dEOzs7Ozs7Ozs7T0FTRztJQUNrQixJQUFJLE9BQU8sQ0FBQyxLQUFhO1FBQzVDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUNELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0NBeUJGLENBQUE7QUFsTm1DO0lBQWpDLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQzs7OzRFQUVoQztBQWVnQjtJQUFoQixLQUFLLENBQUMsUUFBUSxDQUFDOzsrREFBZTtBQXlCVjtJQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOzs7aUVBTW5CO0FBYXdCO0lBQXhCLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQzs4QkFBeUIsS0FBSztxQ0FBTCxLQUFLO3FFQUdyRDtBQVkwQjtJQUExQixLQUFLLENBQUMsa0JBQWtCLENBQUM7O3dFQUF3QjtBQU9oQztJQUFqQixLQUFLLENBQUMsU0FBUyxDQUFDOztnRUFBZ0I7QUFjWjtJQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOztrRUFBdUI7QUFzRWQ7SUFBNUIsS0FBSyxDQUFDLG9CQUFvQixDQUFDOzt5RUFBeUI7QUFZaEM7SUFBcEIsS0FBSyxDQUFDLFlBQVksQ0FBQzs7O2dFQUduQjtBQXlCbUI7SUFBbkIsTUFBTSxDQUFDLFVBQVUsQ0FBQzs4QkFBUyxZQUFZO2lFQUEyQjtBQXRPL0MsaUNBQWlDO0lBRHRELFNBQVMsRUFBRTtHQUNVLGlDQUFpQyxDQXlPdEQ7U0F6T3FCLGlDQUFpQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvTW9kYWxBY3Rpb24gfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xlYW4sIGlzRXh0ZXJuYWxMaW5rLCBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLXJlY292ZXJ5LmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLXJlcXVpcmVtZW50LmludGVyZmFjZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBjb21wb25lbnRlIGBwby1wYWdlLWNoYW5nZS1wYXNzd29yZGAgw6kgdXRpbGl6YWRvIGNvbW8gdGVtcGxhdGUgcGFyYSB0ZWxhIGRlIGNhZGFzdHJvIG91IGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICpcbiAqIEFwcmVzZW50YSBkaWNhcyBlIHJlZ3JhcyBwYXJhIHNlbmhhcyBtYWlzIHNlZ3VyYXMgZSB0YW1iw6ltIHBvc3NpYmlsaWRhZGUgZGUgcGVyc29uYWxpemFyIG8gcmVkaXJlY2lvbmFtZW50byBwYXJhIGFzIHRlbGFzXG4gKiAnZXNxdWVjZXUgYSBzZW5oYScsICd2b2x0YXInIGUgJ2VudHJhciBubyBzaXN0ZW1hJy4gT3MgdGV4dG9zIGRhcyB0ZWxhcyBzw6NvIHByw6ktZGVmaW5pZG9zIGUgaW11dMOhdmVpcy5cbiAqXG4gKiBBIHByb3ByaWVkYWRlIGBwLXVybC1uZXctcGFzc3dvcmRgIGF1dG9tYXRpemEgYSByb3RpbmEgZG8gdGVtcGxhdGUgZSBzaW1wbGlmaWNhIG8gcHJvY2Vzc28gZGUgY2FkYXN0cm8vYWx0ZXJhw6fDo28gZGUgc2VuaGEsIGJhc3RhbmRvXG4gKiBkZWZpbmlyIHVtYSB1cmwgcGFyYSBQT1NUIGRhcyBpbmZvcm1hw6fDtWVzIGRpZ2l0YWRhcyBwZWxvIHVzdcOhcmlvLiAgQSBmbGV4aWJpbGlkYWRlIGUgcHJhdGljaWRhZGUgcG9kZW0gY2hlZ2FyIGEgdW0gbsOtdmVsIGVtIHF1ZSBvXG4gKiBkZXNlbnZvbHZpbWVudG8gZGEgYXBsaWNhw6fDo28gbm8gKmNsaWVudCBzaWRlKiDDqSBkZXNwcm92aWRhIGRlIHF1YWxxdWVyIGPDs2RpZ28tZm9udGUgcmVsYWNpb25hZG8gw6Agcm90aW5hIGRlIGNhZGFzdHJvL2FsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICogU2V1IGRldGFsaGFtZW50byBwYXJhIHVzbyBwb2RlIHNlciB2aXN0byBsb2dvIGFiYWl4byBlbSAqcHJvcHJpZWRhZGVzKi5cbiAqIENhc28ganVsZ3VlIG5lY2Vzc8OhcmlvLCBwb2RlLXNlIHRhbWLDqW0gZGVmaW5pciBtYW51YWxtZW50ZSBhIHJvdGluYSBkbyBjb21wb25lbnRlLlxuICpcbiAqIFBhcmEgcXVlIGFzIGltYWdlbnMgc2VqYW0gZXhpYmlkYXMgY29ycmV0YW1lbnRlLCDDqSBuZWNlc3PDoXJpbyBpbmNsdWlyIG8gY2FtaW5obyBkZWxhcyBhbyBwcm9qZXRvLiBQYXJhIGlzc28sIGVkaXRlXG4gKiBvICphc3NldHMqIG5vIGFycXVpdm8gKiphbmd1bGFyLmpzb24qKiBkYSBhcGxpY2HDp8OjbyBuYSBzZWd1aW50ZSBvcmRlbTpcbiAqIGBgYFxuICogICBcImFzc2V0c1wiOiBbXG4gKiAgICAgXCJzcmMvYXNzZXRzXCIsXG4gKiAgICAgXCJzcmMvZmF2aWNvbi5pY29cIixcbiAqICAgICB7XG4gKiAgICAgICBcImdsb2JcIjogXCIqKlxcLypcIixcbiAqICAgICAgIFwiaW5wdXRcIjogXCJub2RlX21vZHVsZXMvQHBvLXVpL3N0eWxlL2ltYWdlc1wiLFxuICogICAgICAgXCJvdXRwdXRcIjogXCJhc3NldHMvaW1hZ2VzXCJcbiAqICAgICB9XG4gKiAgIF1cbiAqIGBgYFxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb1BhZ2VDaGFuZ2VQYXNzd29yZEJhc2VDb21wb25lbnQge1xuICBwcml2YXRlIF9oaWRlQ3VycmVudFBhc3N3b3JkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3JlY292ZXJ5OiBzdHJpbmcgfCBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5IHwgRnVuY3Rpb247XG4gIHByaXZhdGUgX3JlcXVpcmVtZW50czogQXJyYXk8UG9QYWdlQ2hhbmdlUGFzc3dvcmRSZXF1aXJlbWVudD4gPSBbXTtcbiAgcHJpdmF0ZSBfdXJsSG9tZTogc3RyaW5nID0gJy8nO1xuICBwcm90ZWN0ZWQgdmFsaWRhdG9yQ2hhbmdlOiBhbnk7XG5cbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZDogc3RyaW5nO1xuICBtb2RhbEFjdGlvbjogUG9Nb2RhbEFjdGlvbjtcbiAgbmV3UGFzc3dvcmQ6IHN0cmluZztcbiAgcmVjb3ZlcnlVcmxUeXBlOiBzdHJpbmc7XG4gIHNob3dSZXF1aXJlbWVudHM6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRXNjb25kZSBvIGNhbXBvIGBTZW5oYSBhdHVhbGAgcGFyYSBxdWUgbyB0ZW1wbGF0ZSBzZWphIHBhcmEgY3JpYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqL1xuICBASW5wdXQoJ3AtaGlkZS1jdXJyZW50LXBhc3N3b3JkJykgc2V0IGhpZGVDdXJyZW50UGFzc3dvcmQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9oaWRlQ3VycmVudFBhc3N3b3JkID0gY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XG4gIH1cblxuICBnZXQgaGlkZUN1cnJlbnRQYXNzd29yZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGlkZUN1cnJlbnRQYXNzd29yZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5hIHBhcnRlIHN1cGVyaW9yLlxuICAgKlxuICAgKiA+IENhc28gc2VqYSBpbmRlZmluaWRhIG8gZXNwYcOnbyBzZSBtYW50w6ltIHByZXNlcnZhZG8gcG9yw6ltIHZhemlvLlxuICAgKi9cbiAgQElucHV0KCdwLWxvZ28nKSBsb2dvPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRvIGxpbmsgYEVzcXVlY2V1IGEgc2VuaGFgLlxuICAgKlxuICAgKiBBIHByb3ByaWVkYWRlIGFjZWl0YSBvcyBzZWd1aW50ZXMgdGlwb3M6XG4gICAqXG4gICAqIC0gKipTdHJpbmcqKjogaW5mb3JtZSB1bWEgdXJsIGV4dGVybmEgb3UgdW1hIHJvdGEgdsOhbGlkYTtcbiAgICogLSAqKkZ1bmN0aW9uKio6IHBvZGUtc2UgY3VzdG9taXphciBhIGHDp8Ojby4gUGFyYSBlc3RhIHBvc3NpbGlkYWRlIGJhc3RhIGF0cmlidWlyOlxuICAgKiBgYGBcbiAgICogPHBvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkPlxuICAgKiAgICAgIFtyZWNvdmVyeV09XCJ0aGlzLm15RnVuYy5iaW5kKHRoaXMpXCI7XG4gICAqIDwvcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQ+XG4gICAqIGBgYFxuICAgKlxuICAgKiAtICoqUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSoqOiBjcmlhLXNlIHbDrW5jdWxvIGF1dG9tw6F0aWNvIGNvbSBvIHRlbXBsYXRlICoqcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkqKi5cbiAgICogICBPIG9iamV0byBkZXZlIGNvbnRlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGUgcG9kZS1zZSBkZWZpbmlyIG8gKip0aXBvKiogZGUgbW9kYWwgcGFyYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLFxuICAgKiAgICoqZW1haWwqKiBwYXJhIGNvbnRhdG8gZSAqKm3DoXNjYXJhKiogZG8gY2FtcG8gZGUgdGVsZWZvbmUuXG4gICAqXG4gICAqID4gQ2FzbyBuw6NvIHRlbmhhIHZhbG9yIG8gbGluayBgRXNxdWVjZXUgYSBzZW5oYWAgZGVzYXBhcmVjZS5cbiAgICovXG4gIEBJbnB1dCgncC1yZWNvdmVyeScpIHNldCByZWNvdmVyeSh2YWx1ZTogc3RyaW5nIHwgRnVuY3Rpb24gfCBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5KSB7XG4gICAgdGhpcy5fcmVjb3ZlcnkgPSB2YWx1ZTtcblxuICAgIGlmIChpc1R5cGVvZih2YWx1ZSwgJ3N0cmluZycpKSB7XG4gICAgICB0aGlzLnJlY292ZXJ5VXJsVHlwZSA9IGlzRXh0ZXJuYWxMaW5rKHZhbHVlKSA/ICdleHRlcm5hbExpbmsnIDogJ2ludGVybmFsTGluayc7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlY292ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWNvdmVyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIExpc3RhIGRlIHJlZ3JhcyBwYXJhIGNyaWHDp8OjbyBlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKi9cbiAgQElucHV0KCdwLXJlcXVpcmVtZW50cycpIHNldCByZXF1aXJlbWVudHModmFsdWU6IEFycmF5PFBvUGFnZUNoYW5nZVBhc3N3b3JkUmVxdWlyZW1lbnQ+KSB7XG4gICAgdGhpcy5fcmVxdWlyZW1lbnRzID0gdmFsdWUgfHwgW107XG4gICAgdGhpcy5zaG93UmVxdWlyZW1lbnRzID0gdGhpcy5fcmVxdWlyZW1lbnRzLmxlbmd0aCA+IDA7XG4gIH1cbiAgZ2V0IHJlcXVpcmVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWlyZW1lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogQ2FtaW5obyBwYXJhIGEgbG9nb21hcmNhIGxvY2FsaXphZGEgbm8gcm9kYXDDqS5cbiAgICovXG4gIEBJbnB1dCgncC1zZWNvbmRhcnktbG9nbycpIHNlY29uZGFyeUxvZ28/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRva2VuIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYS9yZWN1cGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKiA+IEVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgY2FzbyBleGlzdGEgdW0gdG9rZW4gY29tbyBwYXLDom1ldHJvIG5hIFVSTCBpbmljaWFsIGRvIHRlbXBsYXRlLlxuICAgKi9cbiAgQElucHV0KCdwLXRva2VuJykgdG9rZW4/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVVJMIHBhcmEgYSBhw6fDo28gZGUgcmV0b3JubyBkYSBww6FnaW5hLlxuICAgKlxuICAgKiA+IE8gYm90w6NvIGBWb2x0YXJgIGFwYXJlY2UgYXBlbmFzIHBhcmEgdGVsYXMgZGUgYWx0ZXJhw6fDo28gZGUgc2VuaGEsIG91IHNlamEsIHPDsyBhcGFyZWNlIHNlIGEgcHJvcHJpZWRhZGUgYHAtaGlkZS1jdXJyZW50LXBhc3N3b3JkYCBmb3JcbiAgICogZmFsc2EuXG4gICAqXG4gICAqIEBkZWZhdWx0IGAvYFxuICAgKi9cbiAgQElucHV0KCdwLXVybC1iYWNrJykgdXJsQmFjazogc3RyaW5nID0gJy8nO1xuXG4gIC8qKlxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVhbGl6YXIgdW0gUE9TVC4gUXVhbmRvIHByZWVuY2hpZG8sIG8gbcOpdG9kbyBgcC1zdWJtaXRgIHNlcsOhIGlnbm9yYWRvIGUgbyBjb21wb25lbnRlIGFkcXVpcmlyw6FcbiAgICogYXV0b21hdGl6YcOnw6NvIHBhcmEgbyBwcm9jZXNzbyBkZSBjYWRhc3Ryby90cm9jYSBkZSBzZW5oYS5cbiAgICpcbiAgICogIyMjIFByb2Nlc3NvXG4gICAqIEFvIGRpZ2l0YXIgdW0gdmFsb3IgdsOhbGlkbyBub3MgY2FtcG9zIGRlIHNlbmhhIGUgcHJlc3Npb25hciAqKnNhbHZhcioqLFxuICAgKiBvIGNvbXBvbmVudGUgZmFyw6EgdW1hIHJlcXVpc2nDp8OjbyBgUE9TVGAgbmEgdXJsIGVzcGVjaWZpY2FkYSBuZXN0YSBwcm9wcmllZGFkZSBwYXNzYW5kbyBvIG9iamV0byBjb250ZW5kbyBvcyB2YWxvcmVzIGRlZmluaWRvcyBwZWxvXG4gICAqIHVzdcOhcmlvLlxuICAgKlxuICAgKiBgYGBcbiAgICogYm9keSB7XG4gICAqICB0b2tlbj86IHRva2VuLFxuICAgKiAgb2xkUGFzc3dvcmQ/OiBvbGRQYXNzd29yZCxcbiAgICogIG5ld1Bhc3N3b3JkOiBuZXdQYXNzd29yZFxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBPIGPDs2RpZ28gZGUgcmVzcG9zdGEgSFRUUCBkZSBzdGF0dXMgZXNwZXJhZG8gw6kgYDIwNGAuXG4gICAqXG4gICAqIEVtIGNhc28gZGUgKipzdWNlc3NvKiosIHNlcsOhIGV4aWJpZGEgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGRlIHNlbmhhIGFsdGVyYWRhLlxuICAgKlxuICAgKiA+IE8gdG9rZW4gc2Vyw6EgaW5mb3JtYWRvIHBlbGEgcHJvcHJpZWRhZGUgYHAtdG9rZW5gZG8gY29tcG9uZW50ZSBvdSBwb3IgdW0gKnF1ZXJ5IHBhcmFtZXRlciogbmEgVVJMIGRvIHRlbXBsYXRlLlxuICAgKlxuICAgKiAqUHJvY2Vzc28gZmluYWxpemFkby4qXG4gICAqXG4gICAqIF9fX19fX19fX19fX19fX1xuICAgKlxuICAgKiAjIyMjIFByYXRpY2lkYWRlXG4gICAqIEFzIGluZm9ybWHDp8O1ZXMgZG8gc2VydmnDp28gZGUgYXV0ZW50aWNhw6fDo28gdGFtYsOpbSBwb2RlbSBzZXIgdHJhbnNtaXRpZGFzIGRpcmV0YW1lbnRlIHBlbGFzIGNvbmZpZ3VyYcOnw6NvcyBkZSByb3RhIGUsIGRlc3RhIG1hbmVpcmEsXG4gICAqIGRpc3BlbnNhLXNlIHF1YWxxdWVyIG1lbsOnw6NvIGUvb3UgaW1wb3J0YcOnw6NvIGRvIGNvbXBvbmVudGUgYHBvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkYCBubyByZXN0YW50ZSBkYSBhcGxpY2HDp8Ojby4gTyBleGVtcGxvIGFiYWl4b1xuICAgKiBleGVtcGxpZmljYSBhIGZvcm1hIGRpbsOibWljYSBjb20gYSBxdWFsIG8gdGVtcGxhdGUgZGUgdGVsYSBkZSB0cm9jYSBkZSBzZW5oYSBwb2RlIHNlciBnZXJhZG8gYW8gbmF2ZWdhciBwYXJhIHJvdGEgYC9jaGFuZ2UtcGFzc3dvcmRgLCBlXG4gICAqIHRhbWLDqW0gY29tbyBlbGUgc2UgY29tdW5pY2EgY29tIG8gc2VydmnDp28gcGFyYSBlZmV0dWHDp8OjbyBkbyBwcm9jZXNzbyBkZSB0cm9jYSBkZSBzZW5oYSBkbyB1c3XDoXJpbyBlIHNvbGljaXRhw6fDo28gZGUgbm92YSBzZW5oYS5cbiAgICogQmFzdGEgZGVmaW5pciBuYXMgY29uZmlndXJhw6fDtWVzIGRlIHJvdGE6XG4gICAqXG4gICAqXG4gICAqIGBgYFxuICAgKiAgIGltcG9ydCB7IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSwgUG9QYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICdAcG8tdWkvbmctdGVtcGxhdGVzJztcbiAgICpcbiAgICogICAuLi5cbiAgICogICBjb25zdCByb3V0ZXM6IFJvdXRlcyA9IFtcbiAgICogICAgIHtcbiAgICogICAgICAgcGF0aDogJ2NoYW5nZS1wYXNzd29yZCcsIGNvbXBvbmVudDogUG9QYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQsIGRhdGE6IHtcbiAgICogICAgICAgICBzZXJ2aWNlQXBpOiAnaHR0cHM6Ly9wby11aS5pby9zYW1wbGUvYXBpL25ldy1wYXNzd29yZCcsXG4gICAqICAgICAgICAgcmVjb3Zlcnk6IHtcbiAgICogICAgICAgICAgIHVybDogJ2h0dHBzOi8vcG8tdWkuaW8vc2FtcGxlL2FwaS91c2VycycsXG4gICAqICAgICAgICAgICB0eXBlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuQWxsLFxuICAgKiAgICAgICAgICAgY29udGFjdE1haWw6ICdkZXYucG9AcG8tdWkuY29tJyxcbiAgICogICAgICAgICAgIHBob25lTWFzazogJzktOTk5LTk5OS05OTk5J1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfVxuICAgKiAgICAgfVxuICAgKiAgICAgLi4uXG4gICAqICAgXTtcbiAgICpcbiAgICogICBATmdNb2R1bGUoe1xuICAgKiAgICAgaW1wb3J0czogW1JvdXRlck1vZHVsZS5mb3JSb290KHJvdXRlcyldLFxuICAgKiAgICAgZXhwb3J0czogW1JvdXRlck1vZHVsZV1cbiAgICogICB9KVxuICAgKiAgIGV4cG9ydCBjbGFzcyBBcHBSb3V0aW5nTW9kdWxlIHsgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogTyBtZXRhZGFkbyBgc2VydmljZUFwaWAgZGV2ZSBzZXIgYSAqKnVybCoqIHBhcmEgcmVxdWlzacOnw6NvIGRvcyByZWN1cnNvcyBkZSB0cm9jYSBkZSBzZW5oYS4gRSBgcmVjb3ZlcnlgIMOpIGEgaW50ZXJmYWNlXG4gICAqIGBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5YCByZXNwb25zw6F2ZWwgcGVsYXMgZXNwZWNpZmljYcOnw7VlcyBjb250aWRhcyBuYSBtb2RhbCBkZSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKiA+IMOJIGVzc2VuY2lhbCBxdWUgc2lnYSBhIG5vbWVuY2xhdHVyYSBkb3MgYXRyaWJ1dG9zIGV4ZW1wbGlmaWNhZG9zIGFjaW1hIHBhcmEgc3VhIGVmZXRpdmEgZnVuY2lvbmFsaWRhZGUuXG4gICAqXG4gICAqL1xuICBASW5wdXQoJ3AtdXJsLW5ldy1wYXNzd29yZCcpIHVybE5ld1Bhc3N3b3JkPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRvIGJvdMOjbyBgRW50cmFyIG5vIHNpc3RlbWFgIGRhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gcXVlIGFwYXJlY2UgYXDDs3Mgc2FsdmFyIGEgc2VuaGEgb3Ugc2UgY2hhbWFkYSBwZWxvIG3DqXRvZG9cbiAgICogYG9wZW5Db25maXJtYXRpb25gLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgL2BcbiAgICovXG4gIEBJbnB1dCgncC11cmwtaG9tZScpIHNldCB1cmxIb21lKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl91cmxIb21lID0gdmFsdWU7XG4gICAgdGhpcy5tb2RhbEFjdGlvbi5hY3Rpb24gPSB0aGlzLm5hdmlnYXRlVG8uYmluZCh0aGlzLCB0aGlzLnVybEhvbWUpO1xuICB9XG4gIGdldCB1cmxIb21lKCkge1xuICAgIHJldHVybiB0aGlzLl91cmxIb21lO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRnVuw6fDo28gZXhlY3V0YWRhIGFvIHN1Ym1ldGVyIG8gZm9ybSBwZWxvIGJvdMOjbyBzYWx2YXIuXG4gICAqXG4gICAqIENhc28gZGVmaW5pZGEgZXNzYSBmdW7Dp8OjbywgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIG7Do28gYXBhcmVjZSwgbWFzIHBvZGUgc2VyIGNoYW1hZGEgcGVsb1xuICAgKiBtw6l0b2RvIGBvcGVuQ29uZmlybWF0aW9uYC4gRXhlbXBsbzpcbiAgICpcbiAgICogYGBgXG4gICAqIEBWaWV3Q2hpbGQoUG9QYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQpIGNoYW5nZVBhc3N3b3JkOiBQb1BhZ2VDaGFuZ2VQYXNzd29yZENvbXBvbmVudDtcbiAgICpcbiAgICogb25TdWJtaXQoKSB7XG4gICAqICB0aGlzLmNoYW5nZVBhc3N3b3JkLm9wZW5Db25maXJtYXRpb24oKTtcbiAgICogfVxuICAgKlxuICAgKiBgYGBcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLW5ldy1wYXNzd29yZGAuXG4gICAqL1xuICBAT3V0cHV0KCdwLXN1Ym1pdCcpIHN1Ym1pdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgYWJzdHJhY3QgbmF2aWdhdGVUbyh1cmw6IHN0cmluZyk6IHZvaWQ7XG59XG4iXX0=