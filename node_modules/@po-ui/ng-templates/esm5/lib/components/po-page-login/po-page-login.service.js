import { __decorate, __metadata } from "tslib";
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { PoPageLoginAuthenticationType } from './enums/po-page-login-authentication-type.enum';
var PoPageLoginService = /** @class */ (function () {
    function PoPageLoginService(http) {
        this.http = http;
    }
    PoPageLoginService.prototype.onLogin = function (url, type, loginForm) {
        if (type === PoPageLoginAuthenticationType.Bearer) {
            loginForm.password = btoa(loginForm.password);
            return this.http.post(url, loginForm);
        }
        else {
            var user = "(" + loginForm.login + ":" + loginForm.password + ")";
            var headers = new HttpHeaders({
                'Authorization': type + " " + btoa(user)
            });
            delete loginForm.login;
            delete loginForm.password;
            return this.http.post(url, loginForm, { headers: headers });
        }
    };
    PoPageLoginService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    PoPageLoginService = __decorate([
        Injectable(),
        __metadata("design:paramtypes", [HttpClient])
    ], PoPageLoginService);
    return PoPageLoginService;
}());
export { PoPageLoginService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1sb2dpbi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvLXVpL25nLXRlbXBsYXRlcy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLXBhZ2UtbG9naW4vcG8tcGFnZS1sb2dpbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQy9ELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFLM0MsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sZ0RBQWdELENBQUM7QUFHL0Y7SUFDRSw0QkFBb0IsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtJQUFHLENBQUM7SUFFeEMsb0NBQU8sR0FBUCxVQUFRLEdBQVcsRUFBRSxJQUFtQyxFQUFFLFNBQXNCO1FBQzlFLElBQUksSUFBSSxLQUFLLDZCQUE2QixDQUFDLE1BQU0sRUFBRTtZQUNqRCxTQUFTLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDOUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDdkM7YUFBTTtZQUNMLElBQU0sSUFBSSxHQUFHLE1BQUksU0FBUyxDQUFDLEtBQUssU0FBSSxTQUFTLENBQUMsUUFBUSxNQUFHLENBQUM7WUFDMUQsSUFBTSxPQUFPLEdBQUcsSUFBSSxXQUFXLENBQUM7Z0JBQzlCLGVBQWUsRUFBSyxJQUFJLE1BQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO2FBQ3pDLENBQUMsQ0FBQztZQUNILE9BQU8sU0FBUyxDQUFDLEtBQUssQ0FBQztZQUN2QixPQUFPLFNBQVMsQ0FBQyxRQUFRLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUUsT0FBTyxTQUFBLEVBQUUsQ0FBQyxDQUFDO1NBQ3BEO0lBQ0gsQ0FBQzs7Z0JBZnlCLFVBQVU7O0lBRHpCLGtCQUFrQjtRQUQ5QixVQUFVLEVBQUU7eUNBRWUsVUFBVTtPQUR6QixrQkFBa0IsQ0FpQjlCO0lBQUQseUJBQUM7Q0FBQSxBQWpCRCxJQWlCQztTQWpCWSxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwSGVhZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBQb1BhZ2VMb2dpbiB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1wYWdlLWxvZ2luLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BhZ2VMb2dpbkF1dGhlbnRpY2F0aW9uVHlwZSB9IGZyb20gJy4vZW51bXMvcG8tcGFnZS1sb2dpbi1hdXRoZW50aWNhdGlvbi10eXBlLmVudW0nO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUG9QYWdlTG9naW5TZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KSB7fVxuXG4gIG9uTG9naW4odXJsOiBzdHJpbmcsIHR5cGU6IFBvUGFnZUxvZ2luQXV0aGVudGljYXRpb25UeXBlLCBsb2dpbkZvcm06IFBvUGFnZUxvZ2luKTogT2JzZXJ2YWJsZTxPYmplY3Q+IHtcbiAgICBpZiAodHlwZSA9PT0gUG9QYWdlTG9naW5BdXRoZW50aWNhdGlvblR5cGUuQmVhcmVyKSB7XG4gICAgICBsb2dpbkZvcm0ucGFzc3dvcmQgPSBidG9hKGxvZ2luRm9ybS5wYXNzd29yZCk7XG4gICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodXJsLCBsb2dpbkZvcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1c2VyID0gYCgke2xvZ2luRm9ybS5sb2dpbn06JHtsb2dpbkZvcm0ucGFzc3dvcmR9KWA7XG4gICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgJHt0eXBlfSBgICsgYnRvYSh1c2VyKVxuICAgICAgfSk7XG4gICAgICBkZWxldGUgbG9naW5Gb3JtLmxvZ2luO1xuICAgICAgZGVsZXRlIGxvZ2luRm9ybS5wYXNzd29yZDtcbiAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdCh1cmwsIGxvZ2luRm9ybSwgeyBoZWFkZXJzIH0pO1xuICAgIH1cbiAgfVxufVxuIl19