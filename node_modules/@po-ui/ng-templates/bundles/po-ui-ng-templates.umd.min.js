!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@po-ui/ng-components"),require("@angular/router"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@po-ui/ng-templates",["exports","@angular/core","@angular/common","@angular/forms","@po-ui/ng-components","@angular/router","@angular/common/http","rxjs","rxjs/operators"],t):t(((e=e||self)["po-ui"]=e["po-ui"]||{},e["po-ui"]["ng-templates"]={}),e.ng.core,e.ng.common,e.ng.forms,e.ngComponents,e.ng.router,e.ng.common.http,e.rxjs,e.rxjs.operators)}(this,(function(e,t,o,n,i,r,s,a,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function l(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var u=function(){return(u=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function d(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{p(n.next(e))}catch(e){r(e)}}function a(e){try{p(n.throw(e))}catch(e){r(e)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}p((n=n.apply(e,t||[])).next())}))}function g(e,t){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function f(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var v=["pt","en","es","ru"];function b(){return w()}function P(){return navigator.language||navigator.userLanguage}function w(){var e=(P()||"pt").toLowerCase().substring(0,2);return v.includes(e)?e:"pt"}function S(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:"number"==typeof e?1===e:!!e}function A(e,t){return typeof e===t}function k(e){return!!e&&e.startsWith("http")}function C(e,t){void 0===e&&(e={}),void 0===t&&(t=[]);return t.reduce((function(t,o){var n;return u(u({},t),((n={})[o]=e[o],n))}),{})}function E(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return e[t]}))}function M(e){return e?e<10?"0"+e:e:"00"}function O(e,t){return e.forEach((function(e){return delete t[e]})),t}var I,R={en:{cancelButton:"Cancel",closeButton:"Close",continueButton:"Continue",email:"e-mail",emailErrorMessagePhrase:"Invalid e-mail format",emailSentConfirmationPhrase:"We have sent the instructions and new password creation link to your e-mail.\n    If you did not receive it after a few minutes, check your spam box or click Resend.",emailSentTitle:"E-mail sent",forgotPasswordTitle:"Forgot your password?",insertCode:"Type the code",insertEmail:"Enter your e-mail",insertPhone:"Enter your mobile number",phoneErrorMessagePhrase:"Invalid phone number",prepositionIn:"in",prepositionOr:"or",recoveryPasswordPhrase:"To recover your password we will send you a {0} with instructions.",resendEmailButton:"Resend",resendSmsCodePhrase:"If the code does not arrive within a few minutes, please send it again.",sendAgainPhrase:"If the code does not arrive within a few minutes",sendAgain:"send again.",sendButton:"Submit",sentSmsCodePhrase:"We sent a code for your mobile phone.",sms:"SMS",smsCodeErrorMessagePhrase:"Invalid code. Please re-enter or contact support",supportContact:"If you do not have access to {0} contact support",telephone:"telephone",typeCodeTitle:"Enter sent code"},es:{cancelButton:"Cancelar",closeButton:"Cerrar",continueButton:"Continuar",email:"e-mail",emailErrorMessagePhrase:"Formato de correo electrónico no válido",emailSentConfirmationPhrase:"Enviamos las instrucciones y enlace de creación de nueva contraseña para su correo electrónico.\n    Si no ha recibido después de unos minutos, compruebe su caja de spam o haga clic en Reenviar",emailSentTitle:"E-mail enviado",forgotPasswordTitle:"Olvidaste tu contraseña?",insertCode:"Introduzca el código",insertEmail:"Introduce tu e-mail",insertPhone:"Introduce tu número de celular",phoneErrorMessagePhrase:"Número de teléfono no válido",prepositionIn:"en",prepositionOr:"u",recoveryPasswordPhrase:"Para recuperar su contraseña vamos a enviar un {0} con instrucciones.",resendEmailButton:"Reenviar",resendSmsCodePhrase:"Si el código no llega dentro de unos minutos, vuelva a enviar.",sendAgain:"envíe de nuevo.",sendAgainPhrase:"Si el código no llega dentro de unos minutos",sendButton:"Enviar",sentSmsCodePhrase:"Enviamos un código para su celular.",sms:"SMS",smsCodeErrorMessagePhrase:"Código no válido. Escriba de nuevo o póngase en contacto con el soporte",supportContact:"Si no tiene acceso a {0} póngase en contacto con el soporte",telephone:"teléfono",typeCodeTitle:"Escribir código enviado"},pt:{cancelButton:"Cancelar",closeButton:"Fechar",continueButton:"Continuar",email:"e-mail",emailErrorMessagePhrase:"Formato de e-mail inválido",emailSentConfirmationPhrase:"Enviamos as instruções e link de criação de nova senha para o seu e-mail.\n    Caso não tenha recebido após alguns minutos, verifique sua caixa de spam ou clique em Reenviar.",emailSentTitle:"E-mail enviado",forgotPasswordTitle:"Esqueceu sua senha?",insertCode:"Digite o código",insertEmail:"Insira seu e-mail",insertPhone:"Insira seu número de celular",phoneErrorMessagePhrase:"Número de telefone inválido",prepositionIn:"em",prepositionOr:"ou",recoveryPasswordPhrase:"Para recuperar sua senha vamos enviar um {0} com instruções.",resendEmailButton:"Reenviar",resendSmsCodePhrase:"Se o código não chegar dentro de alguns minutos envie novamente",sendAgain:"envie novamente.",sendAgainPhrase:"Se o código não chegar dentro de alguns minutos",sendButton:"Enviar",sentSmsCodePhrase:"Enviamos um código para seu celular cadastrado.",sms:"SMS",smsCodeErrorMessagePhrase:"Código inválido. Digite novamente ou contacte o suporte",supportContact:"Se não tiver acesso ao {0} contacte o suporte",telephone:"telefone",typeCodeTitle:"Digitar código enviado"},ru:{cancelButton:"отменить",closeButton:"близко",continueButton:"близко",email:"по электронной почте",emailErrorMessagePhrase:"Неверный формат электронной почты",emailSentConfirmationPhrase:"Мы отправили инструкции и новую ссылку для создания пароля для вашей электронной почты.\nЕсли вы не получили его в течение нескольких минут, установите флажок Спам или нажмите Далее.",emailSentTitle:"Письмо отправлено",forgotPasswordTitle:"Забыли пароль?",insertCode:"Введите код",insertEmail:"Введите адрес электронной почты",insertPhone:"Введите номер вашего мобильного телефона",phoneErrorMessagePhrase:"Неверный номер телефона",prepositionIn:"в",prepositionOr:"или",recoveryPasswordPhrase:"Для восстановления вашего пароля мы вышлем {0} с инструкциями.",resendEmailButton:"Отправить еще раз",resendSmsCodePhrase:"Если код не приходит через несколько минут, попробуйте еще раз.",sendAgain:"отправить снова.",sendAgainPhrase:"Если код не приходит через несколько минут",sendButton:"послать",sentSmsCodePhrase:"Мы отправляем код на ваш зарегистрированный мобильный телефон.",sms:"SMS",smsCodeErrorMessagePhrase:"Неверный код. Повторите или обратитесь в службу поддержки",supportContact:"Если у вас нет доступа к {0}, обратитесь в службу поддержки",telephone:"телефон",typeCodeTitle:"Введите отправленный код"}};(I=e.PoModalPasswordRecoveryType||(e.PoModalPasswordRecoveryType={})).All="all",I.Email="email",I.SMS="sms";var F,T=e.PoModalPasswordRecoveryType.Email,x=function(){function o(){this._phoneMask="(99) 99999-9999",this._type=T,this.maxLength=15,this.minLength=15,this.literals=u(u({},R.pt),R[b()]),this.codeSubmit=new t.EventEmitter,this.submit=new t.EventEmitter}return Object.defineProperty(o.prototype,"contactEmail",{get:function(){return this._contactEmail},set:function(e){this._contactEmail=e,this.smsCodeErrorMessage=this.concatenateSMSErrorMessage(e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"phoneMask",{get:function(){return this._phoneMask},set:function(e){this._phoneMask=e||"(99) 99999-9999",this.minLength=this.maxLength=this._phoneMask.length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(t){this._type=Object.values(e.PoModalPasswordRecoveryType).includes(t)?t:T},enumerable:!0,configurable:!0}),o.prototype.concatenateSMSErrorMessage=function(e){var t=this.literals.smsCodeErrorMessagePhrase;return e&&""!==e?t+" "+this.literals.prepositionIn+" "+e+".":t},d([t.Input("p-contact-email"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"contactEmail",null),d([t.Input("p-code-error"),h("design:type",String)],o.prototype,"codeError",void 0),d([t.Input("p-phone-mask"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"phoneMask",null),d([t.Input("p-type"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"type",null),d([t.Input("p-url-recovery"),h("design:type",String)],o.prototype,"urlRecovery",void 0),d([t.Output("p-code-submit"),h("design:type",Object)],o.prototype,"codeSubmit",void 0),d([t.Output("p-submit"),h("design:type",Object)],o.prototype,"submit",void 0),o=d([t.Directive()],o)}();(F=e.PoModalPasswordRecoveryModalContent||(e.PoModalPasswordRecoveryModalContent={})).Email="email",F.SMSCode="smsCode",F.Confirmation="confirmation";var D,L=function(){function e(e){this.http=e}return e.prototype.post=function(e,t,o){return this.http.post(e,t,{observe:"response",params:o})},e.ctorParameters=function(){return[{type:s.HttpClient}]},e=d([t.Injectable(),h("design:paramtypes",[s.HttpClient])],e)}(),j=function(o){function s(t,n,i){var r=o.call(this)||this;return r.router=t,r.poI18nPipe=n,r.poModalPasswordRecoveryService=i,r.chosenTypeFormOption=e.PoModalPasswordRecoveryType.Email,r.codeMask="9 9 9 9 9 9",r.emailModal=!0,r.emailModalPhrases={firstPhrase:null,secondPhrase:null},r.endpoint=".",r.invalidCode=!1,r.invalidEmail=!1,r.modalType=e.PoModalPasswordRecoveryModalContent.Email,r.submittedCodeValue={},r.submittedContactValue={},r.primaryAction={label:void 0,action:function(){}},r.secondaryAction={label:void 0,action:function(){}},r.typeFormOptions=[{label:"e-mail",value:e.PoModalPasswordRecoveryType.Email},{label:"SMS",value:e.PoModalPasswordRecoveryType.SMS}],r}return l(s,o),s.prototype.ngOnDestroy=function(){this.passwordRecoverySubscription&&this.passwordRecoverySubscription.unsubscribe(),this.smsCodeSubscription&&this.smsCodeSubscription.unsubscribe()},s.prototype.completed=function(){this.cancelAction()},s.prototype.formModelChangesCheck=function(t){var o=t.invalid;if(this.invalidEmail=o&&t.dirty,this.primaryAction.disabled=o,this.modalType===e.PoModalPasswordRecoveryModalContent.SMSCode){var n=void 0!==this.codeError&&""!==this.codeError;this.showCustomCodeError=n&&t.pristine}},s.prototype.getInputType=function(e){var t=this;this.type=e,this.pipeModalPhrases(),setTimeout((function(){t.control=t.emailForm.controls[e],t.formModelChangesCheck(t.emailForm),t.resetFormFields(t.control)}))},s.prototype.open=function(){var e=this.checkFormType(this.type);this.control=this.emailForm.controls[e],this.setEmailModalPhrasesAndActions(),this.formModelChangesCheck(this.emailForm),this.recoveryModalElement.open()},s.prototype.openConfirmation=function(){this.modalTitle=this.literals.emailSentTitle,this.modalType=e.PoModalPasswordRecoveryModalContent.Confirmation,this.setActions(this.cancelAction,this.literals.closeButton,this.submitAction,this.literals.resendEmailButton,!1)},s.prototype.openSmsCode=function(){var t=this;this.modalTitle=this.literals.typeCodeTitle,this.modalType=e.PoModalPasswordRecoveryModalContent.SMSCode,this.setActions(this.submitSmsCodeAction,this.literals.continueButton,this.cancelAction,this.literals.cancelButton,!0),setTimeout((function(){t.control=t.smsCodeForm.controls.sms,t.formModelChangesCheck(t.smsCodeForm)}))},s.prototype.resendSmsCode=function(){this.incrementRetryAttempts(),this.urlRecovery?this.submitActionRequest(this.submittedContactValue,this.type):this.submit.emit(this.submittedContactValue)},s.prototype.assignSmsResponse=function(e){this.smsBodyResponse=Object.assign({},{hash:e.hash}),e.urlValidationCode&&(this.smsBodyResponse=Object.assign(this.smsBodyResponse,{urlValidationCode:e.urlValidationCode}))},s.prototype.cancelAction=function(){this.resetFormFields(this.control),this.submittedContactValue={},this.chosenTypeFormOption=e.PoModalPasswordRecoveryType.Email,this.modalType=e.PoModalPasswordRecoveryModalContent.Email,this.type=this.modalPasswordRecoveryTypeAll?e.PoModalPasswordRecoveryType.All:this.type,this.recoveryModalElement.close()},s.prototype.checkFormType=function(t){return t!==e.PoModalPasswordRecoveryType.All?t:e.PoModalPasswordRecoveryType.Email},s.prototype.formReset=function(e){e.markAsPristine(),e.markAsUntouched(),e.updateValueAndValidity()},s.prototype.getEmitValue=function(t){return t===e.PoModalPasswordRecoveryType.SMS?this.phone:this.email},s.prototype.incrementRetryAttempts=function(){this.submittedContactValue.retry=this.submittedContactValue.retry+1||1},s.prototype.openExternalLink=function(e,t){window.open(e+"?token="+t,"_self")},s.prototype.openInternalLink=function(e,t,o){this.router.navigate([e+"/"+t],{queryParams:{token:o}})},s.prototype.pipeModalPhrases=function(){this.type===e.PoModalPasswordRecoveryType.SMS?(this.emailModalPhrases.firstPhrase=this.setPipeArguments(this.literals.recoveryPasswordPhrase,this.literals.sms),this.emailModalPhrases.secondPhrase=this.setPipeArguments(this.literals.supportContact,this.literals.telephone)):(this.emailModalPhrases.firstPhrase=this.setPipeArguments(this.literals.recoveryPasswordPhrase,this.literals.email),this.emailModalPhrases.secondPhrase=this.setPipeArguments(this.literals.supportContact,this.literals.email))},s.prototype.redirectToChangePassword=function(e){var t=e.urlChangePassword;if(t)k(t)?this.openExternalLink(t,e.token):this.openInternalLink(this.urlRecovery,t,e.token);else{this.openInternalLink(this.urlRecovery,"changePassword",e.token)}},s.prototype.resetFormFields=function(e){this.formReset(e),this.email=void 0,this.phone=void 0,this.smsCode=void 0},s.prototype.setActions=function(e,t,o,n,i){var r=this;this.primaryAction.action=function(){return e.call(r)},this.primaryAction.label=t,this.secondaryAction.action=function(){return o.call(r)},this.secondaryAction.label=n,this.primaryAction.disabled=i},s.prototype.setEmailModalPhrasesAndActions=function(){this.modalTitle=this.literals.forgotPasswordTitle,this.pipeModalPhrases(),this.modalPasswordRecoveryTypeAll=this.type===e.PoModalPasswordRecoveryType.All,this.setActions(this.submitAction,this.literals.sendButton,this.cancelAction,this.literals.cancelButton,!0)},s.prototype.setRequestEndpoint=function(e){var t=e||"validation";return this.urlRecovery+"/"+t},s.prototype.setPipeArguments=function(e,t){return this.poI18nPipe.transform(e,t)},s.prototype.submitAction=function(){this.modalType===e.PoModalPasswordRecoveryModalContent.Confirmation?this.incrementRetryAttempts():this.formReset(this.control),this.submittedContactValue[this.checkFormType(this.type)]=this.getEmitValue(this.type),this.urlRecovery?this.submitActionRequest(this.submittedContactValue,this.type):this.submit.emit(this.submittedContactValue)},s.prototype.submitActionRequest=function(t,o){var n=this,i=o===e.PoModalPasswordRecoveryType.SMS?{type:"sms"}:void 0;this.passwordRecoverySubscription=this.poModalPasswordRecoveryService.post(this.urlRecovery,t,i).subscribe((function(t){o!==e.PoModalPasswordRecoveryType.Email&&o!==e.PoModalPasswordRecoveryType.All||204!==t.status?o===e.PoModalPasswordRecoveryType.SMS&&200===t.status&&(n.assignSmsResponse(t.body),n.openSmsCode()):n.openConfirmation()}))},s.prototype.submitSmsCodeAction=function(){this.submittedCodeValue.code=this.smsCode,this.urlRecovery?(this.submittedCodeValue=Object.assign(this.submittedCodeValue,{hash:this.smsBodyResponse.hash}),this.submitSmsCodeRequest(this.submittedCodeValue)):this.codeSubmit.emit(this.submittedCodeValue),this.resetFormFields(this.control)},s.prototype.submitSmsCodeRequest=function(e){var t=this;this.smsCodeSubscription=this.poModalPasswordRecoveryService.post(this.setRequestEndpoint(this.smsBodyResponse.urlValidationCode),e).subscribe((function(e){200===e.status&&(t.completed(),t.redirectToChangePassword(e.body))}),(function(e){t.codeError=e.error.message,t.openSmsCode()}))},s.ctorParameters=function(){return[{type:r.Router},{type:i.PoI18nPipe},{type:L}]},d([t.ViewChild("emailForm"),h("design:type",n.NgForm)],s.prototype,"emailForm",void 0),d([t.ViewChild("recoveryModal",{static:!0}),h("design:type",i.PoModalComponent)],s.prototype,"recoveryModalElement",void 0),d([t.ViewChild("smsCodeForm"),h("design:type",n.NgForm)],s.prototype,"smsCodeForm",void 0),s=d([t.Component({selector:"po-modal-password-recovery",template:'<po-modal\n  #recoveryModal\n  p-hide-close\n  p-size="auto"\n  [ngSwitch]="modalType"\n  [p-primary-action]="primaryAction"\n  [p-secondary-action]="secondaryAction"\n  [p-title]="modalTitle"\n>\n  <div class="po-modal-password-recovery-wrapper">\n    <div *ngSwitchCase="\'email\'" class="po-modal-password-recovery-content po-row">\n      <div class="po-modal-password-recovery-text po-md-12 po-mb-1">\n        {{ emailModalPhrases.firstPhrase }}\n      </div>\n      <div class="po-mb-2 po-md-12">\n        <form #emailForm="ngForm">\n          <div *ngIf="modalPasswordRecoveryTypeAll">\n            <po-radio-group\n              name="type"\n              [(ngModel)]="chosenTypeFormOption"\n              [p-options]="typeFormOptions"\n              (p-change)="getInputType($event)"\n            >\n            </po-radio-group>\n          </div>\n\n          <div class="po-mt-1">\n            <po-email\n              *ngIf="type === \'email\' || type === \'all\'"\n              name="email"\n              [(ngModel)]="email"\n              p-required\n              [p-label]="literals.insertEmail"\n              (p-change-model)="formModelChangesCheck(emailForm)"\n            >\n            </po-email>\n\n            <po-input\n              *ngIf="type === \'sms\'"\n              name="sms"\n              [(ngModel)]="phone"\n              p-icon="po-icon-telephone"\n              p-required\n              [p-label]="literals.insertPhone"\n              [p-mask]="phoneMask"\n              [p-maxlength]="maxLength"\n              [p-minlength]="minLength"\n              (p-change-model)="formModelChangesCheck(emailForm)"\n            >\n            </po-input>\n          </div>\n\n          <div class="po-field-container-bottom po-field-container-error-container">\n            <po-modal-password-recovery-error-message\n              *ngIf="invalidEmail && control.dirty"\n              [p-text]="type === \'sms\' ? literals.phoneErrorMessagePhrase : literals.emailErrorMessagePhrase"\n            >\n            </po-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class="po-modal-password-recovery-text po-md-12">\n        {{ emailModalPhrases.secondPhrase }}\n        <span *ngIf="contactEmail">\n          {{ literals.prepositionIn }}\n          <a class="po-modal-password-recovery-link" href="mailto:{{ contactEmail }}" target="_self">\n            {{ contactEmail }}\n          </a>\n        </span>\n        {{ endpoint }}\n      </div>\n    </div>\n\n    <div #smsCodeModal *ngSwitchCase="\'smsCode\'" class="po-modal-password-recovery-content po-row">\n      <div class="po-modal-password-recovery-text po-md-12 po-mb-1">{{ literals.sentSmsCodePhrase }}</div>\n      <div class="po-mb-2 po-md-12">\n        <form #smsCodeForm="ngForm">\n          <po-input\n            name="sms"\n            [(ngModel)]="smsCode"\n            p-maxlength="11"\n            p-minlength="11"\n            p-required\n            [p-label]="literals.insertCode"\n            [p-mask]="codeMask"\n            (p-change-model)="formModelChangesCheck(smsCodeForm)"\n          >\n          </po-input>\n          <div class="po-field-container-bottom po-field-container-error-container">\n            <po-modal-password-recovery-error-message\n              *ngIf="invalidEmail"\n              [p-text]="smsCodeErrorMessage || this.literals.smsCodeErrorMessagePhrase"\n            >\n            </po-modal-password-recovery-error-message>\n            <po-modal-password-recovery-error-message *ngIf="showCustomCodeError" [p-text]="codeError">\n            </po-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class="po-modal-password-recovery-text po-md-12">\n        {{ literals.sendAgainPhrase }}\n        <span class="po-modal-password-recovery-link" (click)="resendSmsCode()">{{ literals.sendAgain }}</span>\n      </div>\n    </div>\n\n    <div #confirmationModal *ngSwitchCase="\'confirmation\'" class="po-modal-password-recovery-content po-row">\n      <img class="po-modal-password-recovery-user-image po-mb-2" src="./assets/images/email-sent.svg" />\n      <div class="po-modal-password-recovery-text">\n        {{ literals.emailSentConfirmationPhrase }}\n      </div>\n    </div>\n  </div>\n</po-modal>\n'}),h("design:paramtypes",[r.Router,i.PoI18nPipe,L])],s)}(x),N=function(){function e(){}return d([t.Input("p-text"),h("design:type",String)],e.prototype,"text",void 0),e=d([t.Component({selector:"po-modal-password-recovery-error-message",template:'<div class="po-field-container-bottom-text-error po-field-container-error-item">\n  <span class="po-icon po-icon-exclamation"></span>\n  <span class="po-field-container-error-text">{{ text }}</span>\n</div>\n'})],e)}(),_=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,i.PoFieldModule,i.PoModalModule],declarations:[j,N],exports:[j,N],providers:[i.PoI18nPipe,L]})],e)}(),B=function(){function e(){this._showSelectLanguage=!1,this.selectLanguageOptions=[{label:"English",value:"en"},{label:"Español",value:"es"},{label:"Português",value:"pt"},{label:"Pусский",value:"ru"}],this.selectedLanguage=new t.EventEmitter}return Object.defineProperty(e.prototype,"logo",{get:function(){return this._logo},set:function(e){this._logo=A(e,"string")&&e.trim()?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryLogo",{get:function(){return this._secondaryLogo},set:function(e){this._secondaryLogo=A(e,"string")&&e.trim()?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectLanguage",{get:function(){return this._showSelectLanguage},set:function(e){this._showSelectLanguage=S(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.selectedLanguageOption=b()},e.prototype.onChangeLanguage=function(){this.selectedLanguage.emit(this.selectedLanguageOption)},d([t.Input("p-background"),h("design:type",String)],e.prototype,"background",void 0),d([t.Input("p-hide-logo"),h("design:type",Boolean)],e.prototype,"hideLogo",void 0),d([t.Input("p-highlight-info"),h("design:type",String)],e.prototype,"highlightInfo",void 0),d([t.Input("p-logo"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"logo",null),d([t.Input("p-secondary-logo"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"secondaryLogo",null),d([t.Input("p-show-select-language"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],e.prototype,"showSelectLanguage",null),d([t.Output("p-selected-language"),h("design:type",t.EventEmitter)],e.prototype,"selectedLanguage",void 0),e=d([t.Component({selector:"po-page-background",template:'<div class="po-page-login-container">\n  <div class="po-page-login-panel">\n    <img\n      *ngIf="logo"\n      class="po-page-background-main-logo"\n      [class.po-page-background-hide-logo]="hideLogo"\n      alt="main-logo"\n      [src]="logo"\n    />\n\n    <div class="po-page-login-body">\n      <div class="po-page-login-panel-content">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div class="po-page-background-footer po-sm-12">\n      <po-divider class="po-page-background-footer-mobile-only"></po-divider>\n\n      <div class="po-page-background-footer-content">\n        <div *ngIf="showSelectLanguage" class="po-page-background-footer-select">\n          <po-select\n            name="selectedLanguageOption"\n            [(ngModel)]="selectedLanguageOption"\n            [p-options]="selectLanguageOptions"\n            (p-change)="onChangeLanguage()"\n          >\n          </po-select>\n        </div>\n\n        <div\n          class="po-page-background-secondary-logo"\n          [ngClass]="\n            showSelectLanguage\n              ? \'po-page-background-secondary-logo-right\'\n              : \'po-page-background-secondary-logo-centered\'\n          "\n        >\n          <img\n            *ngIf="secondaryLogo"\n            class="po-page-background-secondary-logo-image"\n            alt="secondary-logo"\n            [src]="secondaryLogo"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div\n    *ngIf="background"\n    [ngClass]="background ? \'po-page-login-highlight-image\' : \'po-page-login-highlight-image-off\'"\n    [style.background-image]="\'url(\' + background + \')\'"\n  >\n    <div class="po-page-login-highlight-text">\n      <div class="po-font-display">{{ highlightInfo }}</div>\n    </div>\n  </div>\n</div>\n'})],e)}(),U=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoDividerModule,i.PoFieldModule],declarations:[B],exports:[B]})],e)}();(D=e.PoPageBlockedUserReason||(e.PoPageBlockedUserReason={})).None="none",D.ExceededAttempts="exceededAttempts",D.ExpiredPassword="expiredPassword";var q,V=e.PoPageBlockedUserReason.None,H={attempts:5,days:90,hours:24},W=function(){function o(){this._params=u({},H),this._reason=e.PoPageBlockedUserReason.None,this._urlBack="/"}return Object.defineProperty(o.prototype,"params",{get:function(){return this._params},set:function(e){if(e instanceof Object){var t=Object.keys(e),o=u({},H);t.forEach((function(t){o[t]=e[t]})),this._params=o}else this._params=u({},H)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"reason",{get:function(){return this._reason},set:function(t){this._reason=Object.values(e.PoPageBlockedUserReason).includes(t)?t:V},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"urlBack",{get:function(){return this._urlBack},set:function(e){this._urlBack=e},enumerable:!0,configurable:!0}),d([t.Input("p-contact-email"),h("design:type",String)],o.prototype,"contactEmail",void 0),d([t.Input("p-contact-phone"),h("design:type",String)],o.prototype,"contactPhone",void 0),d([t.Input("p-params"),h("design:type",Object),h("design:paramtypes",[Object])],o.prototype,"params",null),d([t.Input("p-logo"),h("design:type",String)],o.prototype,"logo",void 0),d([t.Input("p-reason"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"reason",null),d([t.Input("p-secondary-logo"),h("design:type",String)],o.prototype,"secondaryLogo",void 0),d([t.Input("p-url-back"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"urlBack",null),o=d([t.Directive()],o)}(),z={en:{primaryButton:"Back to home screen"},es:{primaryButton:"Volver al inicio"},pt:{primaryButton:"Voltar para o início"},ru:{primaryButton:"Перейти к началу страницы"}},J=function(e){function o(t,o){var n=e.call(this)||this;return n.activatedRoute=t,n.router=o,n.literals=u(u({},z.pt),z[b()]),n}return l(o,e),o.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},o.prototype.navigateTo=function(e){k(e)?window.open(e):this.router.navigate([e||"/"])},o.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},o.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.contactEmail=this.checkingForMetadataProperty(e,"contactEmail")||this.contactEmail,this.contactPhone=this.checkingForMetadataProperty(e,"contactPhone")||this.contactPhone,this.reason=this.checkingForMetadataProperty(e,"reason")||this.reason,this.urlBack=this.checkingForMetadataProperty(e,"urlBack")||this.urlBack)},o.ctorParameters=function(){return[{type:r.ActivatedRoute},{type:r.Router}]},o=d([t.Component({selector:"po-page-blocked-user",template:'<div class="po-page-blocked-user-wrapper">\n  <div class="po-page-background-wrap">\n    <po-page-background [p-hide-logo]="true" [p-logo]="logo" [p-secondary-logo]="secondaryLogo">\n      <po-page-blocked-user-reason [p-params]="params" [p-reason]="reason"> </po-page-blocked-user-reason>\n\n      <div class="po-page-blocked-user-mobile-bottom-alignment">\n        <po-page-blocked-user-contacts [p-email]="contactEmail" [p-phone]="contactPhone">\n        </po-page-blocked-user-contacts>\n\n        <div class="po-row">\n          <po-button\n            class="po-lg-12 po-sm-12 po-page-blocked-user-button"\n            p-type="primary"\n            [p-label]="literals.primaryButton"\n            (p-click)="navigateTo(urlBack)"\n          >\n          </po-button>\n        </div>\n      </div>\n    </po-page-background>\n  </div>\n</div>\n'}),h("design:paramtypes",[r.ActivatedRoute,r.Router])],o)}(W),K=function(){function e(e){this.changeDetector=e,this.overflowItem=!0}return Object.defineProperty(e.prototype,"email",{get:function(){return this._email},set:function(e){this._email=e,this.checkContactItemWidth()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phone",{get:function(){return this._phone},set:function(e){this._phone=e,this.checkContactItemWidth()},enumerable:!0,configurable:!0}),e.prototype.checkContactItemWidth=function(){if(this.overflowItem=!0,this.phone&&this.email){this.changeDetector.detectChanges();var e=this.phoneItem.nativeElement.offsetWidth,t=this.mailItem.nativeElement.offsetWidth,o=this.contactGroup.nativeElement.offsetWidth/2-16;this.overflowItem=e>o||t>o-16}},e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},d([t.Input("p-email"),h("design:type",String),h("design:paramtypes",[String])],e.prototype,"email",null),d([t.Input("p-phone"),h("design:type",String),h("design:paramtypes",[String])],e.prototype,"phone",null),d([t.ViewChild("contactGroup",{static:!0}),h("design:type",t.ElementRef)],e.prototype,"contactGroup",void 0),d([t.ViewChild("mailItem",{static:!0}),h("design:type",t.ElementRef)],e.prototype,"mailItem",void 0),d([t.ViewChild("phoneItem",{static:!0}),h("design:type",t.ElementRef)],e.prototype,"phoneItem",void 0),e=d([t.Component({selector:"po-page-blocked-user-contacts",template:'<div #contactGroup class="po-page-blocked-user-contact-group po-row po-mb-3">\n  <div\n    class="po-page-blocked-user-contact-item"\n    [class.po-invisible]="!phone"\n    [ngClass]="overflowItem ? \'po-md-12\' : \'po-md-6\'"\n  >\n    <a\n      class="po-page-blocked-user-link po-clickable"\n      [class.po-page-blocked-user-contact-content-inline]="overflowItem"\n      href="tel:{{ phone }}"\n      target="_self"\n    >\n      <div class="po-page-blocked-user-contact-group-item">\n        <span class="po-page-blocked-user-contact-icon po-icon po-icon-telephone po-pr-1"></span>\n        <div #phoneItem class="po-page-blocked-user-contact-text po-font-text">{{ phone }}</div>\n      </div>\n    </a>\n  </div>\n  <div\n    class="po-page-blocked-user-contact-item po-page-blocked-user-contact-mail"\n    [class.po-invisible]="!email"\n    [ngClass]="overflowItem ? \'po-md-12\' : \'po-md-6\'"\n  >\n    <a\n      class="po-page-blocked-user-link po-clickable"\n      [class.po-page-blocked-user-contact-content-inline]="overflowItem"\n      href="mailto:{{ email }}"\n      target="_self"\n    >\n      <div class="po-page-blocked-user-contact-group-item">\n        <span class="po-page-blocked-user-contact-icon po-icon po-icon-mail po-pr-1"></span>\n        <div #mailItem class="po-page-blocked-user-contact-text po-font-text">{{ email }}</div>\n      </div>\n    </a>\n  </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush}),h("design:paramtypes",[t.ChangeDetectorRef])],e)}(),Y={none:{pt:{title:"Opa!",firstPhrase:"Tivemos que bloquear essa tela temporariamente.",secondPhrase:"Mas não se preocupe! Basta fazer seu login novamente."},en:{title:"Oops!",firstPhrase:"We had to temporarily block this screen.",secondPhrase:"But do not worry! Just sign in again."},es:{title:"Opa!",firstPhrase:"Tuvimos que bloquear esta pantalla temporalmente.",secondPhrase:"¡Pero no se preocupe! Sólo tienes que iniciar sesión de nuevo."}},exceededAttempts:{pt:{title:"Opa!",firstPhrase:"Para sua segurança, após {0} tentativa(s) de senha seu usuário fica bloqueado e não pode ser acessado em {1} hora(s) :( ",secondPhrase:"Isso é para evitar que hackers invadam sua conta.",thirdPhrase:"Mas não se preocupe! Se você for o dono da conta e apenas esqueceu sua senha, basta entrar em contato com o suporte."},en:{title:"Oops!",firstPhrase:"For your security, after {0} attempt(s) of password\n        your user gets blocked and can not be accessed in {1} hour(s) :(",secondPhrase:"This is to prevent hackers from hacking into your account.",thirdPhrase:"But do not worry! If you are the owner of the account and just forgot your password, just contact support."},es:{title:"Opa!",firstPhrase:"Para su seguridad, después de {0} intento(s) de contraseña\n        su usuario queda bloqueado y no puede ser accedido en {1} hora(s) :(",secondPhrase:"Esto es para evitar que los hackers invadan su cuenta.",thirdPhrase:"¡Pero no se preocupe! Si usted es el dueño de la cuenta\n        y acaba de olvidar su contraseña, simplemente póngase en contacto con el soporte."}},expiredPassword:{pt:{title:"Opa! Sua senha expirou",firstPhrase:"A cada {0} dia(s) é preciso criar uma nova senha por questão de segurança. Após esses {0} dia(s) seu acesso é bloqueado :(",secondPhrase:"Mas não se preocupe! Basta entrar em contato com o administrador do sistema."},en:{title:"Oops! Your Password has expired",firstPhrase:"Every {0} day(s) you need to create a new password for security reasons.\n        After these {0} day(s) your access is blocked :(",secondPhrase:"But do not worry! Just contact your system administrator."},es:{title:"Opa! Su contraseña ha caducado",firstPhrase:"Cada {0} día(s) es necesario crear una nueva contraseña por razones de seguridad.\n        Después de estos {0} día(s) su acceso está bloqueado :(",secondPhrase:"¡Pero no se preocupe! Sólo tienes que ponerse en contacto con el administrador del sistema."}}},G=function(){function e(e){this.changeDetector=e}return e.prototype.ngOnChanges=function(e){(e.reason||e.params)&&this.getLiterals()},e.prototype.ngOnInit=function(){this.getLiterals()},e.prototype.getImageByReasonType=function(){var e;switch(this.reason){case"none":e="big-lock";break;case"exceededAttempts":e="blocked-user";break;case"expiredPassword":e="expired"}return"./assets/images/"+e+".svg"},e.prototype.getParams=function(){this.literalParams="expiredPassword"===this.reason?[this.params.days,this.params.days]:[this.params.attempts,this.params.hours]},e.prototype.getLiterals=function(){this.getParams(),this.literals=u(u({},Y[this.reason].pt),Y[this.reason][b()]),this.changeDetector.detectChanges()},e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},d([t.Input("p-params"),h("design:type",Object)],e.prototype,"params",void 0),d([t.Input("p-reason"),h("design:type",String)],e.prototype,"reason",void 0),e=d([t.Component({selector:"po-page-blocked-user-reason",template:'<div class="po-page-blocked-user-reason-content">\n  <img class="po-page-blocked-user-image po-mb-3" [src]="getImageByReasonType()" />\n  <div class="po-page-blocked-user-header po-mb-md-3 po-row">\n    <div class="po-md-12">{{ literals?.title }}</div>\n  </div>\n  <div class="po-page-blocked-user-text po-font-text po-row">\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12 po-page-blocked-user-text-bold">\n      {{ literals?.firstPhrase | poI18n: literalParams }}\n    </div>\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12">{{ literals?.secondPhrase }}</div>\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12" *ngIf="literals?.thirdPhrase">{{ literals?.thirdPhrase }}</div>\n  </div>\n</div>\n'}),h("design:paramtypes",[t.ChangeDetectorRef])],e)}(),$=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,r.RouterModule,i.PoModule,U],declarations:[J,K,G],exports:[J,K,G]})],e)}(),Q=function(){function e(){this._hideCurrentPassword=!1,this._requirements=[],this._urlHome="/",this.urlBack="/",this.submit=new t.EventEmitter}return Object.defineProperty(e.prototype,"hideCurrentPassword",{get:function(){return this._hideCurrentPassword},set:function(e){this._hideCurrentPassword=S(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e,A(e,"string")&&(this.recoveryUrlType=k(e)?"externalLink":"internalLink")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requirements",{get:function(){return this._requirements},set:function(e){this._requirements=e||[],this.showRequirements=this._requirements.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlHome",{get:function(){return this._urlHome},set:function(e){this._urlHome=e,this.modalAction.action=this.navigateTo.bind(this,this.urlHome)},enumerable:!0,configurable:!0}),d([t.Input("p-hide-current-password"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],e.prototype,"hideCurrentPassword",null),d([t.Input("p-logo"),h("design:type",String)],e.prototype,"logo",void 0),d([t.Input("p-recovery"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"recovery",null),d([t.Input("p-requirements"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"requirements",null),d([t.Input("p-secondary-logo"),h("design:type",String)],e.prototype,"secondaryLogo",void 0),d([t.Input("p-token"),h("design:type",String)],e.prototype,"token",void 0),d([t.Input("p-url-back"),h("design:type",String)],e.prototype,"urlBack",void 0),d([t.Input("p-url-new-password"),h("design:type",String)],e.prototype,"urlNewPassword",void 0),d([t.Input("p-url-home"),h("design:type",String),h("design:paramtypes",[String])],e.prototype,"urlHome",null),d([t.Output("p-submit"),h("design:type",t.EventEmitter)],e.prototype,"submit",void 0),e=d([t.Directive()],e)}(),X={en:{backButton:"Back",confirmPassword:"Confirm password",createNewPassword:"Create new password",createNewPasswordPhrase:"Protect your account with a personal password created by you",currentPassword:"Current password",enterSystemButton:"Enter the system",forgotPassword:"Forgot your password?",newPassword:"New password",passwordSuccessfullyCreated:"Password successfully created!",passwordSuccessfullyUpdated:"Password successfully updated!",requirements:"Password requirements",safetyTips:"Safety tips!",safetyTipsFirst:"is used in other accounts;",safetyTipsPhrase:"Avoid a password that:",safetyTipsSecond:"has personal information like your name, nickname or family names;",safetyTipsThird:'that uses obvious sequences like "123" or obvious words like "password";',saveButton:"Save"},es:{backButton:"Volver",confirmPassword:"Confirmar seña",createNewPassword:"Crear nueva contraseña",createNewPasswordPhrase:"Proteger su cuenta con una contraseña personal creada por usted",currentPassword:"Contraseña actual",enterSystemButton:"Entrar en el sistema",forgotPassword:"¿Olvidaste tu contraseña?",newPassword:"Nueva contraseña",passwordSuccessfullyCreated:"Contraseña creada correctamente!",passwordSuccessfullyUpdated:"Contraseña correctamente actualizada!",requirements:"Requisitos de contraseña",safetyTips:"Consejos de seguridad!",safetyTipsFirst:"se utilice en otras cuentas;",safetyTipsPhrase:"Evite una contraseña que:",safetyTipsSecond:"utiliza información personal como su nombre, apellido o nombre de familia;",safetyTipsThird:'utilice secuencias muy obvias como "1234" o "abcd" o palabras obvias como "contraseña";',saveButton:"Guardar"},pt:{backButton:"Voltar",confirmPassword:"Confirmar senha",createNewPassword:"Criar nova senha",createNewPasswordPhrase:"Proteja sua conta com uma senha pessoal criada por você",currentPassword:"Senha atual",enterSystemButton:"Entrar no sistema",forgotPassword:"Esqueceu sua senha?",newPassword:"Nova senha",passwordSuccessfullyCreated:"Senha criada com sucesso!",passwordSuccessfullyUpdated:"Senha alterada com sucesso!",requirements:"Requisitos de senha",safetyTips:"Dicas de segurança!",safetyTipsFirst:"seja usada em outras contas;",safetyTipsPhrase:"Evite uma senha que:",safetyTipsSecond:"usa informações pessoais como seu nome, apelido ou nome de familiares;",safetyTipsThird:'use sequências muito óbvias como "1234" ou "abcd" ou palavras óbvias como “senha”;',saveButton:"Salvar"},ru:{backButton:"возвращение",confirmPassword:"Подтвердите пароль",createNewPassword:"Создать новый пароль",createNewPasswordPhrase:"Защитите свой аккаунт с помощью личного пароля.",currentPassword:"Текущий пароль",enterSystemButton:"Вход в систему",forgotPassword:"Забыли пароль?",newPassword:"Новый пароль",passwordSuccessfullyCreated:"Пароль успешно создан!",passwordSuccessfullyUpdated:"Пароль успешно изменен!",requirements:"Требования к паролю",safetyTips:"Советы по безопасности!",safetyTipsFirst:"использоваться на других счетах;",safetyTipsPhrase:"Избегайте пароля, который:",safetyTipsSecond:"использует личную информацию, такую ​​как ваше имя, фамилию или фамилию;",safetyTipsThird:'используйте очень очевидные строки, такие как "1234" или "abcd", или такие очевидные слова, как "пароль";',saveButton:"экономить"}},Z=function(){function e(e){this.http=e}return e.prototype.post=function(e,t){return this.http.post(e,t,{observe:"response"})},e.ctorParameters=function(){return[{type:s.HttpClient}]},e=d([t.Injectable(),h("design:paramtypes",[s.HttpClient])],e)}(),ee=function(o){function s(e,t,n,i,r,s){var a=o.call(this)||this;return a.activatedRoute=e,a.route=t,a.router=n,a.service=i,a.poComponentInjector=r,a.literals=u(u({},X.pt),X[b()]),a.componentRef=null,a.modalAction={action:a.navigateTo.bind(a,a.urlHome),label:a.literals.enterSystemButton},a.parentRef=function(e){return e._hostView?e._hostView[8]:e._view.component}(s),a}return l(s,o),s.prototype.ngAfterViewInit=function(){this.urlNewPassword&&this.subscribeToTokenParameter()},s.prototype.ngOnDestroy=function(){this.newPasswordSubscription&&this.newPasswordSubscription.unsubscribe()},s.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},s.prototype.navigateTo=function(e){k(e)?window.open(e):this.router.navigate([e||"/"])},s.prototype.onForgotPasswordClick=function(e){A(e,"function")?e():this.createModalPasswordRecoveryComponent(e)},s.prototype.onLoginSubmit=function(){var e=this.getLoginForm();this.urlNewPassword?this.postUrlNewPassword(e):this.submit&&this.submit.observers.length&&this.emitSubmit(e)},s.prototype.openConfirmation=function(){this.modal.open()},s.prototype.validatePassword=function(){var e=this,t=this.passwordForm.form.controls,o=t.confirmPassword,n=t.newPassword;this.newPassword?this.confirmPassword?this.newPassword&&this.confirmPassword&&this.newPassword!==this.confirmPassword?this.setFormErrors({equalPassword:!0},[n,o]):this.setFormErrors(null,[o,n]):this.setFormErrors({required:!0},[o]):this.setFormErrors({required:!0},[n]),this.requirements.length&&this.requirements.find((function(t){return!1===e.validateRequirement(t)}))&&this.setFormErrors({requirement:!0},[n])},s.prototype.validateRequirement=function(e){return"function"==typeof e.status?e.status.call(this.parentRef,this.newPassword):e.status},s.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},s.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.urlNewPassword=this.checkingForMetadataProperty(e,"serviceApi")||this.urlNewPassword,this.recovery=this.checkingForMetadataProperty(e,"recovery")||this.recovery,this.hideCurrentPassword=this.checkingForMetadataProperty(e,"hideCurrentPassword")||this.hideCurrentPassword)},s.prototype.createModalPasswordRecoveryComponent=function(t){var o=this;this.componentRef&&this.poComponentInjector.destroyComponentInApplication(this.componentRef),this.componentRef=this.poComponentInjector.createComponentInApplication(j),this.componentRef.instance.recovery=t.url,this.componentRef.instance.contactEmail=t.contactMail,this.componentRef.instance.phoneMask=t.phoneMask,this.componentRef.instance.type=t.type||e.PoModalPasswordRecoveryType.Email,this.componentRef.changeDetectorRef.detectChanges(),setTimeout((function(){o.componentRef.instance.open()}))},s.prototype.emitSubmit=function(e){this.submit.emit(e)},s.prototype.getLoginForm=function(){return{currentPassword:this.currentPassword,newPassword:this.newPassword}},s.prototype.postUrlNewPassword=function(e){var t=this;e.token=this.token,this.service.post(this.urlNewPassword,e).subscribe((function(e){204===e.status&&t.openConfirmation()}))},s.prototype.setFormErrors=function(e,t){t.forEach((function(t){t.setErrors(e)}))},s.prototype.subscribeToTokenParameter=function(){var e=this;this.route.queryParams.subscribe((function(t){var o=t.token;o&&(e.token=o)}))},s.ctorParameters=function(){return[{type:r.ActivatedRoute},{type:r.ActivatedRoute},{type:r.Router},{type:Z},{type:i.PoComponentInjectorService},{type:t.ViewContainerRef}]},d([t.ViewChild(i.PoModalComponent,{static:!0}),h("design:type",i.PoModalComponent)],s.prototype,"modal",void 0),d([t.ViewChild("pageChangePassword",{read:t.ViewContainerRef,static:!0}),h("design:type",t.ViewContainerRef)],s.prototype,"pageChangePassword",void 0),d([t.ViewChild("passwordForm",{read:n.NgForm,static:!0}),h("design:type",n.NgForm)],s.prototype,"passwordForm",void 0),s=d([t.Component({selector:"po-page-change-password",template:'<div class="po-page-change-password-wrapper" #pageChangePassword>\n  <div class="po-page-change-password-container">\n    <po-page-background class="po-page-change-password" [p-logo]="logo" [p-secondary-logo]="secondaryLogo">\n      <div class="po-page-blocked-user-header po-row">\n        <div class="po-md-12">{{ literals.createNewPassword }}</div>\n        <div class="po-md-12 po-text-center po-font-text">\n          {{ literals.createNewPasswordPhrase }}\n        </div>\n      </div>\n\n      <form #passwordForm="ngForm">\n        <div class="po-row po-mt-3 po-mt-sm-1">\n          <div class="po-md-6" [ngClass]="{ \'po-offset-md-3 po-offset-lg-3 po-offset-xl-3\': !showRequirements }">\n            <div *ngIf="!hideCurrentPassword">\n              <po-password\n                name="currentPassword"\n                [(ngModel)]="currentPassword"\n                p-required\n                [p-label]="literals.currentPassword"\n              >\n              </po-password>\n            </div>\n            <div *ngIf="!hideCurrentPassword && recovery" class="po-text-center po-mb-sm-1 po-mb-2">\n              <a\n                *ngIf="recoveryUrlType === \'internalLink\'"\n                class="po-font-text-bold po-page-change-password-forgot-password"\n                [routerLink]="recovery"\n              >\n                {{ literals.forgotPassword }}\n              </a>\n              <a\n                *ngIf="recoveryUrlType === \'externalLink\'"\n                class="po-font-text-bold po-page-change-password-forgot-password"\n                [href]="recovery"\n              >\n                {{ literals.forgotPassword }}\n              </a>\n              <a\n                *ngIf="!recoveryUrlType"\n                class="po-font-text-bold po-page-change-password-forgot-password po-clickable"\n                (click)="onForgotPasswordClick(recovery)"\n              >\n                {{ literals.forgotPassword }}\n              </a>\n            </div>\n            <div>\n              <po-password\n                name="newPassword"\n                [(ngModel)]="newPassword"\n                p-required\n                [p-label]="literals.newPassword"\n                (p-change-model)="validatePassword()"\n              >\n              </po-password>\n            </div>\n            <div>\n              <po-password\n                name="confirmPassword"\n                [(ngModel)]="confirmPassword"\n                p-required\n                [p-label]="literals.confirmPassword"\n                (p-change-model)="validatePassword()"\n              >\n              </po-password>\n            </div>\n          </div>\n          <div *ngIf="showRequirements" class="po-md-6 po-page-change-password-required-container">\n            <po-container>\n              <ul class="po-page-change-password-required-list">\n                <li class="po-page-change-password-required-item">\n                  <p class="po-mb-1 po-font-text-bold po-page-change-password-required-title">\n                    {{ literals?.requirements }}\n                  </p>\n                </li>\n                <li *ngFor="let requirement of requirements" class="po-page-change-password-required-item">\n                  <span\n                    class="po-icon po-page-change-password-required-icon"\n                    [ngClass]="\n                      validateRequirement(requirement)\n                        ? \'po-icon-ok po-page-change-password-required-ok\'\n                        : \'po-icon-minus po-page-change-password-required-minus\'\n                    "\n                  >\n                  </span>\n                  <p class="po-page-change-password-required-text po-font-text">\n                    {{ requirement.requirement }}\n                  </p>\n                </li>\n              </ul>\n            </po-container>\n          </div>\n        </div>\n      </form>\n\n      <po-divider class="po-sm-12"></po-divider>\n\n      <div class="po-page-change-password-tips po-row">\n        <div class="po-md-2 po-mr-3">\n          <img\n            class="po-page-change-password-lock-image po-mb-3"\n            alt="Blocked user image"\n            src="./assets/images/big-lock.svg"\n          />\n        </div>\n        <div class="po-md-9 po-page-change-password-tips-text">\n          <div class="po-font-text-bold po-pb-1">{{ literals.safetyTips }}</div>\n          <div class="po-font-text-small">\n            <div class="po-row po-pb-1">{{ literals.safetyTipsPhrase }}</div>\n            <div class="po-row po-pb-1">• {{ literals.safetyTipsFirst }}</div>\n            <div class="po-row po-pb-1">• {{ literals.safetyTipsSecond }}</div>\n            <div class="po-row po-pb-1">• {{ literals.safetyTipsThird }}</div>\n          </div>\n        </div>\n      </div>\n\n      <div class="po-page-change-password-buttons po-row">\n        <po-divider class="po-sm-12 po-mobile-only"></po-divider>\n\n        <po-button\n          *ngIf="!hideCurrentPassword"\n          class="po-sm-6 po-mb-sm-1"\n          [p-label]="literals.backButton"\n          (p-click)="navigateTo(urlBack)"\n        >\n        </po-button>\n\n        <po-button\n          [ngClass]="hideCurrentPassword ? \'po-md-12\' : \'po-sm-6\'"\n          p-type="primary"\n          [p-disabled]="passwordForm.invalid"\n          [p-label]="literals.saveButton"\n          (p-click)="onLoginSubmit()"\n        >\n        </po-button>\n      </div>\n    </po-page-background>\n  </div>\n</div>\n\n<po-modal\n  [p-primary-action]="modalAction"\n  p-hide-close\n  p-size="auto"\n  [p-title]="hideCurrentPassword ? literals.passwordSuccessfullyCreated : literals.passwordSuccessfullyUpdated"\n>\n  <div class="po-text-center">\n    <img\n      alt="Blocked user image"\n      class="po-page-change-password-lock-image po-mb-3"\n      src="./assets/images/success.svg"\n    />\n  </div>\n</po-modal>\n'}),h("design:paramtypes",[r.ActivatedRoute,r.ActivatedRoute,r.Router,Z,i.PoComponentInjectorService,t.ViewContainerRef])],s)}(Q),te=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoModule,U],declarations:[ee],providers:[Z],exports:[ee]})],e)}(),oe={en:{errorRenderPage:"Error loading page",notPossibleLoadMetadataPage:"The page metadata could not be loaded"},es:{errorRenderPage:"Error al cargar la página",notPossibleLoadMetadataPage:"No se pudieron cargar los metadatos de la página."},pt:{errorRenderPage:"Erro ao carregar a página",notPossibleLoadMetadataPage:"Não foi possível carregar os metadados da página"},ru:{errorRenderPage:"Ошибка загрузки страницы",notPossibleLoadMetadataPage:"Не удалось загрузить метаданные страницы"}},ne=function(){function e(e,t,o){this.http=e,this.notification=t,this.endpoint="/",this.headers=new s.HttpHeaders({"X-PO-SCREEN-LOCK":"true"}),this.language=o.getShortLanguage()}return e.prototype.configServiceApi=function(e){void 0===e&&(e={}),this.endpoint=e.endpoint,this.metadata=e.metadata||this.metadata},e.prototype.getMetadata=function(e){var t=this;void 0===e&&(e="list");var o=this.endpoint+"-"+e+"-metadata",n=JSON.parse(localStorage.getItem(o))||{},i=(this.metadata||this.endpoint+"/metadata")+"?type="+e+"&version="+(n.version||"");return this.http.get(i).pipe(p.map((function(e){return void 0!==e.version&&e.version===n.version?n:(localStorage.setItem(o,JSON.stringify(e)),u(u({},n),e))})),p.catchError((function(e){if(Object.keys(n).length)return a.of(n);var o=oe[t.language],i=o.errorRenderPage,r=o.notPossibleLoadMetadataPage;return t.notification.warning(r),a.merge(a.of({title:i}),a.throwError(e))})))},e.prototype.deleteResource=function(e,t){return this.http.delete(this.getLocalEndPoint(t,!0)+"/"+e,{headers:this.headers})},e.prototype.deleteResources=function(e,t){return this.http.request("delete",""+this.getLocalEndPoint(t),{headers:this.headers,body:e})},e.prototype.getResources=function(e,t){return this.http.get(this.getLocalEndPoint(t),{headers:this.headers,params:e})},e.prototype.getResource=function(e,t){return this.http.get(this.getLocalEndPoint(t,!0)+"/"+e,{headers:this.headers})},e.prototype.createResource=function(e,t){return this.http.post(""+this.getLocalEndPoint(t),e,{headers:this.headers})},e.prototype.updateResource=function(e,t,o){return this.http.put(this.getLocalEndPoint(o,!0)+"/"+e,t,{headers:this.headers})},e.prototype.getLocalEndPoint=function(e,t){return void 0===t&&(t=!1),e=null!=e?e:this.endpoint,t&&(e="/"===e?"":e),e},e.ctorParameters=function(){return[{type:s.HttpClient},{type:i.PoNotificationService},{type:i.PoLanguageService}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient),t.ɵɵinject(i.PoNotificationService),t.ɵɵinject(i.PoLanguageService))},token:e,providedIn:"root"}),e=d([t.Injectable({providedIn:"root"}),h("design:paramtypes",[s.HttpClient,i.PoNotificationService,i.PoLanguageService])],e)}(),ie=function(){function e(e){this.http=e,this.headers=new s.HttpHeaders({"X-PO-SCREEN-LOCK":"true"})}return e.prototype.beforeBack=function(e){return this.executeAction({action:e})},e.prototype.beforeEdit=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.beforeRemove=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.executeAction=function(e){var t=e.action,o=e.resource,n=void 0===o?{}:o,i=e.id;if(!t)return a.of({});if("string"==typeof t){var r=i?t+"/"+i:t;return this.http.post(r,n,{headers:this.headers})}return a.of(t(i,n))},e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=d([t.Injectable({providedIn:"root"}),h("design:paramtypes",[s.HttpClient])],e)}(),re=function(){function e(e){this.http=e}return e.prototype.getCustomOptions=function(e,t,o){var n=this;return this.createObservable(e).pipe(p.map((function(e){return n.mergePageOptions(t,e,o)})))},e.prototype.changeOriginalOptionsToNewOptions=function(e,t){Object.keys(t).forEach((function(o){var n=t[o];if(void 0!==e[o]){if(Array.isArray(n))return void(e[o]=y(n));if("number"==typeof n||"string"==typeof n||"boolean"==typeof n)return void(e[o]=n);null!==n&&"object"==typeof n&&(e[o]=u({},n))}}))},e.prototype.createObservable=function(e){return"string"==typeof e?this.http.post(e,{}):a.from(Promise.resolve(e()))},e.prototype.mergePageOptions=function(e,t,o){var n=this,i=o.schema.reduce((function(o,i){var r;return u(u({},o),((r={})[i.nameProp]=n.createNewProp(i,e,t),r))}),{});return Object.keys(i).forEach((function(e){return void 0===i[e]&&delete i[e]})),i},e.prototype.createNewProp=function(e,t,o){var n;return e.merge?this.mergeOptions(t[e.nameProp],o[e.nameProp],e.keyForMerge):null!==(n=o[e.nameProp])&&void 0!==n?n:t[e.nameProp]},e.prototype.mergeOptions=function(e,t,o){if(e||t)return t?e?e instanceof Array&&t instanceof Array?this.mergeOptionsArray(e,t,o):u(u({},e),t):t:e},e.prototype.mergeOptionsArray=function(e,t,o){var n=t.filter((function(t){return!e.find((function(e){return e[o]===t[o]}))}));return y(e.map((function(e){var n=t.find((function(t){return e[o]===t[o]}))||e;return u(u({},e),n)})),n)},e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=d([t.Injectable({providedIn:"root"}),h("design:paramtypes",[s.HttpClient])],e)}(),se={en:{pageActionEdit:"Edit",pageActionRemove:"Delete",pageActionBack:"Back",confirmRemoveTitle:"Confirm delete",confirmRemoveMessage:"Are you sure you want to delete this record? You can not undo this action.",removeNotificationSuccess:"Item deleted successfully.",registerNotFound:"Register not found."},es:{pageActionEdit:"Editar",pageActionRemove:"Borrar",pageActionBack:"Regreso",confirmRemoveTitle:"Confirmar la exclusión",confirmRemoveMessage:"¿Está seguro de que desea eliminar este registro? No puede deshacer esta acción.",removeNotificationSuccess:"Elemento eliminado con éxito.",registerNotFound:"Registro no encontrado."},pt:{pageActionEdit:"Editar",pageActionRemove:"Excluir",pageActionBack:"Voltar",confirmRemoveTitle:"Confirmar exclusão",confirmRemoveMessage:"Tem certeza de que deseja excluir esse registro? Você não poderá desfazer essa ação.",removeNotificationSuccess:"Item excluído com sucesso.",registerNotFound:"Registro não encontrado."}},ae=function(){function e(e,t,o,n,i,r,s){this.router=e,this.activatedRoute=t,this.poNotification=o,this.poDialogService=n,this.poPageDynamicService=i,this.poPageDynamicDetailActionsService=r,this.poPageCustomizationService=s,this.subscriptions=[],this._actions={},this._autoRouter=!1,this._duplicates=[],this._fields=[],this._keys=[],this._pageActions=[],this.literals=u(u({},se.pt),se[b()]),this.model={},this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"actions",{get:function(){return u({},this._actions)},set:function(e){this._actions=this.isObject(e)?e:{},this._pageActions=this.getPageActions(this._actions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=S(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?y(e):[],this._keys=this.getKeysByFields(this.fields),this._duplicates=this.getDuplicatesByFields(this.fields)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.loadDataFromAPI()},e.prototype.ngOnDestroy=function(){this.subscriptions&&this.subscriptions.forEach((function(e){e.unsubscribe()}))},Object.defineProperty(e.prototype,"duplicates",{get:function(){return y(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return y(this._keys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageActions",{get:function(){return y(this._pageActions)},enumerable:!0,configurable:!0}),e.prototype.remove=function(e,t){var o=this,n=this.formatUniqueKey(this.model);this.subscriptions.push(this.poPageDynamicDetailActionsService.beforeRemove(t,n,u({},this.model)).pipe(p.switchMap((function(t){var i,r,s=null!==(i=null==t?void 0:t.newUrl)&&void 0!==i?i:e;return null===(r=null==t?void 0:t.allowAction)||void 0===r||r?"string"==typeof s?o.executeRemove(s,n):(s(n,u({},o.model)),a.EMPTY):a.of({})}))).subscribe())},e.prototype.confirmRemove=function(e,t){var o={title:this.literals.confirmRemoveTitle,message:this.literals.confirmRemoveMessage,confirm:this.remove.bind(this,e,t)};this.poDialogService.confirm(o)},e.prototype.executeRemove=function(e,t){var o=this;return this.poPageDynamicService.deleteResource(t).pipe(p.map((function(){o.poNotification.success(o.literals.removeNotificationSuccess),o.navigateTo({path:e})})))},e.prototype.formatUniqueKey=function(e){return E(C(e,this.keys)).join("|")},e.prototype.goBack=function(e){var t=this;this.subscriptions.push(this.poPageDynamicDetailActionsService.beforeBack(this.actions.beforeBack).subscribe((function(o){return t.executeBackAction(e,null==o?void 0:o.allowAction,null==o?void 0:o.newUrl)})))},e.prototype.executeBackAction=function(e,t,o){if("boolean"!=typeof t||t)return void 0===e||"boolean"==typeof e?window.history.back():"string"==typeof e||o?this.router.navigate([o||e]):e()},e.prototype.loadData=function(e){var t=this;return this.poPageDynamicService.getResource(e).pipe(p.tap((function(e){e?t.model=e:t.setUndefinedToModelAndActions()})),p.catchError((function(e){return t.setUndefinedToModelAndActions(),a.throwError(e)})))},e.prototype.setUndefinedToModelAndActions=function(){this.model=void 0,this.actions=void 0},e.prototype.getMetadata=function(e,t){var o=this;return e?this.poPageDynamicService.getMetadata("detail").pipe(p.tap((function(e){o.autoRouter=e.autoRouter||o.autoRouter,o.actions=e.actions||o.actions,o.breadcrumb=e.breadcrumb||o.breadcrumb,o.fields=e.fields||o.fields,o.title=e.title||o.title})),p.switchMap((function(){return o.loadOptionsOnInitialize(t)}))):this.loadOptionsOnInitialize(t)},e.prototype.navigateTo=function(e,t){var o=this;void 0===t&&(t=!1),this.router.navigate([e.url||e.path],{queryParams:e.params}).catch((function(){!t&&o.autoRouter&&(o.router.config.unshift({path:e.path,component:e.component,data:{serviceApi:o.serviceApi,autoRouter:!0}}),o.navigateTo(e,!0))}))},e.prototype.openEdit=function(e){var t=this,o=this.formatUniqueKey(this.model);this.subscriptions.push(this.poPageDynamicDetailActionsService.beforeEdit(this.actions.beforeEdit,o,this.model).pipe(p.switchMap((function(n){return t.executeEditAction(e,n,o)}))).subscribe())},e.prototype.executeEditAction=function(e,t,o){var n,i,r=null!==(n=null==t?void 0:t.newUrl)&&void 0!==n?n:e;return null===(i=null==t?void 0:t.allowAction)||void 0===i||i?("string"==typeof r?this.openEditUrl(r):r(o,u({},this.model)),a.EMPTY):a.of({})},e.prototype.openEditUrl=function(e){var t=this.resolveUrl(this.model,e);this.navigateTo({path:e,url:t})},e.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},e.prototype.getPageActions=function(e){void 0===e&&(e={});var t=[];return e.edit&&t.push({label:this.literals.pageActionEdit,action:this.openEdit.bind(this,e.edit)}),e.remove&&t.push({label:this.literals.pageActionRemove,action:this.confirmRemove.bind(this,e.remove,this.actions.beforeRemove)}),(void 0===e.back||e.back)&&t.push({label:this.literals.pageActionBack,action:this.goBack.bind(this,e.back)}),t},e.prototype.getKeysByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.key})).map((function(e){return e.property}))},e.prototype.getDuplicatesByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},e.prototype.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)},e.prototype.loadDataFromAPI=function(){var e=this.activatedRoute.snapshot.data,t=e.serviceApi,o=e.serviceMetadataApi,n=e.serviceLoadApi,i=this.activatedRoute.snapshot.params.id,r=n||this.onLoad;this.serviceApi=t||this.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi,metadata:o});var s=this.getMetadata(t,r),p=this.loadData(i);this.subscriptions.push(a.concat(s,p).subscribe())},e.prototype.loadOptionsOnInitialize=function(e){var t=this;return e?this.getPoDynamicPageOptions(e).pipe(p.tap((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))):a.EMPTY},e.prototype.getPoDynamicPageOptions=function(e){var t={fields:this.fields,actions:this.actions,breadcrumb:this.breadcrumb,title:this.title};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"fields",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0},{nameProp:"breadcrumb"},{nameProp:"title"}]})},e.ctorParameters=function(){return[{type:r.Router},{type:r.ActivatedRoute},{type:i.PoNotificationService},{type:i.PoDialogService},{type:ne},{type:ie},{type:re}]},d([t.Input("p-actions"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"actions",null),d([t.Input("p-auto-router"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],e.prototype,"autoRouter",null),d([t.Input("p-breadcrumb"),h("design:type",Object)],e.prototype,"breadcrumb",void 0),d([t.Input("p-fields"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"fields",null),d([t.Input("p-load"),h("design:type",Object)],e.prototype,"onLoad",void 0),d([t.Input("p-title"),h("design:type",String)],e.prototype,"title",void 0),d([t.Input("p-service-api"),h("design:type",String)],e.prototype,"serviceApi",void 0),e=d([t.Component({selector:"po-page-dynamic-detail",template:'<po-page-default [p-actions]="pageActions" [p-breadcrumb]="breadcrumb" [p-title]="title">\n  <ng-container *ngIf="model; then viewFieldsTemplate; else registerNotFoundTemplate"> </ng-container>\n</po-page-default>\n\n<ng-template #registerNotFoundTemplate>\n  <po-widget>\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.registerNotFound }}\n    </span>\n  </po-widget>\n</ng-template>\n\n<ng-template #viewFieldsTemplate>\n  <po-dynamic-view [p-fields]="fields" [p-value]="model"> </po-dynamic-view>\n</ng-template>\n',providers:[ne,ie]}),h("design:paramtypes",[r.Router,r.ActivatedRoute,i.PoNotificationService,i.PoDialogService,ne,ie,re])],e)}(),pe=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,s.HttpClientModule],providers:[ne]})],e)}(),ce=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoDynamicModule,i.PoModalModule,i.PoPageModule,i.PoWidgetModule,pe],declarations:[ae],exports:[ae]})],e)}(),le=function(){function e(e){this.http=e,this.headers=new s.HttpHeaders({"X-PO-SCREEN-LOCK":"true"})}return e.prototype.beforeCancel=function(e){return this.executeAction({action:e})},e.prototype.beforeSave=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.beforeSaveNew=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.executeAction=function(e){var t=e.action,o=e.resource,n=void 0===o?{}:o,i=e.id;if(!t)return a.of({});if("string"==typeof t){var r=i?t+"/"+i:t;return this.http.post(r,n,{headers:this.headers})}return a.of(t(n,i))},e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=d([t.Injectable({providedIn:"root"}),h("design:paramtypes",[s.HttpClient])],e)}(),ue={en:{cancelConfirmMessage:"Are you sure you want to cancel this operation?",detailActionNew:"New",pageActionCancel:"Cancel",pageActionSave:"Save",pageActionSaveNew:"Save and new",registerNotFound:"Register not found.",saveNotificationSuccessSave:"Resource successfully saved.",saveNotificationSuccessUpdate:"Resource successfully updated.",saveNotificationWarning:"Form must be filled out correctly."},es:{cancelConfirmMessage:"Está seguro de que desea cancelar esta operación?",detailActionNew:"Nuevo",pageActionCancel:"Cancelar",pageActionSave:"Guardar",pageActionSaveNew:"Guardar y nuevo",registerNotFound:"Registro no encontrado.",saveNotificationSuccessSave:"Recurso salvo con éxito.",saveNotificationSuccessUpdate:"Recurso actualizado con éxito.",saveNotificationWarning:"El formulario debe llenarse correctamente."},pt:{cancelConfirmMessage:"Tem certeza que deseja cancelar esta operação?",detailActionNew:"Novo",pageActionCancel:"Cancelar",pageActionSave:"Salvar",pageActionSaveNew:"Salvar e novo",registerNotFound:"Registro não encontrado.",saveNotificationSuccessSave:"Recurso salvo com sucesso.",saveNotificationSuccessUpdate:"Recurso atualizado com sucesso.",saveNotificationWarning:"Formulário precisa ser preenchido corretamente."}},de=function(){function e(e,t,o,n,i,r,s){this.router=e,this.activatedRoute=t,this.poNotification=o,this.poDialogService=n,this.poPageDynamicService=i,this.poPageCustomizationService=r,this.poPageDynamicEditActionsService=s,this.subscriptions=[],this._actions={},this._autoRouter=!1,this._controlFields=[],this._detailFields=[],this._duplicates=[],this._fields=[],this._keys=[],this._pageActions=[],this.literals=u(u({},ue.pt),ue[b()]),this.model={},this.detailActions={},this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"actions",{get:function(){return u({},this._actions)},set:function(e){this._actions=this.isObject(e)?e:{},this._pageActions=this.getPageActions(this._actions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=S(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?y(e):[],this._keys=this.getKeysByFields(this._fields),this._duplicates=this.getDuplicatesByFields(this._fields),this._controlFields=this.getControlFields(this._fields),this._detailFields=this.getDetailFields(this._fields)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.loadDataFromAPI()},e.prototype.ngOnDestroy=function(){this.subscriptions&&this.subscriptions.forEach((function(e){e.unsubscribe()}))},e.prototype.loadDataFromAPI=function(){var e=this.activatedRoute.snapshot.data,t=e.serviceApi,o=e.serviceMetadataApi,n=e.serviceLoadApi,i=this.activatedRoute.snapshot.params.id,r=this.activatedRoute.snapshot.queryParams.duplicate,s=n||this.onLoad;this.serviceApi=t||this.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi,metadata:o});var p=this.getMetadata(t,i,s),c=this.loadData(i,r);this.subscriptions.push(a.concat(p,c).subscribe())},Object.defineProperty(e.prototype,"duplicates",{get:function(){return y(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return y(this._keys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageActions",{get:function(){return y(this._pageActions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlFields",{get:function(){return this._controlFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detailFields",{get:function(){return this._detailFields},enumerable:!0,configurable:!0}),e.prototype.detailActionNew=function(){this.gridDetail.insertRow()},e.prototype.cancel=function(e,t){this.dynamicForm&&this.dynamicForm.form.dirty?this.poDialogService.confirm({message:this.literals.cancelConfirmMessage,title:this.literals.pageActionCancel,confirm:this.goBack.bind(this,e,t)}):this.goBack(e,t)},e.prototype.formatUniqueKey=function(e){return E(C(e,this.keys)).join("|")},e.prototype.goBack=function(e,t){var o=this;this.subscriptions.push(this.poPageDynamicEditActionsService.beforeCancel(t).subscribe((function(t){o.executeBackAction(e,null==t?void 0:t.allowAction,null==t?void 0:t.newUrl)})))},e.prototype.executeBackAction=function(e,t,o){if("boolean"!=typeof t||t)return void 0===e||"boolean"==typeof e?window.history.back():"string"==typeof e||o?this.router.navigate([o||e]):e()},e.prototype.loadData=function(e,t){var o=this;if(!e){try{this.model=t?JSON.parse(t):{}}catch(e){this.model={}}return a.EMPTY}return this.poPageDynamicService.getResource(e).pipe(p.tap((function(e){return o.model=e})),p.catchError((function(e){return o.model=void 0,o.actions=void 0,o._pageActions=[],a.throwError(e)})))},e.prototype.loadOptionsOnInitialize=function(e){var t=this;return e?this.getPoDynamicPageOptions(e).pipe(p.tap((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))):a.EMPTY},e.prototype.getPoDynamicPageOptions=function(e){var t={fields:this.fields,actions:this.actions,breadcrumb:this.breadcrumb,title:this.title};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"fields",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0},{nameProp:"breadcrumb"},{nameProp:"title"}]})},e.prototype.getMetadata=function(e,t,o){var n=this,i=t?"edit":"create";return e?this.poPageDynamicService.getMetadata(i).pipe(p.tap((function(e){n.autoRouter=e.autoRouter||n.autoRouter,n.actions=e.actions||n.actions,n.breadcrumb=e.breadcrumb||n.breadcrumb,n.fields=e.fields||n.fields,n.title=e.title||n.title})),p.switchMap((function(){return n.loadOptionsOnInitialize(o)}))):this.loadOptionsOnInitialize(o)},e.prototype.navigateTo=function(e){if(e){var t=this.resolveUrl(this.model,e);this.router.navigate([t])}else window.history.back()},e.prototype.resolveUniqueKey=function(e){return this.activatedRoute.snapshot.params.id?this.formatUniqueKey(e):void 0},e.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},e.prototype.executeSave=function(e){var t=this;return this.saveOperation().pipe(p.tap((function(o){t.poNotification.success(o),t.navigateTo(e)})))},e.prototype.updateModel=function(e){void 0===e&&(e={});var t=this.dynamicForm.form;O(this.keys,e),this.model=u(u({},this.model),e),t.form.patchValue(this.model)},e.prototype.saveOperation=function(){if(this.dynamicForm.form.invalid)return this.poNotification.warning(this.literals.saveNotificationWarning),a.EMPTY;var e=this.activatedRoute.snapshot.params.id,t=e?this.literals.saveNotificationSuccessUpdate:this.literals.saveNotificationSuccessSave;return(e?this.poPageDynamicService.updateResource(e,this.model):this.poPageDynamicService.createResource(this.model)).pipe(p.map((function(){return t})))},e.prototype.save=function(e,t){var o=this;void 0===t&&(t="beforeSave");var n={beforeSave:this.executeSave.bind(this),beforeSaveNew:this.executeSaveNew.bind(this)},i=this.resolveUniqueKey(this.model);this.subscriptions.push(this.poPageDynamicEditActionsService[t](this.actions[t],i,u({},this.model)).pipe(p.switchMap((function(r){var s,p,c=null!==(s=null==r?void 0:r.newUrl)&&void 0!==s?s:e,l=null===(p=null==r?void 0:r.allowAction)||void 0===p||p;return o.updateModel(null==r?void 0:r.resource),l?"string"==typeof c?n[t](c):(c(u({},o.model),i),a.EMPTY):a.of({})}))).subscribe())},e.prototype.executeSaveNew=function(e){var t=this,o=this.activatedRoute.snapshot.params.id;return this.saveOperation().pipe(p.tap((function(n){o?(t.poNotification.success(n),t.navigateTo(e)):(t.poNotification.success(n),t.model={},t.dynamicForm.form.reset())})))},e.prototype.getKeysByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.key})).map((function(e){return e.property}))},e.prototype.getControlFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return"detail"!==e.type}))},e.prototype.getDetailFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return"detail"===e.type}))},e.prototype.getDuplicatesByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},e.prototype.getPageActions=function(e){void 0===e&&(e={});var t=[{label:this.literals.pageActionSave,action:this.save.bind(this,e.save)}];return e.saveNew&&t.push({label:this.literals.pageActionSaveNew,action:this.save.bind(this,e.saveNew,"beforeSaveNew")}),(void 0===e.cancel||e.cancel)&&t.push({label:this.literals.pageActionCancel,action:this.cancel.bind(this,e.cancel,this.actions.beforeCancel)}),t},e.prototype.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)},e.ctorParameters=function(){return[{type:r.Router},{type:r.ActivatedRoute},{type:i.PoNotificationService},{type:i.PoDialogService},{type:ne},{type:re},{type:le}]},d([t.Input("p-actions"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"actions",null),d([t.Input("p-auto-router"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],e.prototype,"autoRouter",null),d([t.Input("p-breadcrumb"),h("design:type",Object)],e.prototype,"breadcrumb",void 0),d([t.Input("p-fields"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"fields",null),d([t.Input("p-service-api"),h("design:type",String)],e.prototype,"serviceApi",void 0),d([t.Input("p-title"),h("design:type",String)],e.prototype,"title",void 0),d([t.Input("p-load"),h("design:type",Object)],e.prototype,"onLoad",void 0),d([t.ViewChild("dynamicForm"),h("design:type",i.PoDynamicFormComponent)],e.prototype,"dynamicForm",void 0),d([t.ViewChild("gridDetail"),h("design:type",i.PoGridComponent)],e.prototype,"gridDetail",void 0),e=d([t.Component({selector:"po-page-dynamic-edit",template:'<po-page-default [p-actions]="pageActions" [p-breadcrumb]="breadcrumb" [p-title]="title">\n  <ng-container *ngIf="model; then formFieldsTemplate; else registerNotFoundTemplate"> </ng-container>\n</po-page-default>\n\n<ng-template #registerNotFoundTemplate>\n  <po-widget>\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.registerNotFound }}\n    </span>\n  </po-widget>\n</ng-template>\n\n<ng-template #formFieldsTemplate>\n  <po-dynamic-form #dynamicForm [p-fields]="controlFields" [p-value]="model"> </po-dynamic-form>\n\n  <div *ngIf="detailFields.length > 0" class="po-sm-12">\n    <po-divider [p-label]="detailFields[0].divider"></po-divider>\n\n    <div class="po-row po-mb-2">\n      <po-button [p-label]="literals.detailActionNew" (p-click)="detailActionNew()" p-small></po-button>\n    </div>\n\n    <po-grid\n      #gridDetail\n      [p-row-actions]="detailActions"\n      [p-columns]="detailFields[0].detail.columns"\n      [p-data]="model[detailFields[0].property]"\n    >\n    </po-grid>\n  </div>\n</ng-template>\n',providers:[ne]}),h("design:paramtypes",[r.Router,r.ActivatedRoute,i.PoNotificationService,i.PoDialogService,ne,re,le])],e)}(),he=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoButtonModule,i.PoDividerModule,i.PoDynamicModule,i.PoGridModule,i.PoPageModule,i.PoWidgetModule,pe],declarations:[de],exports:[de]})],e)}(),me=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,s.HttpClientModule],providers:[re]})],e)}(),ge={en:{title:"Advanced search",cancelLabel:"Cancel",confirmLabel:"Apply filters"},es:{title:"Búsqueda avanzada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},pt:{title:"Busca avançada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},ru:{title:"Расширенный поиск",cancelLabel:"отменить",confirmLabel:"Применить фильтры"}},fe=function(){function e(e){var o=this;this._filters=[],this.filter={},this.language="pt",this.primaryAction={action:function(){var e=o.getValuesFromForm();o.searchEvent.emit(e),o.poModal.close()},label:this.literals.confirmLabel},this.secondaryAction={action:function(){o.poModal.close()},label:this.literals.cancelLabel},this.keepFilters=!1,this.searchEvent=new t.EventEmitter,this.language=e.getShortLanguage()}return Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=Array.isArray(e)?y(e):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"literals",{get:function(){return this._literals||ge[this.language]},set:function(e){this._literals=e instanceof Object&&!(e instanceof Array)?u(u(u({},ge.pt),ge[this.language]),e):ge[this.language],this.primaryAction.label=this.literals.confirmLabel,this.secondaryAction.label=this.literals.cancelLabel},enumerable:!0,configurable:!0}),e.prototype.getValuesFromForm=function(){var e=this;return Object.keys(this.filter).forEach((function(t){void 0!==e.filter[t]&&""!==e.filter[t]||delete e.filter[t]})),this.filter},e.ctorParameters=function(){return[{type:i.PoLanguageService}]},d([t.ViewChild(i.PoModalComponent,{static:!0}),h("design:type",i.PoModalComponent)],e.prototype,"poModal",void 0),d([t.Input("p-filters"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"filters",null),d([i.InputBoolean(),t.Input("p-keep-filters"),h("design:type",Boolean)],e.prototype,"keepFilters",void 0),d([t.Input("p-literals"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"literals",null),d([t.Output("p-search-event"),h("design:type",Object)],e.prototype,"searchEvent",void 0),e=d([t.Directive(),h("design:paramtypes",[i.PoLanguageService])],e)}(),ye=function(e){function o(t){return e.call(this,t)||this}return l(o,e),o.prototype.open=function(){this.filter=this.keepFilters?this.getInitialValuesFromFilter(this.filters):{},this.poModal.open()},o.prototype.getInitialValuesFromFilter=function(e){return e.reduce((function(e,t){var o;return Object.assign(e,((o={})[t.property]=t.initValue,o))}),{})},o.ctorParameters=function(){return[{type:i.PoLanguageService}]},d([t.ViewChild(i.PoDynamicFormComponent,{static:!0}),h("design:type",i.PoDynamicFormComponent)],o.prototype,"poDynamicForm",void 0),o=d([t.Component({selector:"po-advanced-filter",template:'<po-modal\n  p-hide-close\n  [p-primary-action]="primaryAction"\n  [p-secondary-action]="secondaryAction"\n  [p-title]="literals.title"\n>\n  <po-dynamic-form [p-fields]="filters" [p-value]="filter"> </po-dynamic-form>\n</po-modal>\n'}),h("design:paramtypes",[i.PoLanguageService])],o)}(fe),ve={en:{disclaimerGroupTitle:"Displaying results filtered by:",filterTitle:ge.en.title,filterCancelLabel:ge.en.cancelLabel,filterConfirmLabel:ge.en.confirmLabel,quickSearchLabel:"Quick search:",searchPlaceholder:"Search"},es:{disclaimerGroupTitle:"Presentando resultados filtrados por:",filterTitle:ge.es.title,filterCancelLabel:ge.es.cancelLabel,filterConfirmLabel:ge.es.confirmLabel,quickSearchLabel:"Búsqueda rápida:",searchPlaceholder:"Buscar"},pt:{disclaimerGroupTitle:"Apresentando resultados filtrados por:",filterTitle:ge.pt.title,filterCancelLabel:ge.pt.cancelLabel,filterConfirmLabel:ge.pt.confirmLabel,quickSearchLabel:"Pesquisa rápida:",searchPlaceholder:"Pesquisar"},ru:{disclaimerGroupTitle:"Отображение результатов, отфильтрованных по:",filterTitle:ge.ru.title,filterCancelLabel:ge.ru.cancelLabel,filterConfirmLabel:ge.ru.confirmLabel,quickSearchLabel:"Быстрый поиск:",searchPlaceholder:"исследование"}},be=function(){function e(e){this._filters=[],this.actions=[],this.breadcrumb={items:[]},this.keepFilters=!1,this.concatFilters=!1,this.advancedSearch=new t.EventEmitter,this.changeDisclaimers=new t.EventEmitter,this.quickSearch=new t.EventEmitter,this.language=e.getShortLanguage()}return Object.defineProperty(e.prototype,"literals",{get:function(){return this._literals||ve[this.language]},set:function(e){this._literals=e instanceof Object&&!(e instanceof Array)?u(u(u({},ve.pt),ve[this.language]),e):ve[this.language],this.setAdvancedFilterLiterals(this.literals)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=Array.isArray(e)?y(e):[],JSON.stringify(this._filters)!==JSON.stringify(this.previousFilters)&&(this.onChangeFilters(this.filters),this.previousFilters=y(this._filters))},enumerable:!0,configurable:!0}),e.prototype.setAdvancedFilterLiterals=function(e){this.advancedFilterLiterals={cancelLabel:e.filterCancelLabel,confirmLabel:e.filterConfirmLabel,title:e.filterTitle}},e.ctorParameters=function(){return[{type:i.PoLanguageService}]},d([t.Input("p-actions"),h("design:type",Array)],e.prototype,"actions",void 0),d([t.Input("p-breadcrumb"),h("design:type",Object)],e.prototype,"breadcrumb",void 0),d([t.Input("p-literals"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"literals",null),d([t.Input("p-filters"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"filters",null),d([i.InputBoolean(),t.Input("p-keep-filters"),h("design:type",Boolean)],e.prototype,"keepFilters",void 0),d([i.InputBoolean(),t.Input("p-concat-filters"),h("design:type",Boolean)],e.prototype,"concatFilters",void 0),d([t.Input("p-load"),h("design:type",Object)],e.prototype,"onLoad",void 0),d([t.Input("p-title"),h("design:type",String)],e.prototype,"title",void 0),d([t.Output("p-advanced-search"),h("design:type",t.EventEmitter)],e.prototype,"advancedSearch",void 0),d([t.Output("p-change-disclaimers"),h("design:type",t.EventEmitter)],e.prototype,"changeDisclaimers",void 0),d([t.Output("p-quick-search"),h("design:type",t.EventEmitter)],e.prototype,"quickSearch",void 0),e=d([t.Directive(),h("design:paramtypes",[i.PoLanguageService])],e)}(),Pe=function(e){function o(t,o,n){var i=e.call(this,t)||this;return i.poPageCustomizationService=o,i.changeDetector=n,i._disclaimerGroup={remove:i.onRemoveDisclaimer.bind(i),removeAll:i.onRemoveAllDisclaimers.bind(i),disclaimers:[],title:i.literals.disclaimerGroupTitle},i._filterSettings={action:i.onAction.bind(i),advancedAction:i.onAdvancedAction.bind(i),placeholder:i.literals.searchPlaceholder},i}return l(o,e),Object.defineProperty(o.prototype,"disclaimerGroup",{get:function(){return Object.assign({},this._disclaimerGroup,{title:this.literals.disclaimerGroupTitle})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterSettings",{get:function(){return this._filterSettings.advancedAction=0===this.filters.length?void 0:this.onAdvancedAction.bind(this),Object.assign({},this._filterSettings,{placeholder:this.literals.searchPlaceholder})},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.setAdvancedFilterLiterals(this.literals),this.onLoad&&this.loadOptionsOnInitialize(this.onLoad)},o.prototype.ngOnDestroy=function(){this.loadSubscription&&this.loadSubscription.unsubscribe()},o.prototype.onChangeFilters=function(e){var t=e.filter((function(e){return e.initValue})).reduce((function(e,t){var o;return u(u({},e),((o={})[t.property]=t.initValue,o))}),{});Object.keys(t).length&&this.onAdvancedSearch(t)},o.prototype.onAction=function(e){var t=this,o={property:"search",label:this.literals.quickSearchLabel+" "+e,value:e};this._disclaimerGroup.disclaimers=this.concatFilters?y(t.getDisclaimersWithoutQuickSearch(),[o]):[o],this.quickSearch.observers&&this.quickSearch.observers.length>0&&this.quickSearch.emit(e),this.keepFilters&&!this.concatFilters&&this.filters.forEach((function(e){return delete e.initValue})),this.changeDetector.detectChanges()},o.prototype.onAdvancedAction=function(){this.poAdvancedFilter.open()},o.prototype.onAdvancedSearch=function(e){this._disclaimerGroup.disclaimers=this.setDisclaimers(e),this.setFilters(e),this.advancedSearch.emit(e)},o.prototype.getDisclaimersWithoutQuickSearch=function(){return this._disclaimerGroup.disclaimers.filter((function(e){return"search"!==e.property}))},o.prototype.setFilters=function(e){var t=this.convertToFilters(e);this.filters.forEach((function(e){var o=t.find((function(t){return t.property===e.property}));o?e.initValue=o.value:delete e.initValue}))},o.prototype.convertToFilters=function(e){return Object.entries(e).map((function(e){var t=f(e,2);return{property:t[0],value:t[1]}}))},o.prototype.applyDisclaimerLabelValue=function(e,t){return(Array.isArray(t)?t:[t]).map((function(t){var o=e.options.find((function(e){return e.value===t||e===t}));if(o)return o.label||o.value||o})).join(", ")},o.prototype.formatDate=function(e){var t=parseInt(e.substr(0,4),10),o=parseInt(e.substr(5,2),10),n=parseInt(e.substr(8,2),10);return new Date(t,o-1,n).toLocaleDateString(P())},o.prototype.formatArrayToObjectKeyValue=function(e){var t=e.reduce((function(e,t){var o;return Object.assign(e,((o={})[t.property]=t.value||t.initValue,o))}),{});return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t},o.prototype.getFieldByProperty=function(e,t){return e.find((function(e){return e.property===t}))},o.prototype.getFilterValueToDisclaimer=function(e,t){return e.type===i.PoDynamicFieldType.Date?this.formatDate(t):e.options&&t?this.applyDisclaimerLabelValue(e,t):t},o.prototype.onRemoveDisclaimer=function(e){var t=e.currentDisclaimers;this.emitChangesDisclaimers(t)},o.prototype.emitChangesDisclaimers=function(e){this.changeDisclaimers.emit(e),this.setFilters(this.formatArrayToObjectKeyValue(e))},o.prototype.onRemoveAllDisclaimers=function(){this.emitChangesDisclaimers([])},o.prototype.setDisclaimers=function(e){var t=this,o=[];return Object.keys(e).forEach((function(n){var i,r=t.getFieldByProperty(t.filters,n),s=r.label||""+(i=r.property).charAt(0).toUpperCase()+i.slice(1),a=e[n],p=t.getFilterValueToDisclaimer(r,a);""!==p&&o.push({label:s+": "+p,property:n,value:a})})),o},o.prototype.loadOptionsOnInitialize=function(e){var t=this;this.loadSubscription=this.getPoDynamicPageOptions(e).subscribe((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))},o.prototype.getPoDynamicPageOptions=function(e){var t={title:this.title,actions:this.actions,breadcrumb:this.breadcrumb,filters:this.filters,keepFilters:this.keepFilters,concatFilters:this.concatFilters};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"filters",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0,keyForMerge:"label"},{nameProp:"breadcrumb"},{nameProp:"title"},{nameProp:"keepFilters"},{nameProp:"concatFilters"}]})},o.ctorParameters=function(){return[{type:i.PoLanguageService},{type:re},{type:t.ChangeDetectorRef}]},d([t.ViewChild(ye,{static:!0}),h("design:type",ye)],o.prototype,"poAdvancedFilter",void 0),o=d([t.Component({selector:"po-page-dynamic-search",template:'<po-page-list\n  [p-actions]="actions"\n  [p-breadcrumb]="breadcrumb"\n  [p-disclaimer-group]="disclaimerGroup"\n  [p-filter]="filterSettings"\n  [p-title]="title"\n>\n  <po-advanced-filter\n    [p-filters]="filters"\n    [p-keep-filters]="keepFilters"\n    [p-literals]="advancedFilterLiterals"\n    (p-search-event)="onAdvancedSearch($event)"\n  >\n  </po-advanced-filter>\n\n  <ng-content></ng-content>\n</po-page-list>\n'}),h("design:paramtypes",[i.PoLanguageService,re,t.ChangeDetectorRef])],o)}(be),we=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoDynamicModule,i.PoLanguageModule,i.PoModalModule,i.PoPageModule,me],declarations:[ye,Pe],exports:[Pe]})],e)}(),Se=function(){function e(){this._autoRouter=!1,this._columns=[],this._duplicates=[],this._fields=[],this._filters=[],this._keys=[],this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=S(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?y(e):[],this.setFieldsProperties(this.fields)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns},set:function(e){this._columns=y(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duplicates",{get:function(){return y(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return y(this._filters)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return y(this._keys)},enumerable:!0,configurable:!0}),e.prototype.setFieldsProperties=function(e){this._filters=e.filter((function(e){return!0===e.filter})),this.columns=e.filter((function(e){return void 0===e.visible||!0===e.visible})),this._keys=e.filter((function(e){return!0===e.key})).map((function(e){return e.property})),this._duplicates=e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},d([t.Input("p-auto-router"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],e.prototype,"autoRouter",null),d([t.Input("p-breadcrumb"),h("design:type",Object)],e.prototype,"breadcrumb",void 0),d([t.Input("p-fields"),h("design:type",Array),h("design:paramtypes",[Array])],e.prototype,"fields",null),d([t.Input("p-service-api"),h("design:type",String)],e.prototype,"serviceApi",void 0),d([t.Input("p-title"),h("design:type",String)],e.prototype,"title",void 0),e=d([t.Directive()],e)}(),Ae=function(){function e(e){this.http=e,this.headers=new s.HttpHeaders({"X-PO-SCREEN-LOCK":"true"})}return e.prototype.beforeDuplicate=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.beforeEdit=function(e,t,o){var n=null!=o?o:{};return this.executeAction({action:e,resource:n,id:t})},e.prototype.beforeNew=function(e){return this.executeAction({action:e})},e.prototype.beforeRemove=function(e,t,o){return this.executeAction({action:e,id:t,resource:o})},e.prototype.beforeRemoveAll=function(e,t){return this.executeAction({action:e,resource:t})},e.prototype.beforeDetail=function(e,t,o){return this.executeAction({action:e,id:t,resource:o})},e.prototype.executeAction=function(e){var t=e.action,o=e.resource,n=void 0===o?{}:o,i=e.id;if(!t)return a.of({});if("string"==typeof t){var r=i?t+"/"+i:t;return this.http.post(r,n,{headers:this.headers})}return i?a.of(t(i,n)):a.of(t(n))},e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=d([t.Injectable({providedIn:"root"}),h("design:paramtypes",[s.HttpClient])],e)}(),ke={en:{pageAction:"New",pageActionRemoveAll:"Delete",tableActionView:"View",tableActionEdit:"Edit",tableActionDuplicate:"Duplicate",tableActionDelete:"Delete",confirmRemoveTitle:"Confirm delete",confirmRemoveMessage:"Are you sure you want to delete this record? You can not undo this action.",confirmRemoveAllTitle:"Confirm batch deletion",confirmRemoveAllMessage:"Are you sure you want to delete all these records? You can not undo this action.",loadDataErrorNotification:"Service not found",removeSuccessNotification:"Item deleted successfully",removeAllSuccessNotification:"Items deleted successfully"},es:{pageAction:"Nuevo",pageActionRemoveAll:"Borrar",tableActionView:"Visualizar",tableActionEdit:"Editar",tableActionDuplicate:"Duplicar",tableActionDelete:"Borrar",confirmRemoveTitle:"Confirmar la exclusión",confirmRemoveMessage:"¿Está seguro de que desea eliminar este registro? No puede deshacer esta acción.",confirmRemoveAllTitle:"Confirmar la exclusión por lotes",confirmRemoveAllMessage:"¿Está seguro de que desea eliminar todos estos registros? No puede deshacer esta acción.",loadDataErrorNotification:"Servicio no informado.",removeSuccessNotification:"Elemento eliminado con éxito",removeAllSuccessNotification:"Elementos eliminados con éxito"},pt:{pageAction:"Novo",pageActionRemoveAll:"Excluir",tableActionView:"Visualizar",tableActionEdit:"Editar",tableActionDuplicate:"Duplicar",tableActionDelete:"Excluir",confirmRemoveTitle:"Confirmar exclusão",confirmRemoveMessage:"Tem certeza de que deseja excluir esse registro? Você não poderá desfazer essa ação.",confirmRemoveAllTitle:"Confirmar exclusão em lote",confirmRemoveAllMessage:"Tem certeza de que deseja excluir todos esses registros? Você não poderá desfazer essa ação.",loadDataErrorNotification:"Serviço não informado.",removeSuccessNotification:"Item excluido com sucesso",removeAllSuccessNotification:"Items excluidos com sucesso"}},Ce=function(e){function o(t,o,n,i,r,s,p){var c=e.call(this)||this;return c.router=t,c.activatedRoute=o,c.poDialogService=n,c.poNotification=i,c.poPageDynamicService=r,c.poPageCustomizationService=s,c.poPageDynamicTableActionsService=p,c._actions={},c._pageActions=[],c._tableActions=[],c.page=1,c.params={},c.subscriptions=new a.Subscription,c.hasNext=!1,c.items=[],c.literals=u(u({},ke.pt),ke[b()]),c.keepFilters=!1,c.concatFilters=!1,c}return l(o,e),Object.defineProperty(o.prototype,"actions",{get:function(){return this._actions},set:function(e){this._actions=e&&"object"==typeof e&&Object.keys(e).length>0?e:{},this.setPageActions(this.actions),this.setRemoveAllAction(),this.setTableActions(this.actions)},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.loadDataFromAPI()},o.prototype.ngOnDestroy=function(){this.subscriptions.unsubscribe()},o.prototype.onAdvancedSearch=function(e){this.subscriptions.add(this.loadData(u({page:1},e)).subscribe()),this.params=e,this.keepFilters&&this.updateFilterValue(e)},o.prototype.onChangeDisclaimers=function(e){var t={};e.forEach((function(e){t[e.property]=e.value})),this.onAdvancedSearch(t)},o.prototype.onQuickSearch=function(e){var t=e?{search:e}:{};this.params=this.concatFilters?u(u({},this.params),t):u({},t),this.subscriptions.add(this.loadData(e?u({page:1},this.params):void 0).subscribe())},o.prototype.onSort=function(e){this.sortedColumn=e},o.prototype.showMore=function(){this.subscriptions.add(this.loadData(u({page:++this.page},this.params)).subscribe())},Object.defineProperty(o.prototype,"hasActionRemoveAll",{get:function(){return!!this.actions.removeAll},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pageActions",{get:function(){return y(this._pageActions)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tableActions",{get:function(){return this._tableActions},enumerable:!0,configurable:!0}),o.prototype.confirmRemove=function(e,t,o){var n={title:this.literals.confirmRemoveTitle,message:this.literals.confirmRemoveMessage,confirm:this.remove.bind(this,o,e,t)};this.poDialogService.confirm(n)},o.prototype.confirmRemoveAll=function(e,t){var o={title:this.literals.confirmRemoveAllTitle,message:this.literals.confirmRemoveAllMessage,confirm:this.removeAll.bind(this,e,t)};this.poDialogService.confirm(o)},o.prototype.formatUniqueKey=function(e){return E(C(e,this.keys)).join("|")},o.prototype.getOrderParam=function(e){void 0===e&&(e={type:void 0});var t=e.column,o=e.type;return t?o===i.PoTableColumnSortType.Descending?{order:"-"+t.property}:{order:""+t.property}:{}},o.prototype.loadData=function(e){var t=this;if(void 0===e&&(e={}),!this.serviceApi)return this.poNotification.error(this.literals.loadDataErrorNotification),a.EMPTY;var o=this.getOrderParam(this.sortedColumn),n=u(u(u({},{page:1,pageSize:10}),e),o);return this.poPageDynamicService.getResources(n).pipe(p.tap((function(e){t.items=1===n.page?e.items:y(t.items,e.items),t.page=n.page,t.hasNext=e.hasNext})))},o.prototype.getMetadata=function(e,t){var o=this;return e?this.poPageDynamicService.getMetadata().pipe(p.tap((function(e){o.autoRouter=e.autoRouter||o.autoRouter,o.actions=e.actions||o.actions,o.breadcrumb=e.breadcrumb||o.breadcrumb,o.fields=e.fields||o.fields,o.title=e.title||o.title})),p.switchMap((function(){return o.loadOptionsOnInitialize(t)}))):this.loadOptionsOnInitialize(t)},o.prototype.navigateTo=function(e,t){var o=this;void 0===t&&(t=!1),this.router.navigate([e.url||e.path],{queryParams:e.params}).catch((function(){!t&&o.autoRouter&&(o.router.config.unshift({path:e.path,component:e.component,data:{serviceApi:o.serviceApi,autoRouter:!0}}),o.navigateTo(e,!0))}))},o.prototype.openDetail=function(e,t){var o=this,n=this.formatUniqueKey(t);this.subscriptions.add(this.poPageDynamicTableActionsService.beforeDetail(this.actions.beforeDetail,n,t).subscribe((function(i){return o.executeDetail(e,i,n,t)})))},o.prototype.executeDetail=function(e,t,o,n){var i=null!=t?t:{},r="boolean"!=typeof i.allowAction||i.allowAction,s=i.newUrl;if(r&&e){if(s){var a=this.getPathFromNewUrl(s,o);return this.navigateTo({path:a})}if("string"==typeof e){var p=this.resolveUrl(n,e);this.navigateTo({path:e,url:p,component:ae})}else e(o,n)}},o.prototype.getPathFromNewUrl=function(e,t){return e.includes(":id")?e.replace(/:id/g,t):e},o.prototype.openDuplicate=function(e,t){var o=this,n=this.formatUniqueKey(t),i=O(this.keys,C(t,this.duplicates));this.subscriptions.add(this.poPageDynamicTableActionsService.beforeDuplicate(this.actions.beforeDuplicate,n,i).subscribe((function(t){return o.executeDuplicate(e,t,i)})))},o.prototype.executeDuplicate=function(e,t,o){var n,i=null!=t?t:{},r="boolean"!=typeof i.allowAction||i.allowAction,s=i.resource,a=null!==(n=i.newUrl)&&void 0!==n?n:e;if(r&&e)return"object"==typeof s&&null!==s&&(o=O(this.keys,s)),"string"==typeof a?this.navigateTo({path:a,params:{duplicate:JSON.stringify(o)}}):a(o)},o.prototype.openEdit=function(e,t){var o=this,n=this.formatUniqueKey(t);this.subscriptions.add(this.poPageDynamicTableActionsService.beforeEdit(this.actions.beforeEdit,n,t).pipe(p.switchMap((function(i){return o.executeEditAction(e,i,t,n)}))).subscribe())},o.prototype.executeEditAction=function(e,t,o,n){var i,r,s=null!==(i=null==t?void 0:t.newUrl)&&void 0!==i?i:e;if(!(null===(r=null==t?void 0:t.allowAction)||void 0===r||r))return a.EMPTY;if("string"==typeof s)this.openEditUrl(s,o);else{var p=s(n,o);"object"==typeof p&&null!==p&&this.modifyUITableItem(o,O(this.keys,p))}return a.EMPTY},o.prototype.openEditUrl=function(e,t){var o=this.resolveUrl(t,e);this.navigateTo({path:e,url:o})},o.prototype.modifyUITableItem=function(e,t){var o=this.items.findIndex((function(t){return t===e}));this.items[o]=u(u({},e),t)},o.prototype.openNew=function(e){var t=this;this.subscriptions.add(this.poPageDynamicTableActionsService.beforeNew(this.actions.beforeNew).subscribe((function(o){return t.executeNew(e,o)})))},o.prototype.executeNew=function(e,t){var o=null!=t?t:{},n="boolean"!=typeof o.allowAction||o.allowAction,i=o.newUrl;if(n&&e)return i?this.navigateTo({path:i}):"string"==typeof e?this.navigateTo({path:e}):e()},o.prototype.remove=function(e,t,o){var n=this,i=this.formatUniqueKey(e);this.subscriptions.add(this.poPageDynamicTableActionsService.beforeRemove(o,i,e).pipe(p.switchMap((function(o){return n.deleteAction(e,t,o)}))).subscribe())},o.prototype.deleteAction=function(e,t,o){var n=this,i=o||{},r=i.allowAction,s=i.newUrl;if(null==r||r){var c=this.formatUniqueKey(e),l=this.returnResourcesKeys([e]);return"boolean"==typeof t||s?this.poPageDynamicService.deleteResource(c,s).pipe(p.map((function(){return n.removeFromUI(l,n.literals.removeSuccessNotification)}))):a.of(t(c,e)).pipe(p.tap((function(e){var t=null!=e&&e;n.removeFromUI(l,n.literals.removeSuccessNotification,t)})))}return a.of({})},o.prototype.removeFromUI=function(e,t,o){void 0===o&&(o=!0),!0===o&&(null==e?void 0:e.length)&&(this.removeLocalItems(e),this.poNotification.success(t))},o.prototype.removeAll=function(e,t){var o=this,n=this.getSelectedItemsKeysToRemove();this.subscriptions.add(this.poPageDynamicTableActionsService.beforeRemoveAll(t,n).pipe(p.switchMap((function(t){return o.deleteAllAction(e,t,n)}))).subscribe())},o.prototype.getSelectedItemsKeysToRemove=function(){var e=this.items.filter((function(e){return e.$selected}));if(0!==e.length)return this.returnResourcesKeys(e)},o.prototype.returnResourcesKeys=function(e){return t=e,o=this.keys,void 0===t&&(t=[]),void 0===o&&(o=[]),t.map((function(e){return C(e,o)}));var t,o},o.prototype.deleteAllAction=function(e,t,o){var n=this,i=null!=t?t:{},r=i.allowAction,s=i.newUrl,c=i.resources,l=null!=c?c:o;return(null==r||r)&&Array.isArray(l)?"boolean"==typeof e||s?this.poPageDynamicService.deleteResources(l,s).pipe(p.tap((function(){n.removeFromUI(l,n.literals.removeAllSuccessNotification)}))):a.of(e(l)).pipe(p.tap((function(e){return n.removeFromUI(e,n.literals.removeSuccessNotification)}))):a.of({})},o.prototype.removeLocalItems=function(e){var t=this;void 0===e&&(e=[]),e.length&&(this.items=this.items.filter((function(o){var n=t.formatUniqueKey(o);return!e.find((function(e){return E(e).join("|")===n}))})))},o.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},o.prototype.setPageActions=function(e){e&&(this._pageActions=[{label:this.literals.pageAction,action:this.openNew.bind(this,e.new),disabled:!this._actions.new}])},o.prototype.setRemoveAllAction=function(){var e=this._actions;this.showRemove(e.removeAll)&&this._pageActions.push({label:this.literals.pageActionRemoveAll,action:this.confirmRemoveAll.bind(this,e.removeAll,e.beforeRemoveAll),disabled:this.disableRemoveAll.bind(this)})},o.prototype.disableRemoveAll=function(){return!this.getSelectedItemsKeysToRemove()},o.prototype.setTableActions=function(e){if(e){var t=this.showRemove(e.remove);this._tableActions=[{action:this.openDetail.bind(this,e.detail),label:this.literals.tableActionView,visible:!!this._actions.detail},{action:this.openEdit.bind(this,e.edit),label:this.literals.tableActionEdit,visible:!!this._actions.edit},{action:this.openDuplicate.bind(this,e.duplicate),label:this.literals.tableActionDuplicate,visible:!!this._actions.duplicate},{action:this.confirmRemove.bind(this,e.remove,e.beforeRemove),label:this.literals.tableActionDelete,separator:!0,type:"danger",visible:t}]}},o.prototype.loadDataFromAPI=function(){var e=this.activatedRoute.snapshot.data,t=e.serviceApi,o=e.serviceMetadataApi,n=e.serviceLoadApi||this.onLoad;this.serviceApi=t||this.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi,metadata:o});var i=this.getMetadata(t,n),r=this.loadData(),s=this.getInitialValuesFromFilter();Object.keys(s).length?this.subscriptions.add(i.subscribe()):this.subscriptions.add(a.concat(i,r).subscribe())},o.prototype.getInitialValuesFromFilter=function(){var e=this.filters.reduce((function(e,t){var o;return Object.assign(e,((o={})[t.property]=t.initValue,o))}),{});return Object.keys(e).forEach((function(t){e[t]||delete e[t]})),e},o.prototype.loadOptionsOnInitialize=function(e){var t=this;return e?this.getPoDynamicPageOptions(e).pipe(p.tap((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))):a.EMPTY},o.prototype.getPoDynamicPageOptions=function(e){var t={fields:this.fields,actions:this.actions,breadcrumb:this.breadcrumb,title:this.title,keepFilters:this.keepFilters,concatFilters:this.concatFilters};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"fields",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0},{nameProp:"breadcrumb"},{nameProp:"title"},{nameProp:"keepFilters"},{nameProp:"concatFilters"}]})},o.prototype.showRemove=function(e){var t=null!=e&&e;return"boolean"!=typeof t||t},o.prototype.updateFilterValue=function(e){return this.fields.map((function(t){e.hasOwnProperty(t.property)&&(t.initValue=e[t.property])}))},o.ctorParameters=function(){return[{type:r.Router},{type:r.ActivatedRoute},{type:i.PoDialogService},{type:i.PoNotificationService},{type:ne},{type:re},{type:Ae}]},d([t.Input("p-load"),h("design:type",Object)],o.prototype,"onLoad",void 0),d([t.Input("p-actions"),h("design:type",Object),h("design:paramtypes",[Object])],o.prototype,"actions",null),d([i.InputBoolean(),t.Input("p-keep-filters"),h("design:type",Boolean)],o.prototype,"keepFilters",void 0),d([i.InputBoolean(),t.Input("p-concat-filters"),h("design:type",Boolean)],o.prototype,"concatFilters",void 0),o=d([t.Component({selector:"po-page-dynamic-table",template:'<po-page-dynamic-search\n  [p-actions]="pageActions"\n  [p-breadcrumb]="breadcrumb"\n  [p-filters]="filters"\n  [p-keep-filters]="keepFilters"\n  [p-concat-filters]="concatFilters"\n  [p-title]="title"\n  (p-advanced-search)="onAdvancedSearch($event)"\n  (p-change-disclaimers)="onChangeDisclaimers($event)"\n  (p-quick-search)="onQuickSearch($event)"\n>\n  <po-table\n    p-sort="true"\n    [p-actions]="tableActions"\n    [p-checkbox]="hasActionRemoveAll"\n    [p-columns]="columns"\n    [p-items]="items"\n    [p-show-more-disabled]="!hasNext"\n    (p-show-more)="showMore()"\n    (p-sort-by)="onSort($event)"\n  >\n  </po-table>\n</po-page-dynamic-search>\n',providers:[ne]}),h("design:paramtypes",[r.Router,r.ActivatedRoute,i.PoDialogService,i.PoNotificationService,ne,re,Ae])],o)}(Se),Ee=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,i.PoTableModule,we,me,pe],declarations:[Ce],exports:[Ce]})],e)}(),Me=function(){function e(){this.periodicity="single",this.firstExecution=new Date,this.firstExecutionHour=this.getCurrentHour(this.firstExecution),this.recurrent=!0}return e.prototype.getCurrentHour=function(e){return(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())},e}(),Oe=function(){function e(e){this.http=e,this.endpoint="/",this.headers=new s.HttpHeaders({"X-PO-SCREEN-LOCK":"true"})}return e.prototype.configServiceApi=function(e){void 0===e&&(e={}),this.endpoint=e.endpoint},e.prototype.createResource=function(e){var t=this.convertToJobScheduler(e);return this.http.post(""+this.endpoint,t,{headers:this.headers})},e.prototype.getHeadProcesses=function(){return this.http.head(this.endpoint+"/processes",{headers:{"X-PO-No-Error":"true"}})},e.prototype.getParametersByProcess=function(e){return this.http.get(this.endpoint+"/processes/"+e+"/parameters",{headers:this.headers}).pipe(p.map((function(e){return e.items})))},e.prototype.getProcess=function(e){return this.http.get(this.endpoint+"/processes/"+e,{headers:this.headers})},e.prototype.getProcesses=function(e){return void 0===e&&(e={}),this.http.get(this.endpoint+"/processes",{params:e})},e.prototype.getResource=function(e){var t=this;return this.http.get(this.endpoint+"/"+e,{headers:this.headers}).pipe(p.map((function(e){return t.convertToJobSchedulerInternal(e)})))},e.prototype.updateResource=function(e,t){var o=this.convertToJobScheduler(t);return this.http.put(this.endpoint+"/"+e,o,{headers:this.headers})},e.prototype.convertToJobScheduler=function(e){var t=u({},e);return e.periodicity&&("single"===e.periodicity?t.recurrent=!1:Object.assign(t,this.convertToPeriodicity(e))),e.firstExecutionHour&&(t.firstExecution=this.replaceHourFirstExecution(e.firstExecution,e.firstExecutionHour)),Object.keys(this.returnValidExecutionParameter(t.executionParameter)).length||delete t.executionParameter,this.removeInvalidKeys(t),t},e.prototype.convertToJobSchedulerInternal=function(e){void 0===e&&(e={});var t=u({},e);return e.firstExecution&&(t.firstExecutionHour=this.getHourFirstExecution(e.firstExecution)),Object.assign(t,this.convertToPeriodicityInternal(e)),this.removeInvalidKeys(t,["weekly","monthly","daily"]),t},e.prototype.convertToPeriodicity=function(e){var t={},o=e.periodicity;return o&&(t[o]={},"monthly"===o?t[o].day=e.dayOfMonth?parseInt(e.dayOfMonth,10):0:"weekly"===o&&(t[o].daysOfWeek=e.daysOfWeek),t[o].hour=e.hour?parseInt(e.hour.split(":")[0],10):0,t[o].minute=e.hour?parseInt(e.hour.split(":")[1],10):0),t},e.prototype.convertToPeriodicityInternal=function(e){return void 0===e&&(e={}),e.monthly?{periodicity:"monthly",hour:M(e.monthly.hour)+":"+M(e.monthly.minute),dayOfMonth:e.monthly.day}:e.daily?{periodicity:"daily",hour:M(e.daily.hour)+":"+M(e.daily.minute)}:e.weekly?{periodicity:"weekly",hour:M(e.weekly.hour)+":"+M(e.weekly.minute),daysOfWeek:y(e.weekly.daysOfWeek)}:{periodicity:"single"}},e.prototype.getCurrentHour=function(e){return M(e.getHours())+":"+M(e.getMinutes())},e.prototype.getHourFirstExecution=function(e){return this.getCurrentHour(new Date(e))},e.prototype.removeInvalidKeys=function(e,t){var o=t||["periodicity","hour","minute","day","daysOfWeek","dayOfMonth","firstExecutionHour"];Object.keys(e).forEach((function(t){o.includes(t)&&delete e[t]}))},e.prototype.replaceHourFirstExecution=function(e,t){var o=new Date(e),n=t.split(":"),i=parseInt(n[0],10),r=parseInt(n[1],10);return o.setHours(i,r),function(e,t){if(e){var o=e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),i=o<10?"0"+o:o,r=function(e){if(e>=1e3)return e.toString();if(e>99&&e<1e3)return"0"+e;if(e>9&&e<100)return"00"+e;if(e>=0&&e<10)return"000"+e}(e.getFullYear()),s=e.toString();return t?r+"-"+i+"-"+n+t:r+"-"+i+"-"+n+"T"+s.substring(16,24)+s.substring(28,31)+":"+s.substring(31,33)}return null}(o)},e.prototype.returnValidExecutionParameter=function(e){var t=u({},e);for(var o in t)t.hasOwnProperty(o)&&void 0===t[o]&&delete t[o];return t},e.ctorParameters=function(){return[{type:s.HttpClient}]},e=d([t.Injectable(),h("design:paramtypes",[s.HttpClient])],e)}(),Ie=function(){function e(e){this.poPageJobSchedulerService=e,this._subscription=new a.Subscription,this.breadcrumb={items:[]},this.model=new Me}return e.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},e.prototype.loadData=function(e){var t=this;e?this._subscription.add(this.poPageJobSchedulerService.getResource(e).subscribe((function(e){t.model=e}),(function(){t.model=new Me}))):this.model=new Me},e.prototype.markAsDirtyInvalidControls=function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.invalid&&o.markAsDirty()}},e.ctorParameters=function(){return[{type:Oe}]},d([t.Input("p-breadcrumb"),h("design:type",Object)],e.prototype,"breadcrumb",void 0),d([t.Input("p-service-api"),h("design:type",String)],e.prototype,"serviceApi",void 0),d([t.Input("p-title"),h("design:type",String)],e.prototype,"title",void 0),e=d([t.Directive(),h("design:paramtypes",[Oe])],e)}(),Re={en:{at:"at",back:"Back",next:"Next",periodicity:"Periodicity",execution:"Execution",process:"Process",enterProcess:"Enter a process",recurrent:"Recurrent",single:"Single",daily:"Daily",weekly:"Weekly",monthly:"Monthly",scheduling:"Scheduling",parameterization:"Parameterization",conclude:"Conclude",firstExecution:"First Execution",hour:"Hour",day:"Day",weekDays:"Week days",sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",parameters:"Parameters",yes:"Yes",no:"No",notReported:"Not reported",periodicityData:"Periodicity data",confirmation:"Confirmation",confirmSaveMessage:"Are you sure you want to complete this schedule?",confirmUpdateMessage:"Are you sure you want to update this schedule?",saveNotificationSuccessUpdate:"Successfully updated scheduling",saveNotificationSuccessSave:"Successfully saved scheduling",parametersNotFound:"Parameters not found."},es:{at:"a las",back:"Volver",next:"Avanzar",periodicity:"Periodicidad",execution:"Ejecución",process:"Proceso",enterProcess:"Informe un proceso",recurrent:"Recurrente",single:"Única",daily:"Diaria",weekly:"Semanal",monthly:"Mensual",scheduling:"Programación",parameterization:"Parametrización",conclude:"Completar",firstExecution:"Primera ejecución",hour:"Horario",day:"Día",weekDays:"Dias de la semana",sunday:"Domingo",monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",parameters:"Parámetros",yes:"Sí",no:"No",notReported:"No informado",periodicityData:"Dados da periodicidade",confirmation:"Confirmación",confirmSaveMessage:"¿Está seguro de que desea completar esta programación de proceso?",confirmUpdateMessage:"¿Está seguro de que desea cambiar esta programación de proceso?",saveNotificationSuccessUpdate:"Programación de proceso actualizada con éxito.",saveNotificationSuccessSave:"Programación de proceso salvo con éxito.",parametersNotFound:"No se encontraron parámetros."},pt:{at:"às",back:"Voltar",next:"Avançar",periodicity:"Periodicidade",execution:"Execução",process:"Processo",enterProcess:"Informe um processo",recurrent:"Recorrente",single:"Única",daily:"Diária",weekly:"Semanal",monthly:"Mensal",scheduling:"Agendamento",parameterization:"Parametrização",conclude:"Concluir",firstExecution:"Primeira execução",hour:"Horário",day:"Dia",weekDays:"Dias de semana",sunday:"Domingo",monday:"Segunda-feira",tuesday:"Terça-feira",wednesday:"Quarta-feira",thursday:"Quinta-feira",friday:"Sexta-feira",saturday:"Sábado",parameters:"Parâmetros",yes:"Sim",no:"Não",notReported:"Não informado",periodicityData:"Dados da periodicidade",confirmation:"Confirmação",confirmSaveMessage:"Tem certeza que deseja concluir este agendamento de processo?",confirmUpdateMessage:"Tem certeza que deseja alterar este agendamento de processo?",saveNotificationSuccessUpdate:"Agendamento de processo atualizado com sucesso.",saveNotificationSuccessSave:"Agendamento de processo salvo com sucesso.",parametersNotFound:"Parâmetros não foram encontrados."}},Fe=function(){function e(e){this.poPageJobSchedulerService=e}return e.prototype.getFilteredData=function(e,t,o){var n={page:t,pageSize:o,search:e};return this.poPageJobSchedulerService.getProcesses(n)},e.prototype.getObjectByValue=function(e){return this.poPageJobSchedulerService.getProcess(e)},e.ctorParameters=function(){return[{type:Oe}]},e=d([t.Injectable(),h("design:paramtypes",[Oe])],e)}(),Te=function(e){function o(t,o,n,i,r){var s=e.call(this,r)||this;return s.poPageDynamicLookupService=t,s.activatedRoute=o,s.poDialogService=n,s.poNotification=i,s.poPageJobSchedulerService=r,s.isEdit=!1,s.literals=u(u({},Re.pt),Re[b()]),s.parameters=[],s.step=1,s.backPageAction={label:s.literals.back,action:s.nextStepOperation.bind(s,"back"),disabled:s.isDisabledBack.bind(s)},s.concludePageActions=[{label:s.literals.conclude,action:s.confirmJobScheduler.bind(s)},u({},s.backPageAction)],s.nextPageActions=[{label:s.literals.next,action:s.nextStepOperation.bind(s,"next"),disabled:s.isDisabledAdvance.bind(s)},u({},s.backPageAction)],s.jobSchedulerActions=y(s.nextPageActions),s.steps=[{label:s.literals.scheduling},{label:s.literals.parameterization},{label:s.literals.conclude}],s}return l(o,e),Object.defineProperty(o.prototype,"stepperOrientation",{get:function(){return window.innerWidth>481&&window.innerWidth<960?"horizontal":"vertical"},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){var e=this.activatedRoute.snapshot.params.id;this.isEdit=!!e,this.poPageJobSchedulerService.configServiceApi({endpoint:this.serviceApi}),this.loadData(e)},o.prototype.changePageActionsBySteps=function(e,t){var o=this.steps.length;t===o?this.jobSchedulerActions=y(this.concludePageActions):e===o&&t<e&&(this.jobSchedulerActions=y(this.nextPageActions))},o.prototype.nextStep=function(e){if(e>1&&this.schedulerExecution.form.invalid)this.markAsDirtyInvalidControls(this.schedulerExecution.form.controls);else if(e>2&&this.schedulerParameters&&this.schedulerParameters.form&&this.schedulerParameters.form.invalid)this.markAsDirtyInvalidControls(this.schedulerParameters.form.controls);else{this.setModelRecurrent();var t=JSON.parse(JSON.stringify(this.model));e===this.steps.length&&(this.publicValues=this.hidesSecretValues(t)),this.changePageActionsBySteps(this.step,e);var o=this.steps[this.step-1];this.step=e,o&&(o.status=i.PoStepperStatus.Done)}},o.prototype.onChangeProcess=function(e){if(e.existAPI&&e.processId)return this.getParametersByProcess(e.processId),void(this.isEdit||(this.model.executionParameter={}))},o.prototype.confirmJobScheduler=function(){var e=this,t=this.activatedRoute.snapshot.params.id,o=t?this.literals.confirmUpdateMessage:this.literals.confirmSaveMessage;this.poDialogService.confirm({title:this.literals.confirmation,message:o,confirm:function(){var o=u({},e.model);e.save(o,t)}})},o.prototype.emitSuccessMessage=function(e,t){return m(this,void 0,void 0,(function(){return g(this,(function(o){switch(o.label){case 0:return[4,t.toPromise()];case 1:return o.sent(),this.poNotification.success(e),this.resetJobSchedulerForm(),[2]}}))}))},o.prototype.getParametersByProcess=function(e){var t=this;this.poPageJobSchedulerService.getParametersByProcess(e).subscribe((function(e){t.parameters=e}))},o.prototype.hidesSecretValues=function(e){var t=this;return this.parameters.forEach((function(o){t.isSecretParameter(e,o)&&(e.executionParameter[o.property]="**********")})),e},o.prototype.isDisabledAdvance=function(){var e,t;return(null===(t=null===(e={1:this.schedulerExecution,2:this.schedulerParameters}[this.step])||void 0===e?void 0:e.form)||void 0===t?void 0:t.invalid)||!1},o.prototype.isDisabledBack=function(){return 1===this.step},o.prototype.isSecretParameter=function(e,t){return e.executionParameter&&t.hasOwnProperty("secret")&&!0===t.secret&&e.executionParameter.hasOwnProperty(t.property)},o.prototype.nextStepOperation=function(e){var t="back"===e?this.step-1:this.step+1;this.nextStep(t)},o.prototype.resetJobSchedulerForm=function(){var e=this;this.schedulerExecution.form.reset(),setTimeout((function(){e.model=new Me,e.step=1,e.steps.forEach((function(e){e.status=i.PoStepperStatus.Default})),e.jobSchedulerActions=y(e.nextPageActions)}))},o.prototype.save=function(e,t){var o=t?this.poPageJobSchedulerService.updateResource(t,e):this.poPageJobSchedulerService.createResource(e),n=t?this.literals.saveNotificationSuccessUpdate:this.literals.saveNotificationSuccessSave;this.emitSuccessMessage(n,o)},o.prototype.setModelRecurrent=function(){this.model.recurrent="single"!==this.model.periodicity&&this.model.recurrent},o.ctorParameters=function(){return[{type:Fe},{type:r.ActivatedRoute},{type:i.PoDialogService},{type:i.PoNotificationService},{type:Oe}]},d([t.ViewChild("schedulerExecution",{static:!0}),h("design:type",Object)],o.prototype,"schedulerExecution",void 0),d([t.ViewChild("schedulerParameters"),h("design:type",Object)],o.prototype,"schedulerParameters",void 0),o=d([t.Component({selector:"po-page-job-scheduler",template:'<po-page-default [p-actions]="jobSchedulerActions" [p-breadcrumb]="breadcrumb" [p-title]="title">\n  <div class="po-row">\n    <po-stepper\n      class="po-lg-3 po-xl-2"\n      p-sequential="true"\n      [p-orientation]="stepperOrientation"\n      [p-step]="step"\n      [p-steps]="steps"\n      (p-change-step)="nextStep($event)"\n    >\n    </po-stepper>\n\n    <po-container class="po-lg-8 po-xl-6">\n      <form #formScheduler="ngForm">\n        <div class="po-row">\n          <po-page-job-scheduler-execution\n            [hidden]="step !== 1"\n            #schedulerExecution\n            class="po-md-12"\n            [p-is-edit]="isEdit"\n            [p-literals]="literals"\n            [p-value]="model"\n            (p-change-process)="onChangeProcess($event)"\n          >\n          </po-page-job-scheduler-execution>\n\n          <po-page-job-scheduler-parameters\n            *ngIf="step === 2"\n            #schedulerParameters\n            class="po-md-12"\n            [p-literals]="literals"\n            [p-parameters]="parameters || []"\n            [(p-value)]="model.executionParameter"\n          >\n          </po-page-job-scheduler-parameters>\n\n          <po-page-job-scheduler-summary\n            *ngIf="step === 3"\n            class="po-md-12"\n            [p-literals]="literals"\n            [p-parameters]="parameters"\n            [p-value]="publicValues"\n          >\n          </po-page-job-scheduler-summary>\n        </div>\n      </form>\n    </po-container>\n  </div>\n</po-page-default>\n',encapsulation:t.ViewEncapsulation.None,styles:["\n      po-container .po-container {\n        overflow-y: unset;\n      }\n    "]}),h("design:paramtypes",[Fe,r.ActivatedRoute,i.PoDialogService,i.PoNotificationService,Oe])],o)}(Ie),xe=function(){function e(e,o){this.poPageJobSchedulerService=e,this.poPageJobSchedulerLookup=o,this._value={},this.dayPattern="^(3[0-1]|[0-2][0-9]|[1-9]|0[1-9])$",this.existProcessAPI=!0,this.minDateFirstExecution=new Date,this.periodicityOptions=[],this.timePattern="^(2[0-3]|[01][0-9]):?([0-5][0-9])$",this.weekDays=[],this.isEdit=!1,this.literals={},this.changeProcess=new t.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e&&A(e,"object")?e:{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startDateFirstExecution",{get:function(){return this.isEdit?void 0:this.minDateFirstExecution},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){e.subscribeProcessIdValueChanges()}))},e.prototype.ngOnInit=function(){this.periodicityTemplates={daily:this.dailyTemplate,monthly:this.monthlyTemplate,weekly:this.weeklyTempalte},this.checkExistsProcessesAPI(),this.periodicityOptions=this.getPeriodicityOptions(),this.weekDays=this.getWeekDays()},e.prototype.checkExistsProcessesAPI=function(){var e=this;this.poPageJobSchedulerService.getHeadProcesses().subscribe(void 0,(function(t){e.existProcessAPI=!1}))},e.prototype.getPeriodicityOptions=function(){return[{label:this.literals.single,value:"single"},{label:this.literals.daily,value:"daily"},{label:this.literals.weekly,value:"weekly"},{label:this.literals.monthly,value:"monthly"}]},e.prototype.getWeekDays=function(){return[{label:this.literals.sunday,value:"Sunday"},{label:this.literals.monday,value:"Monday"},{label:this.literals.tuesday,value:"Tuesday"},{label:this.literals.wednesday,value:"Wednesday"},{label:this.literals.thursday,value:"Thursday"},{label:this.literals.friday,value:"Friday"},{label:this.literals.saturday,value:"Saturday"}]},e.prototype.subscribeProcessIdValueChanges=function(){var e=this;this.form.controls.processID.valueChanges.subscribe((function(t){e.changeProcess.emit({processId:t,existAPI:e.existProcessAPI})}))},e.ctorParameters=function(){return[{type:Oe},{type:Fe}]},d([t.ViewChild("formExecution",{static:!0}),h("design:type",n.NgForm)],e.prototype,"form",void 0),d([t.ViewChild("dailyTemplate",{static:!0}),h("design:type",Object)],e.prototype,"dailyTemplate",void 0),d([t.ViewChild("monthlyTemplate",{static:!0}),h("design:type",Object)],e.prototype,"monthlyTemplate",void 0),d([t.ViewChild("weeklyTemplate",{static:!0}),h("design:type",Object)],e.prototype,"weeklyTempalte",void 0),d([t.Input("p-is-edit"),h("design:type",Boolean)],e.prototype,"isEdit",void 0),d([t.Input("p-literals"),h("design:type",Object)],e.prototype,"literals",void 0),d([t.Input("p-value"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"value",null),d([t.Output("p-change-process"),h("design:type",t.EventEmitter)],e.prototype,"changeProcess",void 0),e=d([t.Component({selector:"po-page-job-scheduler-execution",template:'<form #formExecution="ngForm">\n  <div class="po-row">\n    <ng-container *ngIf="existProcessAPI; then lookupProcessesID; else inputProcessesID"></ng-container>\n  </div>\n\n  <div class="po-row">\n    <po-divider class="po-md-12" [p-label]="literals.firstExecution"></po-divider>\n\n    <po-datepicker\n      class="po-md-4"\n      name="firstExecution"\n      [(ngModel)]="value.firstExecution"\n      p-placeholder="dd/mm/aaaa"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.day"\n      [p-min-date]="startDateFirstExecution"\n    >\n    </po-datepicker>\n\n    <po-input\n      class="po-md-2"\n      name="firstExecutionHour"\n      [(ngModel)]="value.firstExecutionHour"\n      p-mask="99:99"\n      p-mask-format-model\n      p-placeholder="HH:mm"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.hour"\n      [p-pattern]="timePattern"\n    >\n    </po-input>\n  </div>\n\n  <hr />\n\n  <div class="po-row">\n    <po-radio-group\n      class="po-sm-12"\n      name="periodicity"\n      [(ngModel)]="value.periodicity"\n      p-columns="4"\n      p-required\n      [p-label]="literals.periodicity"\n      [p-options]="periodicityOptions"\n    >\n    </po-radio-group>\n\n    <ng-container *ngIf="value.periodicity !== \'single\'">\n      <po-divider class="po-md-12" [p-label]="literals.periodicityData"> </po-divider>\n\n      <div class="po-row">\n        <ng-container *ngTemplateOutlet="periodicityTemplates[value.periodicity]"> </ng-container>\n      </div>\n\n      <div class="po-row">\n        <po-switch\n          class="po-md-3"\n          name="recurrent"\n          [(ngModel)]="value.recurrent"\n          [p-label]="literals.recurrent"\n          [p-label-off]="literals.no"\n          [p-label-on]="literals.yes"\n        >\n        </po-switch>\n      </div>\n    </ng-container>\n  </div>\n\n  <ng-template #lookupProcessesID>\n    <po-lookup\n      class="po-md-12"\n      name="processID"\n      [(ngModel)]="value.processID"\n      p-field-label="description"\n      p-field-value="processID"\n      p-required\n      [p-disabled]="isEdit"\n      [p-filter-service]="poPageJobSchedulerLookup"\n      [p-label]="literals.process"\n      [p-placeholder]="literals.enterProcess"\n    >\n    </po-lookup>\n  </ng-template>\n\n  <ng-template #inputProcessesID>\n    <po-input\n      class="po-md-12"\n      name="processID"\n      [(ngModel)]="value.processID"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.process"\n      [p-placeholder]="literals.enterProcess"\n    >\n    </po-input>\n  </ng-template>\n\n  <ng-template #dailyTemplate>\n    <ng-container *ngTemplateOutlet="inputHourTemplate"> </ng-container>\n  </ng-template>\n\n  <ng-template #weeklyTemplate>\n    <div class="po-row">\n      <ng-container *ngTemplateOutlet="inputHourTemplate"> </ng-container>\n    </div>\n\n    <po-checkbox-group\n      class="po-md-12"\n      name="daysOfWeek"\n      [(ngModel)]="value.daysOfWeek"\n      p-columns="4"\n      p-required\n      [p-label]="literals.weekDays"\n      [p-options]="weekDays"\n    >\n    </po-checkbox-group>\n  </ng-template>\n\n  <ng-template #monthlyTemplate>\n    <po-number\n      class="po-md-3"\n      name="dayOfMonth"\n      [(ngModel)]="value.dayOfMonth"\n      p-required\n      [p-error-pattern]="\'Dia inválido\'"\n      [p-label]="literals.day"\n      [p-max]="31"\n      [p-pattern]="dayPattern"\n    >\n    </po-number>\n\n    <ng-container *ngTemplateOutlet="inputHourTemplate"> </ng-container>\n  </ng-template>\n\n  <ng-template #inputHourTemplate>\n    <po-input\n      class="po-md-2"\n      name="hour"\n      [(ngModel)]="value.hour"\n      p-mask="99:99"\n      p-mask-format-model\n      p-placeholder="HH:mm"\n      p-required\n      [p-label]="literals.hour"\n      [p-pattern]="timePattern"\n    >\n    </po-input>\n  </ng-template>\n</form>\n'}),h("design:paramtypes",[Oe,Fe])],e)}(),De=function(){function e(){this.literals={},this.parameters=[],this.valueChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;this.form&&setTimeout((function(){e.form.valueChanges.subscribe((function(t){e.valueChange.emit(t)}))}))},d([t.ViewChild("parametersForm"),h("design:type",n.NgForm)],e.prototype,"form",void 0),d([t.Input("p-literals"),h("design:type",Object)],e.prototype,"literals",void 0),d([t.Input("p-parameters"),h("design:type",Array)],e.prototype,"parameters",void 0),d([t.Input("p-value"),h("design:type",Object)],e.prototype,"value",void 0),d([t.Output("p-valueChange"),h("design:type",t.EventEmitter)],e.prototype,"valueChange",void 0),e=d([t.Component({selector:"po-page-job-scheduler-parameters",template:'<ng-container *ngIf="parameters && parameters.length; then formFieldsTemplate; else parametersNotFoundTemplate">\n</ng-container>\n\n<ng-template #parametersNotFoundTemplate>\n  <div class="po-text-center">\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.parametersNotFound }}\n    </span>\n  </div>\n</ng-template>\n\n<ng-template #formFieldsTemplate>\n  <form #parametersForm="ngForm">\n    <po-dynamic-form p-group-form [p-fields]="parameters" [p-value]="value"> </po-dynamic-form>\n  </form>\n</ng-template>\n'})],e)}(),Le=function(){function e(e){this.datePipe=e,this.executionValue="",this.firstExecutionValue="",this.infoOrientation=i.PoInfoOrientation.Horizontal,this.periodicityValue="",this.recurrentValue="",this.literals={},this.parameters=[],this.value={}}return e.prototype.ngOnInit=function(){var e=this.value,t=e.periodicity,o=e.hour,n=e.dayOfMonth,i=e.daysOfWeek,r=e.recurrent,s=e.firstExecution,a=e.firstExecutionHour;this.periodicityValue=this.getPeriodicityLabel(t),this.executionValue=this.getExecutionValue(t,o,i,n),this.firstExecutionValue=this.getFirstExecutionLabel(s,a),this.recurrentValue=this.getRecurrentValue(r)},e.prototype.getExecutionValue=function(e,t,o,n){switch(e){case"daily":return this.getHourLabel(t);case"monthly":return this.getMonthlyLabelExecution(n,t);case"weekly":return this.getWeeklyLabelExecution(o,t);default:return this.literals.notReported}},e.prototype.getFirstExecutionLabel=function(e,t){return e?this.datePipe.transform(e,"dd/MM/yyyy","-0200")+" "+this.getHourLabel(t):this.literals.notReported},e.prototype.getHourLabel=function(e){return this.literals.at+" "+(e||"00:00")+"h"},e.prototype.getMonthlyLabelExecution=function(e,t){var o=this.getHourLabel(t);return this.literals.day+" "+e+" "+o},e.prototype.getPeriodicityLabel=function(e){switch(e){case"daily":return this.literals.daily;case"monthly":return this.literals.monthly;case"weekly":return this.literals.weekly;default:return this.literals.single}},e.prototype.getRecurrentValue=function(e){return e?this.literals.yes:this.literals.no},e.prototype.getSorterWeekDays=function(){return{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}},e.prototype.getTranslateWeekDay=function(e){return{Sunday:this.literals.sunday,Monday:this.literals.monday,Tuesday:this.literals.tuesday,Wednesday:this.literals.wednesday,Thursday:this.literals.thursday,Friday:this.literals.friday,Saturday:this.literals.saturday}[e]||""},e.prototype.getWeekDaysLabel=function(e){var t=this;return void 0===e&&(e=[]),this.sortWeekDays(e).map((function(e){return t.getTranslateWeekDay(e)})).join(", ")},e.prototype.getWeeklyLabelExecution=function(e,t){return e&&Array.isArray(e)?this.getWeekDaysLabel(e)+" "+this.getHourLabel(t):this.literals.notReported},e.prototype.sortWeekDays=function(e){void 0===e&&(e=[]);var t=this.getSorterWeekDays();return e.sort((function(e,o){var n=e.toLowerCase(),i=o.toLowerCase();return t[n]>t[i]?1:-1}))},e.ctorParameters=function(){return[{type:o.DatePipe}]},d([t.Input("p-literals"),h("design:type",Object)],e.prototype,"literals",void 0),d([t.Input("p-parameters"),h("design:type",Array)],e.prototype,"parameters",void 0),d([t.Input("p-value"),h("design:type",Object)],e.prototype,"value",void 0),e=d([t.Component({selector:"po-page-job-scheduler-summary",template:'<div class="po-md-12">\n  <po-info [p-label]="literals.process" [p-orientation]="infoOrientation" [p-value]="value.processID"> </po-info>\n\n  <po-info [p-label]="literals.periodicity" [p-orientation]="infoOrientation" [p-value]="periodicityValue"> </po-info>\n\n  <po-info\n    *ngIf="value.periodicity !== \'single\'"\n    [p-label]="literals.execution"\n    [p-orientation]="infoOrientation"\n    [p-value]="executionValue"\n  >\n  </po-info>\n\n  <po-info [p-label]="literals.recurrent" [p-orientation]="infoOrientation" [p-value]="recurrentValue"> </po-info>\n\n  <po-info [p-label]="literals.firstExecution" [p-orientation]="infoOrientation" [p-value]="firstExecutionValue">\n  </po-info>\n</div>\n\n<po-widget *ngIf="parameters && parameters.length" class="po-pt-1 po-pb-1 po-md-12" [p-title]="literals.parameters">\n  <po-dynamic-view [p-fields]="parameters" [p-value]="value.executionParameter"> </po-dynamic-view>\n</po-widget>\n'}),h("design:paramtypes",[o.DatePipe])],e)}(),je=function(){function e(){}return e=d([t.NgModule({declarations:[Te,xe,De,Le],exports:[Te],imports:[o.CommonModule,n.FormsModule,i.PoButtonModule,i.PoContainerModule,i.PoDialogModule,i.PoDividerModule,i.PoDynamicModule,i.PoFieldModule,i.PoInfoModule,i.PoPageModule,i.PoStepperModule,i.PoWidgetModule],providers:[Oe,Fe]})],e)}();(q=e.PoPageLoginAuthenticationType||(e.PoPageLoginAuthenticationType={})).Basic="Basic",q.Bearer="Bearer";var Ne=function(){function o(e){this.http=e}return o.prototype.onLogin=function(t,o,n){if(o===e.PoPageLoginAuthenticationType.Bearer)return n.password=btoa(n.password),this.http.post(t,n);var i="("+n.login+":"+n.password+")",r=new s.HttpHeaders({Authorization:o+" "+btoa(i)});return delete n.login,delete n.password,this.http.post(t,n,{headers:r})},o.ctorParameters=function(){return[{type:s.HttpClient}]},o=d([t.Injectable(),h("design:paramtypes",[s.HttpClient])],o)}(),_e={en:{title:"Welcome",loginErrorPattern:"Invalid Login",loginHint:"Your login user was given to you at your first day.\n    If you don't have this information contact support",loginPlaceholder:"Insert your e-mail",passwordErrorPattern:"Invalid Password",passwordPlaceholder:"Insert your password",customFieldErrorPattern:"Invalid value",customFieldPlaceholder:"Please enter a value",rememberUser:"Automatic login",rememberUserHint:"You can disable this option in system configuration",submitLabel:"Enter",submittedLabel:"Loading...",forgotPassword:"Forgot your Password?",highlightInfo:"",registerUrl:"New register",titlePopover:"Oops!",forgotYourPassword:"Forgot your password?",ifYouTryHarder:"If you try ",attempts:"{0} more time(s) ",yourUserWillBeBlocked:"without success your user will be blocked and you will be left 24 hours without being able to access :(",createANewPasswordNow:"Better create a new password now! You will be able to log into the system right away.",iForgotMyPassword:"I forgot my password"},es:{title:"Bienvenido",loginErrorPattern:"Login inválido",loginHint:"Su usuario ha sido entregado para usted en su primer día.\n    Si no tiene esta información, póngase en contacto con el soporte técnico",loginPlaceholder:"Inserte su e-mail",passwordErrorPattern:"Contraseña inválida",passwordPlaceholder:"Inserte su contraseña",customFieldErrorPattern:"Valor no válido.",customFieldPlaceholder:"Por favor introduzca un valor",rememberUser:"Inicio de sesión automáticamente",rememberUserHint:"Puede deshabilitar esta opción en el menú del sistema.",submitLabel:"Entrar",submittedLabel:"Cargando...",forgotPassword:"Olvidaste tu contraseña?",highlightInfo:"",registerUrl:"Nuevo registro",titlePopover:"Opa!",forgotYourPassword:"Olvidaste tu contraseña?",ifYouTryHarder:"Si intenta más ",attempts:"{0} vez/veces ",yourUserWillBeBlocked:"sin éxito su usuario sera bloqueado y usted vás permanecer 24 horas sin poder acceder a :(",createANewPasswordNow:"¡Mejor crear una nueva contraseña ahora! Usted podrá entrar en el sistema inmediatamente después.",iForgotMyPassword:"Olvide mi contraseña"},pt:{title:"Bem-vindo",loginErrorPattern:"Login inválido",loginHint:"Seu usuário foi entregue a você no seu primeiro dia.\n    Caso não tenha mais essa informação contacte o suporte",loginPlaceholder:"Insira seu e-mail",passwordErrorPattern:"Senha inválida",passwordPlaceholder:"Insira sua senha",customFieldErrorPattern:"Valor inválido.",customFieldPlaceholder:"Por favor insira um valor",rememberUser:"Logar automaticamente",rememberUserHint:"Você pode desabilitar essa opção no menu do sistema",submitLabel:"Entrar",submittedLabel:"Carregando...",forgotPassword:"Esqueceu sua senha?",highlightInfo:"",registerUrl:"Novo registro",titlePopover:"Opa!",forgotYourPassword:"Esqueceu sua senha?",ifYouTryHarder:"Se tentar mais ",attempts:"{0} vez(es) ",yourUserWillBeBlocked:"sem sucesso seu usuário será bloqueado e você fica 24 horas sem poder acessar :(",createANewPasswordNow:"Melhor criar uma senha nova agora! Você vai poder entrar no sistema logo em seguida.",iForgotMyPassword:"Esqueci minha senha"},ru:{title:"Добро пожаловать!",loginErrorPattern:"Неверный логин",loginHint:"Ваш логин был предоставлен вам в первый день.\n    Если у вас нет этой информации, обратитесь в службу поддержки",loginPlaceholder:"Вставьте свой адрес электронной почты",passwordErrorPattern:"Неверный пароль",passwordPlaceholder:"Введите свой пароль",customFieldErrorPattern:"Неверное значение.",customFieldPlaceholder:"Пожалуйста, введите значение",rememberUser:"Автоматический вход",rememberUserHint:"Вы можете отключить эту опцию в конфигурации системы",submitLabel:"Войти",submittedLabel:"3агрузка...",forgotPassword:"Забыли пароль?",highlightInfo:"",registerUrl:"Новый регистр",titlePopover:"Ой!",forgotYourPassword:"Забыли пароль?",ifYouTryHarder:"Если вы безуспешно попытаетесь войти еще ",attempts:"{0} раз(а) ",yourUserWillBeBlocked:"Ваш пользователь будет заблокирован, и Вы останетесь на 24 часа без возможности доступа :(",createANewPasswordNow:"Лучше создайте новый пароль сейчас! Вы сможете сразу войти в систему.",iForgotMyPassword:"Я забыл свой пароль"}},Be={en:"in",es:"en",pt:"em",ru:"в"},Ue={en:"to",es:"al",pt:"ao",ru:"к"},qe=function(){function o(o,n){this.loginService=o,this.router=n,this.allLoginErrors=[],this.allPasswordErrors=[],this.rememberUser=!1,this.showExceededAttemptsWarning=!1,this._authenticationType=e.PoPageLoginAuthenticationType.Basic,this._hideRememberUser=!1,this._loading=!1,this._loginErrors=[],this._passwordErrors=[],this.loginChange=new t.EventEmitter,this.loginSubmit=new t.EventEmitter,this.passwordChange=new t.EventEmitter}return Object.defineProperty(o.prototype,"customField",{get:function(){return this._customField},set:function(e){if(e){if(A(e,"string"))return this.customFieldType="input",this._customField=e,void(this.customFieldObject=this.getDefaultCustomFieldObject(e));if(A(e,"object")&&!Array.isArray(e)&&e.property)return this._customField=e,this.customFieldObject=e,void(this.customFieldObject.options||this.customFieldObject.url?this.customFieldType=this.customFieldObject.options?"select":"combo":this.customFieldType="input")}this._customField=void 0,this.customFieldObject=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contactEmail",{get:function(){return this._contactEmail},set:function(e){this._contactEmail=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"productName",{get:function(){return this._productName},set:function(e){this._productName=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"environment",{get:function(){return this._environment},set:function(e){e&&e.length>40?this._environment=e.substring(0,40):this._environment=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"exceededAttemptsWarning",{get:function(){return this._exceededAttemptsWarning},set:function(e){this._exceededAttemptsWarning=function(e,t){var o=parseInt(e,10),n=parseInt(t,10);return o||0===o?o:n||0===n?n:void 0}(e),this.showExceededAttemptsWarning=this.exceededAttemptsWarning>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hideRememberUser",{get:function(){return this._hideRememberUser},set:function(e){this._hideRememberUser=""===e||S(e),this._hideRememberUser&&(this.rememberUser=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"literals",{get:function(){return this._literals},set:function(e){this._literals=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loading",{get:function(){return this._loading},set:function(e){this._loading=S(e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"login",{get:function(){return this._login},set:function(e){this._login=e,this.authenticationUrl||this.loginChange.emit(this._login)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loginErrors",{get:function(){return this._loginErrors},set:function(e){this._loginErrors=e||[],this.setLoginErrors(this._loginErrors)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"passwordErrors",{get:function(){return this._passwordErrors},set:function(e){this._passwordErrors=e||[],this.setPasswordErrors(this._passwordErrors)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"registerUrl",{get:function(){return this._registerUrl},set:function(e){this._registerUrl=A(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"authenticationType",{get:function(){return this._authenticationType},set:function(t){this._authenticationType=Object.values(e.PoPageLoginAuthenticationType).includes(t)?t:e.PoPageLoginAuthenticationType.Basic},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"authenticationUrl",{get:function(){return this._authenticationUrl},set:function(e){this._authenticationUrl=A(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"blockedUrl",{get:function(){return this._blockedUrl},set:function(e){this._blockedUrl=A(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"language",{get:function(){return this.selectedLanguage||w()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pageLoginLiterals",{get:function(){var e=this.contactEmail?this.concatenateLoginHintWithContactEmail(this.contactEmail):void 0,t=this.productName?this.concatenateTitleWithProductName(this.productName):void 0;return u(u(u(u(u({},_e.pt),_e[this.language]),e),t),this.literals)},enumerable:!0,configurable:!0}),o.prototype.ngOnDestroy=function(){this.loginSubscription&&this.loginSubscription.unsubscribe()},o.prototype.closePopover=function(){this.showExceededAttemptsWarning=!1},o.prototype.onLoginSubmit=function(){var e=this,t={login:this.login,password:this.password,rememberUser:this.rememberUser};this.customField&&(t[this.customFieldObject.property]=this.customFieldObject.value),this.authenticationUrl?this.loginSubscription=this.loginService.onLogin(this.authenticationUrl,this.authenticationType,t).subscribe((function(t){e.setValuesToProperties(),sessionStorage.setItem("PO_USER_LOGIN",JSON.stringify(t)),e.openInternalLink("/")}),(function(t){"400"!==t.error.code&&"401"!==t.error.code||(e.setValuesToProperties(t),e.redirectBlockedUrl(e.exceededAttemptsWarning,e.blockedUrl))})):(this.loginSubmit.emit(t),this.showExceededAttemptsWarning=this.exceededAttemptsWarning>0)},o.prototype.getDefaultCustomFieldObject=function(e){return{property:e}},o.prototype.openExternalLink=function(e){window.open(e,"_blank")},o.prototype.openInternalLink=function(e){this.router.navigate([e])},o.prototype.redirectBlockedUrl=function(e,t){0===e&&t&&(this.showExceededAttemptsWarning=!1,k(t)?this.openExternalLink(t):this.openInternalLink(t))},o.prototype.setValuesToProperties=function(e){e?(this.exceededAttemptsWarning=e.error.maxAttemptsRemaining,this.loginErrors=e.error.loginWarnings,this.passwordErrors=e.error.passwordWarnings,this.blockedUrl=e.error.blockedUrl):(this.exceededAttemptsWarning=0,this.loginErrors=[],this.passwordErrors=[],this.blockedUrl="")},o.ctorParameters=function(){return[{type:Ne},{type:r.Router}]},d([t.Input("p-custom-field"),h("design:type",Object),h("design:paramtypes",[Object])],o.prototype,"customField",null),d([t.Input("p-background"),h("design:type",String)],o.prototype,"background",void 0),d([t.Input("p-contact-email"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"contactEmail",null),d([t.Input("p-product-name"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"productName",null),d([t.Input("p-environment"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"environment",null),d([t.Input("p-exceeded-attempts-warning"),h("design:type",Number),h("design:paramtypes",[Number])],o.prototype,"exceededAttemptsWarning",null),d([t.Input("p-hide-remember-user"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],o.prototype,"hideRememberUser",null),d([t.Input("p-literals"),h("design:type",Object),h("design:paramtypes",[Object])],o.prototype,"literals",null),d([t.Input("p-loading"),h("design:type",Boolean),h("design:paramtypes",[Boolean])],o.prototype,"loading",null),d([t.Input("p-login"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"login",null),d([t.Input("p-logo"),h("design:type",String)],o.prototype,"logo",void 0),d([t.Input("p-login-pattern"),h("design:type",String)],o.prototype,"loginPattern",void 0),d([t.Input("p-login-errors"),h("design:type",Array),h("design:paramtypes",[Array])],o.prototype,"loginErrors",null),d([t.Input("p-password-errors"),h("design:type",Array),h("design:paramtypes",[Array])],o.prototype,"passwordErrors",null),d([t.Input("p-password-pattern"),h("design:type",String)],o.prototype,"passwordPattern",void 0),d([t.Input("p-recovery"),h("design:type",Object),h("design:paramtypes",[Object])],o.prototype,"recovery",null),d([t.Input("p-register-url"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"registerUrl",null),d([t.Input("p-secondary-logo"),h("design:type",String)],o.prototype,"secondaryLogo",void 0),d([t.Input("p-authentication-type"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"authenticationType",null),d([t.Input("p-authentication-url"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"authenticationUrl",null),d([t.Input("p-blocked-url"),h("design:type",String),h("design:paramtypes",[String])],o.prototype,"blockedUrl",null),d([t.Output("p-login-change"),h("design:type",t.EventEmitter)],o.prototype,"loginChange",void 0),d([t.Output("p-login-submit"),h("design:type",Object)],o.prototype,"loginSubmit",void 0),d([t.Output("p-password-change"),h("design:type",t.EventEmitter)],o.prototype,"passwordChange",void 0),o=d([t.Directive(),h("design:paramtypes",[Ne,r.Router])],o)}(),Ve=function(o){function s(e,t,n,i,r,s){var a=o.call(this,r,s)||this;return a.changeDetector=e,a.activatedRoute=t,a.poComponentInjector=n,a.componentRef=null,a.customPasswordError={custom:!1},a.differ=i.find([]).create(null),a}return l(s,o),s.prototype.ngAfterViewChecked=function(){this.differ&&this.validateArrayChanges(this.differ,[{array:this.loginErrors,callback:this.generateLoginError.bind(this)},{array:this.passwordErrors,callback:this.generatePasswordError.bind(this)}])},s.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},s.prototype.changeLoginModel=function(){this.authenticationUrl?this.loginErrors=[]:(this.setLoginErrors(this.loginErrors),this.loginChange.emit(this.login))},s.prototype.changePasswordModel=function(){this.authenticationUrl?this.passwordErrors=[]:(this.setPasswordErrors(this.passwordErrors),this.passwordChange.emit(this.password))},s.prototype.onSelectedLanguage=function(e){this.selectedLanguage=e},s.prototype.openUrl=function(e){switch(typeof e){case"string":this.setUrlRedirect(e);break;case"function":e();break;case"object":this.createModalPasswordRecoveryComponent(e)}},s.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},s.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.authenticationUrl=this.checkingForMetadataProperty(e,"serviceApi")||this.authenticationUrl,this.authenticationType=this.checkingForMetadataProperty(e,"authenticationType")||this.authenticationType,this.environment=this.checkingForMetadataProperty(e,"environment")||this.environment,this.recovery=this.checkingForMetadataProperty(e,"recovery")||this.recovery,this.registerUrl=this.checkingForMetadataProperty(e,"registerUrl")||this.registerUrl)},s.prototype.concatenate=function(e,t,o){return e+" "+t+" "+o},s.prototype.concatenateLiteral=function(e,t,o,n){var i;return(i={})[t]=this.concatenate(o,n,e),i},s.prototype.createModalPasswordRecoveryComponent=function(t){var o=this;this.componentRef&&this.poComponentInjector.destroyComponentInApplication(this.componentRef),this.componentRef=this.poComponentInjector.createComponentInApplication(j),this.componentRef.instance.urlRecovery=t.url,this.componentRef.instance.contactEmail=t.contactMail,this.componentRef.instance.phoneMask=t.phoneMask,this.componentRef.instance.type=t.type||e.PoModalPasswordRecoveryType.Email,this.componentRef.changeDetectorRef.detectChanges(),setTimeout((function(){o.componentRef.instance.open()}))},s.prototype.generateLoginError=function(){if(this.loginErrors&&this.loginErrors.length)this.setLoginErrors(this.loginErrors);else{var e=this.loginForm.form.controls.login;e&&this.resetControl(e)}},s.prototype.generatePasswordError=function(){if(this.passwordErrors&&this.passwordErrors.length)this.setPasswordErrors(this.passwordErrors);else{var e=this.loginForm.form.controls.password;e&&this.resetControl(e)}},s.prototype.resetControl=function(e){e.markAsPristine(),e.markAsUntouched(),e.updateValueAndValidity()},s.prototype.setControlErrors=function(e,t,o,n){t&&(this[e]=t.hasError("pattern")?y(o,[n]):y(o),o&&o.length&&(t.valid||t.pristine)&&(t.markAsTouched(),t.markAsDirty(),t.setErrors(this.customPasswordError)))},s.prototype.setUrlRedirect=function(e){k(e)?window.open(e,"_blank"):this.router.navigate([e])},s.prototype.validateArrayChanges=function(e,t){var o=this;t.forEach((function(t){e.diff(t.array)&&(t.callback(),o.changeDetector.detectChanges())}))},s.prototype.concatenateLoginHintWithContactEmail=function(e){var t=_e[this.language].loginHint,o=Be[this.language];return this.concatenateLiteral(e,"loginHint",t,o)},s.prototype.concatenateTitleWithProductName=function(e){var t=_e[this.language].title,o=Ue[this.language];return this.concatenateLiteral(e,"title",t,o)},s.prototype.setLoginErrors=function(e){var t=this.loginForm.form.controls.login;this.setControlErrors("allLoginErrors",t,e,this.pageLoginLiterals.loginErrorPattern)},s.prototype.setPasswordErrors=function(e){var t=this.loginForm.form.controls.password;this.setControlErrors("allPasswordErrors",t,e,this.pageLoginLiterals.passwordErrorPattern)},s.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:r.ActivatedRoute},{type:i.PoComponentInjectorService},{type:t.IterableDiffers},{type:Ne},{type:r.Router}]},d([t.ViewChild("loginForm",{read:n.NgForm,static:!0}),h("design:type",n.NgForm)],s.prototype,"loginForm",void 0),d([t.ViewChild("pageLogin",{read:t.ViewContainerRef,static:!0}),h("design:type",t.ViewContainerRef)],s.prototype,"pageLogin",void 0),s=d([t.Component({selector:"po-page-login",template:'<po-page-background\n  #pageLogin\n  p-show-select-language\n  [p-background]="background"\n  [p-highlight-info]="pageLoginLiterals.highlightInfo"\n  [p-logo]="logo"\n  [p-secondary-logo]="secondaryLogo"\n  (p-selected-language)="onSelectedLanguage($event)"\n>\n  <div class="po-page-login-header po-mb-2 po-mb-sm-1 po-pt-sm-1">\n    <div class="po-page-login-header-title po-mb-sm-1">{{ pageLoginLiterals.title }}</div>\n    <po-tag *ngIf="environment" p-type="warning" [p-value]="environment"> </po-tag>\n  </div>\n\n  <form #loginForm="ngForm" class="po-page-login-form">\n    <div class="po-row">\n      <div class="po-lg-12">\n        <div class="po-page-login-hint po-page-login-info-container">\n          <po-login\n            class="po-page-login-info-field"\n            name="login"\n            [(ngModel)]="login"\n            p-auto-focus\n            p-required\n            [p-label]="pageLoginLiterals.loginLabel"\n            [p-pattern]="loginPattern"\n            [p-placeholder]="pageLoginLiterals.loginPlaceholder"\n            (click)="closePopover()"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()"\n            (p-change-model)="changeLoginModel()"\n          >\n          </po-login>\n\n          <div class="po-page-login-info-icon-container">\n            <span\n              class="po-icon po-field-icon po-icon-info"\n              p-tooltip-position="right"\n              [p-tooltip]="pageLoginLiterals.loginHint"\n            >\n            </span>\n          </div>\n        </div>\n\n        <div class="po-field-container-bottom po-field-container-error-container">\n          <div\n            *ngFor="let error of allLoginErrors"\n            class="po-field-container-bottom-text-error po-field-container-error-item"\n          >\n            <span class="po-icon po-icon-exclamation"></span>\n            <span class="po-field-container-error-text">{{ error }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class="po-lg-12">\n        <div class="po-page-login-password-container">\n          <po-password\n            class="po-page-login-field-size po-page-login-password-item"\n            name="password"\n            [(ngModel)]="password"\n            p-required\n            [p-label]="pageLoginLiterals.passwordLabel"\n            [p-pattern]="passwordPattern"\n            [p-placeholder]="pageLoginLiterals.passwordPlaceholder"\n            (click)="closePopover()"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()"\n            (p-change-model)="changePasswordModel()"\n          >\n          </po-password>\n          <div class="po-page-login-password-item po-page-login-password-popover-container">\n            <po-page-login-popover\n              *ngIf="showExceededAttemptsWarning && exceededAttemptsWarning"\n              [p-literals]="pageLoginLiterals"\n              [p-recovery]="recovery"\n              [p-remaining-attempts]="exceededAttemptsWarning"\n              (p-forgot-password)="openUrl($event)"\n            >\n            </po-page-login-popover>\n          </div>\n        </div>\n        <div class="po-field-container-bottom po-field-container-error-container">\n          <div\n            *ngFor="let error of allPasswordErrors"\n            class="po-field-container-bottom-text-error po-field-container-error-item"\n          >\n            <span class="po-icon po-icon-exclamation"></span>\n            <span class="po-field-container-error-text">{{ error }}</span>\n          </div>\n        </div>\n      </div>\n\n      <po-input\n        *ngIf="customField && customFieldType === \'input\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldInput"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-error-pattern]="customFieldObject.errorPattern || pageLoginLiterals.customFieldErrorPattern"\n        [p-pattern]="customFieldObject.pattern"\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder"\n        (keyup.enter)="loginForm.valid && onLoginSubmit()"\n      >\n      </po-input>\n\n      <po-combo\n        *ngIf="customField && customFieldType === \'combo\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldCombo"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-field-value]="customFieldObject.fieldValue"\n        [p-filter-service]="customFieldObject.url"\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder"\n      >\n      </po-combo>\n\n      <po-select\n        *ngIf="customField && customFieldType === \'select\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldSelect"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder"\n        [p-options]="customFieldObject.options"\n      >\n      </po-select>\n\n      <div class="po-lg-12">\n        <div *ngIf="!hideRememberUser" class="po-page-login-hint po-page-login-info-container">\n          <po-switch\n            class="po-page-login-info-field po-lg-7 po-offset-lg-5 po-offset-xl-5"\n            name="rememberUser"\n            [(ngModel)]="rememberUser"\n            p-label-position="1"\n            [p-label-off]="pageLoginLiterals.rememberUser"\n            [p-label-on]="pageLoginLiterals.rememberUser"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()"\n          >\n          </po-switch>\n\n          <div class="po-page-login-info-icon-container po-page-login-info-icon-remember-user">\n            <span\n              class="po-icon po-field-icon po-icon-info"\n              p-tooltip-position="right"\n              [p-tooltip]="pageLoginLiterals.rememberUserHint"\n            >\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <po-button\n        class="po-lg-12 po-page-login-button po-page-login-field-size"\n        p-type="primary"\n        [p-disabled]="loginForm.invalid"\n        [p-label]="loading ? pageLoginLiterals.submittedLabel : pageLoginLiterals.submitLabel"\n        [p-loading]="loading"\n        (p-click)="onLoginSubmit()"\n      >\n      </po-button>\n\n      <div *ngIf="recovery" class="po-page-login-recovery-link">\n        <a class="po-font-text-large-bold" (click)="openUrl(recovery)">{{ pageLoginLiterals.forgotPassword }}</a>\n      </div>\n\n      <div *ngIf="registerUrl" class="po-page-login-register-link">\n        <a class="po-font-text-large-bold" (click)="openUrl(registerUrl)">{{ pageLoginLiterals.registerUrl }}</a>\n      </div>\n    </div>\n  </form>\n</po-page-background>\n'}),h("design:paramtypes",[t.ChangeDetectorRef,r.ActivatedRoute,i.PoComponentInjectorService,t.IterableDiffers,Ne,r.Router])],s)}(qe),He=function(){function e(){this.forgotPassword=new t.EventEmitter}return Object.defineProperty(e.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e,A(e,"string")&&(this.recoveryType=k(e)?"externalLink":"internalLink")},enumerable:!0,configurable:!0}),e.prototype.onForgotPasswordClick=function(e){this.forgotPassword.emit(e)},d([t.Input("p-literals"),h("design:type",Object)],e.prototype,"literals",void 0),d([t.Input("p-recovery"),h("design:type",Object),h("design:paramtypes",[Object])],e.prototype,"recovery",null),d([t.Input("p-remaining-attempts"),h("design:type",Number)],e.prototype,"remainingAttempts",void 0),d([t.Output("p-forgot-password"),h("design:type",Object)],e.prototype,"forgotPassword",void 0),e=d([t.Component({selector:"po-page-login-popover",template:'<div class="po-page-login-popover-container">\n  <div class="po-page-login-popover">\n    <div class="po-page-login-popover-arrow"></div>\n    <div class="po-page-login-popover-content">\n      <p class="po-font-text-bold po-page-login-popover-title">\n        {{ literals?.titlePopover }}\n      </p>\n      <p class="po-font-text">\n        {{ literals?.forgotYourPassword }}\n      </p>\n      <p class="po-font-text">\n        {{ literals?.ifYouTryHarder }}\n        <span class="po-font-text-bold po-page-login-popover-attempts">\n          {{ literals?.attempts | poI18n: remainingAttempts }} </span\n        >{{ literals?.yourUserWillBeBlocked }}\n      </p>\n      <br />\n      <p class="po-font-text">\n        {{ literals?.createANewPasswordNow }}\n      </p>\n      <div *ngIf="recovery" class="po-font-text-bold po-mt-1 po-page-login-popover-link-container">\n        <a *ngIf="recoveryType === \'internalLink\'" class="po-page-login-popover-link" [routerLink]="recovery">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n        <a *ngIf="recoveryType === \'externalLink\'" class="po-page-login-popover-link" [href]="recovery" target="_blank">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n        <a *ngIf="!recoveryType" class="po-page-login-popover-link" (click)="onForgotPasswordClick(recovery)">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n'})],e)}(),We=function(){function e(){}return e=d([t.NgModule({imports:[o.CommonModule,n.FormsModule,r.RouterModule,U,i.PoModule],declarations:[Ve,He],exports:[Ve],providers:[Ne]})],e)}(),ze=function(){function e(){}return e=d([t.NgModule({imports:[_,U,$,te,ce,he,we,Ee,je,We],exports:[_,U,$,te,ce,he,we,Ee,je,We]})],e)}(),Je=function(){function e(){}return e=d([t.NgModule({imports:[me,pe],exports:[me,pe]})],e)}(),Ke=function(){function e(){}return e=d([t.NgModule({imports:[ze,Je],exports:[ze,Je]})],e)}();e.PoComponentsModule=ze,e.PoModalPasswordRecoveryComponent=j,e.PoModalPasswordRecoveryErrorMessageComponent=N,e.PoModalPasswordRecoveryModule=_,e.PoPageBackgroundComponent=B,e.PoPageBackgroundModule=U,e.PoPageBlockedUserComponent=J,e.PoPageBlockedUserContactsComponent=K,e.PoPageBlockedUserModule=$,e.PoPageBlockedUserReasonComponent=G,e.PoPageChangePasswordComponent=ee,e.PoPageChangePasswordModule=te,e.PoPageCustomizationModule=me,e.PoPageCustomizationService=re,e.PoPageDynamicDetailComponent=ae,e.PoPageDynamicDetailModule=ce,e.PoPageDynamicEditComponent=de,e.PoPageDynamicEditModule=he,e.PoPageDynamicModule=pe,e.PoPageDynamicSearchComponent=Pe,e.PoPageDynamicSearchModule=we,e.PoPageDynamicService=ne,e.PoPageDynamicTableComponent=Ce,e.PoPageDynamicTableModule=Ee,e.PoPageJobSchedulerComponent=Te,e.PoPageJobSchedulerModule=je,e.PoPageLoginComponent=Ve,e.PoPageLoginModule=We,e.PoServicesModule=Je,e.PoTemplatesModule=Ke,e.poModalPasswordRecoveryLiterals=R,e.poPageBlockedUserButtonLiterals=z,e.poPageBlockedUserLiterals=Y,e.poPageChangePasswordLiterals=X,e.poPageDynamicDetailLiteralsDefault=se,e.poPageDynamicEditLiteralsDefault=ue,e.poPageDynamicLiterals=oe,e.poPageDynamicTableLiteralsDefault=ke,e.ɵa=x,e.ɵb=L,e.ɵc=W,e.ɵd=Q,e.ɵe=Z,e.ɵf=ie,e.ɵg=le,e.ɵh=ye,e.ɵi=fe,e.ɵj=be,e.ɵk=Se,e.ɵl=Ae,e.ɵm=Ie,e.ɵn=Oe,e.ɵo=Fe,e.ɵp=xe,e.ɵq=De,e.ɵr=Le,e.ɵs=qe,e.ɵt=Ne,e.ɵu=He,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=po-ui-ng-templates.umd.min.js.map